"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const yargs = require("yargs");
const synth_1 = require("./synth");
const tasks_1 = require("./tasks");
async function main() {
    const ya = yargs;
    ya.commandDir('cmds');
    tasks_1.discoverTaskCommands(ya);
    ya.recommendCommands();
    ya.wrap(yargs.terminalWidth());
    ya.option('post', { type: 'boolean', default: true, desc: 'Run post-synthesis steps such as installing dependencies. Use --no-post to skip' });
    ya.help();
    const args = ya.argv;
    // no command means just require .projenrc.js
    if (args._.length === 0) {
        process.env.PROJEN_DISABLE_POST = (!args.post).toString();
        await synth_1.synth();
    }
}
main().catch(e => {
    console.error(e.stack);
    process.exit(1);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY2xpL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0JBQStCO0FBQy9CLG1DQUFnQztBQUNoQyxtQ0FBK0M7QUFFL0MsS0FBSyxVQUFVLElBQUk7SUFDakIsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQ2pCLEVBQUUsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFdEIsNEJBQW9CLENBQUMsRUFBRSxDQUFDLENBQUM7SUFFekIsRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDdkIsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQztJQUMvQixFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsaUZBQWlGLEVBQUUsQ0FBQyxDQUFDO0lBQy9JLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUVWLE1BQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUM7SUFFckIsNkNBQTZDO0lBQzdDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUMxRCxNQUFNLGFBQUssRUFBRSxDQUFDO0tBQ2Y7QUFDSCxDQUFDO0FBR0QsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkIsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQixDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHlhcmdzIGZyb20gJ3lhcmdzJztcbmltcG9ydCB7IHN5bnRoIH0gZnJvbSAnLi9zeW50aCc7XG5pbXBvcnQgeyBkaXNjb3ZlclRhc2tDb21tYW5kcyB9IGZyb20gJy4vdGFza3MnO1xuXG5hc3luYyBmdW5jdGlvbiBtYWluKCkge1xuICBjb25zdCB5YSA9IHlhcmdzO1xuICB5YS5jb21tYW5kRGlyKCdjbWRzJyk7XG5cbiAgZGlzY292ZXJUYXNrQ29tbWFuZHMoeWEpO1xuXG4gIHlhLnJlY29tbWVuZENvbW1hbmRzKCk7XG4gIHlhLndyYXAoeWFyZ3MudGVybWluYWxXaWR0aCgpKTtcbiAgeWEub3B0aW9uKCdwb3N0JywgeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6IHRydWUsIGRlc2M6ICdSdW4gcG9zdC1zeW50aGVzaXMgc3RlcHMgc3VjaCBhcyBpbnN0YWxsaW5nIGRlcGVuZGVuY2llcy4gVXNlIC0tbm8tcG9zdCB0byBza2lwJyB9KTtcbiAgeWEuaGVscCgpO1xuXG4gIGNvbnN0IGFyZ3MgPSB5YS5hcmd2O1xuXG4gIC8vIG5vIGNvbW1hbmQgbWVhbnMganVzdCByZXF1aXJlIC5wcm9qZW5yYy5qc1xuICBpZiAoYXJncy5fLmxlbmd0aCA9PT0gMCkge1xuICAgIHByb2Nlc3MuZW52LlBST0pFTl9ESVNBQkxFX1BPU1QgPSAoIWFyZ3MucG9zdCkudG9TdHJpbmcoKTtcbiAgICBhd2FpdCBzeW50aCgpO1xuICB9XG59XG5cblxubWFpbigpLmNhdGNoKGUgPT4ge1xuICBjb25zb2xlLmVycm9yKGUuc3RhY2spO1xuICBwcm9jZXNzLmV4aXQoMSk7XG59KTtcbiJdfQ==