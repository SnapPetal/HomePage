"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Mergify = void 0;
const component_1 = require("../component");
const yaml_1 = require("../yaml");
/**
 * @experimental
 */
class Mergify extends component_1.Component {
    /**
     * @experimental
     */
    constructor(github, options = {}) {
        var _a;
        super(github.project);
        this.rules = new Array();
        new yaml_1.YamlFile(this.project, '.mergify.yml', {
            obj: {
                pull_request_rules: this.rules,
            },
        });
        ((_a = options.rules) !== null && _a !== void 0 ? _a : []).forEach(rule => this.addRule(rule));
        this.project.addTip('Install Mergify in your GitHub repository to enable automatic merges of approved PRs');
    }
    /**
     * @experimental
     */
    addRule(rule) {
        this.rules.push(rule);
    }
}
exports.Mergify = Mergify;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVyZ2lmeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9naXRodWIvbWVyZ2lmeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw0Q0FBeUM7QUFDekMsa0NBQW1DOzs7O0FBYW5DLE1BQWEsT0FBUSxTQUFRLHFCQUFTOzs7O0lBR3BDLFlBQVksTUFBYyxFQUFFLFVBQTBCLEVBQUc7O1FBQ3ZELEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFIUCxVQUFLLEdBQUcsSUFBSSxLQUFLLEVBQWUsQ0FBQztRQUtoRCxJQUFJLGVBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGNBQWMsRUFBRTtZQUN6QyxHQUFHLEVBQUU7Z0JBQ0gsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLEtBQUs7YUFDL0I7U0FDRixDQUFDLENBQUM7UUFFSCxPQUFDLE9BQU8sQ0FBQyxLQUFLLG1DQUFJLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUUxRCxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxzRkFBc0YsQ0FBQyxDQUFDO0lBQzlHLENBQUM7Ozs7SUFFTSxPQUFPLENBQUMsSUFBaUI7UUFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDeEIsQ0FBQztDQUNGO0FBcEJELDBCQW9CQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBZYW1sRmlsZSB9IGZyb20gJy4uL3lhbWwnO1xuaW1wb3J0IHsgR2l0SHViIH0gZnJvbSAnLi9naXRodWInO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lcmdpZnlSdWxlIHtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICByZWFkb25seSBjb25kaXRpb25zOiBzdHJpbmdbXTtcbiAgcmVhZG9ubHkgYWN0aW9uczogeyBbYWN0aW9uOiBzdHJpbmddOiBhbnkgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXJnaWZ5T3B0aW9ucyB7XG4gIHJlYWRvbmx5IHJ1bGVzPzogTWVyZ2lmeVJ1bGVbXTtcbn1cblxuZXhwb3J0IGNsYXNzIE1lcmdpZnkgZXh0ZW5kcyBDb21wb25lbnQge1xuICBwcml2YXRlIHJlYWRvbmx5IHJ1bGVzID0gbmV3IEFycmF5PE1lcmdpZnlSdWxlPigpO1xuXG4gIGNvbnN0cnVjdG9yKGdpdGh1YjogR2l0SHViLCBvcHRpb25zOiBNZXJnaWZ5T3B0aW9ucyA9IHsgfSkge1xuICAgIHN1cGVyKGdpdGh1Yi5wcm9qZWN0KTtcblxuICAgIG5ldyBZYW1sRmlsZSh0aGlzLnByb2plY3QsICcubWVyZ2lmeS55bWwnLCB7XG4gICAgICBvYmo6IHtcbiAgICAgICAgcHVsbF9yZXF1ZXN0X3J1bGVzOiB0aGlzLnJ1bGVzLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIChvcHRpb25zLnJ1bGVzID8/IFtdKS5mb3JFYWNoKHJ1bGUgPT4gdGhpcy5hZGRSdWxlKHJ1bGUpKTtcblxuICAgIHRoaXMucHJvamVjdC5hZGRUaXAoJ0luc3RhbGwgTWVyZ2lmeSBpbiB5b3VyIEdpdEh1YiByZXBvc2l0b3J5IHRvIGVuYWJsZSBhdXRvbWF0aWMgbWVyZ2VzIG9mIGFwcHJvdmVkIFBScycpO1xuICB9XG5cbiAgcHVibGljIGFkZFJ1bGUocnVsZTogTWVyZ2lmeVJ1bGUpIHtcbiAgICB0aGlzLnJ1bGVzLnB1c2gocnVsZSk7XG4gIH1cbn0iXX0=