"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.YamlFile = void 0;
const YAML = require("yaml");
const json_1 = require("./json");
/**
 * @experimental
 */
class YamlFile extends json_1.JsonFile {
    /**
     * @experimental
     */
    constructor(project, filePath, options) {
        super(project, filePath, options);
    }
    /**
     * (experimental) Implemented by derived classes and returns the contents of the file to emit.
     *
     * @experimental
     */
    synthesizeContent(resolver) {
        // sanitize object references by serializing and deserializing to JSON
        const sanitized = JSON.parse(JSON.stringify(resolver.resolve(this.obj)));
        return [
            `# ${YamlFile.PROJEN_MARKER}`,
            '',
            YAML.stringify(sanitized, { indent: 2 }),
        ].join('\n');
    }
}
exports.YamlFile = YamlFile;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieWFtbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy95YW1sLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDZCQUE2QjtBQUU3QixpQ0FBbUQ7Ozs7QUFPbkQsTUFBYSxRQUFTLFNBQVEsZUFBUTs7OztJQUNwQyxZQUFZLE9BQWdCLEVBQUUsUUFBZ0IsRUFBRSxPQUF3QjtRQUN0RSxLQUFLLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNwQyxDQUFDOzs7Ozs7SUFFUyxpQkFBaUIsQ0FBQyxRQUFtQjtRQUM3QyxzRUFBc0U7UUFDdEUsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6RSxPQUFPO1lBQ0wsS0FBSyxRQUFRLENBQUMsYUFBYSxFQUFFO1lBQzdCLEVBQUU7WUFDRixJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQztTQUN6QyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNmLENBQUM7Q0FDRjtBQWRELDRCQWNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgWUFNTCBmcm9tICd5YW1sJztcbmltcG9ydCB7IElSZXNvbHZlciB9IGZyb20gJy4vZmlsZSc7XG5pbXBvcnQgeyBKc29uRmlsZSwgSnNvbkZpbGVPcHRpb25zIH0gZnJvbSAnLi9qc29uJztcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tICcuL3Byb2plY3QnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFlhbWxGaWxlT3B0aW9ucyBleHRlbmRzIEpzb25GaWxlT3B0aW9ucyB7XG5cbn1cblxuZXhwb3J0IGNsYXNzIFlhbWxGaWxlIGV4dGVuZHMgSnNvbkZpbGUge1xuICBjb25zdHJ1Y3Rvcihwcm9qZWN0OiBQcm9qZWN0LCBmaWxlUGF0aDogc3RyaW5nLCBvcHRpb25zOiBZYW1sRmlsZU9wdGlvbnMpIHtcbiAgICBzdXBlcihwcm9qZWN0LCBmaWxlUGF0aCwgb3B0aW9ucyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc3ludGhlc2l6ZUNvbnRlbnQocmVzb2x2ZXI6IElSZXNvbHZlcikge1xuICAgIC8vIHNhbml0aXplIG9iamVjdCByZWZlcmVuY2VzIGJ5IHNlcmlhbGl6aW5nIGFuZCBkZXNlcmlhbGl6aW5nIHRvIEpTT05cbiAgICBjb25zdCBzYW5pdGl6ZWQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc29sdmVyLnJlc29sdmUodGhpcy5vYmopKSk7XG4gICAgcmV0dXJuIFtcbiAgICAgIGAjICR7WWFtbEZpbGUuUFJPSkVOX01BUktFUn1gLFxuICAgICAgJycsXG4gICAgICBZQU1MLnN0cmluZ2lmeShzYW5pdGl6ZWQsIHsgaW5kZW50OiAyIH0pLFxuICAgIF0uam9pbignXFxuJyk7XG4gIH1cbn0iXX0=