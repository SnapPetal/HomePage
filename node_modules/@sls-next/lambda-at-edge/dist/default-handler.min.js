"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./prerender-manifest.json"),t=require("./manifest.json"),r=require("./routes-manifest.json"),n=require("stream"),i=require("zlib"),o=require("http"),a=require("perf_hooks"),s=require("buffer"),u=require("util"),c=require("crypto"),f=require("url"),l=require("https"),d=require("fs"),h=require("os"),p=require("path"),v=require("child_process");require("http2");var g=require("process");function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var y=m(e),b=m(t),w=m(r),S=m(n),E=m(i),x=m(o),C=m(s),A=m(u),T=m(c),L=m(f),O=m(l),k=m(g);const P={"accept-encoding":!0,"content-length":!0,"if-modified-since":!0,"if-none-match":!0,"if-range":!0,"if-unmodified-since":!0,"transfer-encoding":!0,via:!0},j={202:"Accepted",502:"Bad Gateway",400:"Bad Request",409:"Conflict",100:"Continue",201:"Created",417:"Expectation Failed",424:"Failed Dependency",403:"Forbidden",504:"Gateway Timeout",410:"Gone",505:"HTTP Version Not Supported",418:"I'm a teapot",419:"Insufficient Space on Resource",507:"Insufficient Storage",500:"Server Error",411:"Length Required",423:"Locked",420:"Method Failure",405:"Method Not Allowed",301:"Moved Permanently",302:"Moved Temporarily",207:"Multi-Status",300:"Multiple Choices",511:"Network Authentication Required",204:"No Content",203:"Non Authoritative Information",406:"Not Acceptable",404:"Not Found",501:"Not Implemented",304:"Not Modified",200:"OK",206:"Partial Content",402:"Payment Required",308:"Permanent Redirect",412:"Precondition Failed",428:"Precondition Required",102:"Processing",407:"Proxy Authentication Required",431:"Request Header Fields Too Large",408:"Request Timeout",413:"Request Entity Too Large",414:"Request-URI Too Long",416:"Requested Range Not Satisfiable",205:"Reset Content",303:"See Other",503:"Service Unavailable",101:"Switching Protocols",307:"Temporary Redirect",429:"Too Many Requests",401:"Unauthorized",422:"Unprocessable Entity",415:"Unsupported Media Type",305:"Use Proxy"},R={enableHTTPCompression:!1},N=(e,{enableHTTPCompression:t,rewrittenUri:r}=R)=>{const{request:n,response:i={headers:{}}}=e,o={headers:{}},a=new S.default.Readable,s=Object.assign(a,x.default.IncomingMessage.prototype);s.url=r||n.uri,s.method=n.method,s.rawHeaders=[],s.headers={},s.connection={},n.querystring&&(s.url=s.url+"?"+n.querystring);const u=n.headers||{};for(const e of Object.keys(u)){const t=u[e];t.forEach((e=>{s.rawHeaders.push(e.key),s.rawHeaders.push(e.value)})),s.headers[e]=t[0].value}s.getHeader=e=>s.headers[e.toLowerCase()],s.getHeaders=()=>s.headers,n.body&&n.body.data&&s.push(n.body.data,n.body.encoding?"base64":void 0),s.push(null);const c=new S.default;c.finished=!1,Object.defineProperty(c,"statusCode",{get:()=>o.status,set(e){o.status=e,o.statusDescription=j[e]}}),c.headers={},c.writeHead=(e,t)=>(o.status=e,t&&(c.headers=Object.assign(c.headers,t)),c),c.write=e=>{o.body||(o.body=Buffer.from("")),o.body=Buffer.concat([o.body,Buffer.isBuffer(e)?e:Buffer.from(e)])};let f=t&&(e=>{let t=!1;const r=e["accept-encoding"];if(r)for(let e=0;e<r.length;e++){const{value:n}=r[e];-1!==n.split(",").map((e=>e.split(";")[0].trim())).indexOf("gzip")&&(t=!0)}return t})(u);const l=new Promise((e=>{c.end=t=>{!0!==c.finished&&(c.finished=!0,t&&c.write(t),c.statusCode||(c.statusCode=200),o.body&&(o.bodyEncoding="base64",o.body=f?E.default.gzipSync(o.body).toString("base64"):Buffer.from(o.body).toString("base64")),o.headers=((e,t)=>{const r={},n={};return Object.entries(t).forEach((([e,t])=>{n[e.toLowerCase()]=t})),Object.keys(e).forEach((t=>{const i=t.toLowerCase(),o=e[t];P[i]?n[i]&&(r[i]=n[i]):(r[i]=[],o instanceof Array?o.forEach((e=>{r[i].push({key:t,value:e.toString()})})):r[i].push({key:t,value:o.toString()}))})),r})(c.headers,i.headers),f&&(o.headers["content-encoding"]=[{key:"Content-Encoding",value:"gzip"}]),e(o))}}));return c.setHeader=(e,t)=>{c.headers[e.toLowerCase()]=t},c.removeHeader=e=>{delete c.headers[e.toLowerCase()]},c.getHeader=e=>c.headers[e.toLowerCase()],c.getHeaders=()=>c.headers,c.hasHeader=e=>!!c.getHeader(e),{req:s,res:c,responsePromise:l}};N.SPECIAL_NODE_HEADERS=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];var _=N;function I(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var i=1,o="";if("?"===e[s=r+1])throw new TypeError('Pattern cannot start with "?" at '+s);for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--i){s++;break}}else if("("===e[s]&&(i++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at "+s);o+=e[s++]}else o+=e[s++]+e[s++];if(i)throw new TypeError("Unbalanced pattern at "+r);if(!o)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:o}),r=s}else{for(var a="",s=r+1;s<e.length;){var u=e.charCodeAt(s);if(!(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||95===u))break;a+=e[s++]}if(!a)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:a}),r=s}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,i=void 0===n?"./":n,o="[^"+z(t.delimiter||"/#?")+"]+?",a=[],s=0,u=0,c="",f=function(e){if(u<r.length&&r[u].type===e)return r[u++].value},l=function(e){var t=f(e);if(void 0!==t)return t;var n=r[u],i=n.type,o=n.index;throw new TypeError("Unexpected "+i+" at "+o+", expected "+e)},d=function(){for(var e,t="";e=f("CHAR")||f("ESCAPED_CHAR");)t+=e;return t};u<r.length;){var h=f("CHAR"),p=f("NAME"),v=f("PATTERN");if(p||v){var g=h||"";-1===i.indexOf(g)&&(c+=g,g=""),c&&(a.push(c),c=""),a.push({name:p||s++,prefix:g,suffix:"",pattern:v||o,modifier:f("MODIFIER")||""})}else{var m=h||f("ESCAPED_CHAR");if(m)c+=m;else if(c&&(a.push(c),c=""),f("OPEN")){g=d();var y=f("NAME")||"",b=f("PATTERN")||"",w=d();l("CLOSE"),a.push({name:y||(b?s++:""),pattern:y&&!b?o:b,prefix:g,suffix:w,modifier:f("MODIFIER")||""})}else l("END")}}return a}function M(e,t){return function(e,t){void 0===t&&(t={});var r=U(t),n=t.encode,i=void 0===n?function(e){return e}:n,o=t.validate,a=void 0===o||o,s=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var o=e[n];if("string"!=typeof o){var u=t?t[o.name]:void 0,c="?"===o.modifier||"*"===o.modifier,f="*"===o.modifier||"+"===o.modifier;if(Array.isArray(u)){if(!f)throw new TypeError('Expected "'+o.name+'" to not repeat, but got an array');if(0===u.length){if(c)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var l=0;l<u.length;l++){var d=i(u[l],o);if(a&&!s[n].test(d))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but got "'+d+'"');r+=o.prefix+d+o.suffix}}else if("string"!=typeof u&&"number"!=typeof u){if(!c){var h=f?"an array":"a string";throw new TypeError('Expected "'+o.name+'" to be '+h)}}else{d=i(String(u),o);if(a&&!s[n].test(d))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+d+'"');r+=o.prefix+d+o.suffix}}else r+=o}return r}}(I(e,t),t)}function D(e,t){var r=[];return function(e,t,r){void 0===r&&(r={});var n=r.decode,i=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var o=n[0],a=n.index,s=Object.create(null),u=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?s[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return i(e,r)})):s[r.name]=i(n[e],r)},c=1;c<n.length;c++)u(c);return{path:o,index:a,params:s}}}(B(e,r,t),r,t)}function z(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function U(e){return e&&e.sensitive?"":"i"}function q(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,i=void 0!==n&&n,o=r.start,a=void 0===o||o,s=r.end,u=void 0===s||s,c=r.encode,f=void 0===c?function(e){return e}:c,l="["+z(r.endsWith||"")+"]|$",d="["+z(r.delimiter||"/#?")+"]",h=a?"^":"",p=0,v=e;p<v.length;p++){var g=v[p];if("string"==typeof g)h+=z(f(g));else{var m=z(f(g.prefix)),y=z(f(g.suffix));if(g.pattern)if(t&&t.push(g),m||y)if("+"===g.modifier||"*"===g.modifier){var b="*"===g.modifier?"?":"";h+="(?:"+m+"((?:"+g.pattern+")(?:"+y+m+"(?:"+g.pattern+"))*)"+y+")"+b}else h+="(?:"+m+"("+g.pattern+")"+y+")"+g.modifier;else h+="("+g.pattern+")"+g.modifier;else h+="(?:"+m+y+")"+g.modifier}}if(u)i||(h+=d+"?"),h+=r.endsWith?"(?="+l+")":"$";else{var w=e[e.length-1],S="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;i||(h+="(?:"+d+"(?="+l+"))?"),S||(h+="(?="+d+"|"+l+")")}return new RegExp(h,U(r))}(I(e,r),t,r)}function B(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return B(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",U(r))}(e,t,r):q(e,t,r)}function K(e,t){return D(t,{decode:decodeURIComponent})(e)}function F(e,t){try{const r=e.toLowerCase();if(r.startsWith("https://")||r.startsWith("http://")){const{origin:r,pathname:n}=new URL(e),i=`${r}${M(n,{encode:encodeURIComponent})(t)}`;return!e.endsWith("/")&&i.endsWith("/")?i.slice(0,-1):i}{const r=e.replace(/\?/g,"\\?");return M(r,{encode:encodeURIComponent})(t)}}catch(t){return console.error(`Could not compile destination ${e}, returning null instead. Error: ${t}`),null}}function H(e,t,r){let n;if(t){const[r,i]=e.split("?");n=`${r}?${t}${i?"&"+i:""}`}else n=e;const i=r.toString();return{status:i,statusDescription:o.STATUS_CODES[i],headers:{location:[{key:"Location",value:n}],refresh:308===r?[{key:"Refresh",value:"0;url="+n}]:[]}}}const $=["connection","expect","keep-alive","proxy-authenticate","proxy-authorization","proxy-connection","trailer","upgrade","x-accel-buffering","x-accel-charset","x-accel-limit-rate","x-accel-redirect","x-cache","x-forwarded-proto","x-real-ip","content-length","host","transfer-encoding","via","content-encoding"],V=["x-amz-cf-","x-amzn-","x-edge-"];function W(e){const t=e.toLowerCase();for(const e of V)if(t.startsWith(e))return!0;return $.includes(t)}var G=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},i=e.split(Y),o=n.decode||X,a=0;a<i.length;a++){var s=i[a],u=s.indexOf("=");if(!(u<0)){var c=s.substr(0,u).trim(),f=s.substr(++u,s.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),null==r[c]&&(r[c]=ee(f,o))}}return r},J=function(e,t,r){var n=r||{},i=n.encode||Z;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!Q.test(e))throw new TypeError("argument name is invalid");var o=i(t);if(o&&!Q.test(o))throw new TypeError("argument val is invalid");var a=e+"="+o;if(null!=n.maxAge){var s=n.maxAge-0;if(isNaN(s)||!isFinite(s))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(s)}if(n.domain){if(!Q.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!Q.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(a+="; HttpOnly");n.secure&&(a+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},X=decodeURIComponent,Z=encodeURIComponent,Y=/; */,Q=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function ee(e,t){try{return t(e)}catch(t){return e}}var te={parse:G,serialize:J};function re(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var ne=re((function(e,t){var r=C.default.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=C.default:(n(C.default,t),t.Buffer=i),i.prototype=Object.create(r.prototype),n(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return C.default.SlowBuffer(e)}})),ie=ne.Buffer;function oe(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=ie.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=ie.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}A.default.inherits(oe,S.default),oe.prototype.write=function(e){this.buffer=ie.concat([this.buffer,ie.from(e)]),this.emit("data",e)},oe.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};var ae=oe,se=C.default.Buffer,ue=C.default.SlowBuffer,ce=fe;function fe(e,t){if(!se.isBuffer(e)||!se.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}fe.install=function(){se.prototype.equal=ue.prototype.equal=function(e){return fe(this,e)}};var le=se.prototype.equal,de=ue.prototype.equal;function he(e){return(e/8|0)+(e%8==0?0:1)}fe.restore=function(){se.prototype.equal=le,ue.prototype.equal=de};var pe={ES256:he(256),ES384:he(384),ES512:he(521)};var ve=function(e){var t=pe[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')},ge=ne.Buffer;function me(e){if(ge.isBuffer(e))return e;if("string"==typeof e)return ge.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function ye(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}var be={derToJose:function(e,t){e=me(e);var r=ve(t),n=r+1,i=e.length,o=0;if(48!==e[o++])throw new Error('Could not find expected "seq"');var a=e[o++];if(129===a&&(a=e[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(2!==e[o++])throw new Error('Could not find expected "int" for "r"');var s=e[o++];if(i-o-2<s)throw new Error('"r" specified length of "'+s+'", only "'+(i-o-2)+'" available');if(n<s)throw new Error('"r" specified length of "'+s+'", max of "'+n+'" is acceptable');var u=o;if(o+=s,2!==e[o++])throw new Error('Could not find expected "int" for "s"');var c=e[o++];if(i-o!==c)throw new Error('"s" specified length of "'+c+'", expected "'+(i-o)+'"');if(n<c)throw new Error('"s" specified length of "'+c+'", max of "'+n+'" is acceptable');var f=o;if((o+=c)!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var l=r-s,d=r-c,h=ge.allocUnsafe(l+s+d+c);for(o=0;o<l;++o)h[o]=0;e.copy(h,o,u+Math.max(-l,0),u+s);for(var p=o=r;o<p+d;++o)h[o]=0;return e.copy(h,o,f+Math.max(-d,0),f+c),h=(h=h.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=me(e);var r=ve(t),n=e.length;if(n!==2*r)throw new TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+n+'"');var i=ye(e,0,r),o=ye(e,r,e.length),a=r-i,s=r-o,u=2+a+1+1+s,c=u<128,f=ge.allocUnsafe((c?2:3)+u),l=0;return f[l++]=48,c?f[l++]=u:(f[l++]=129,f[l++]=255&u),f[l++]=2,f[l++]=a,i<0?(f[l++]=0,l+=e.copy(f,l,0,r)):l+=e.copy(f,l,i,r),f[l++]=2,f[l++]=s,o<0?(f[l++]=0,e.copy(f,l,r)):e.copy(f,l,r+o),f}},we=ne.Buffer,Se="secret must be a string or buffer",Ee="key must be a string or a buffer",xe="function"==typeof T.default.createPublicKey;function Ce(e){if(!we.isBuffer(e)&&"string"!=typeof e){if(!xe)throw Oe(Ee);if("object"!=typeof e)throw Oe(Ee);if("string"!=typeof e.type)throw Oe(Ee);if("string"!=typeof e.asymmetricKeyType)throw Oe(Ee);if("function"!=typeof e.export)throw Oe(Ee)}}function Ae(e){if(!we.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw Oe("key must be a string, a buffer or an object")}function Te(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Le(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function Oe(e){var t=[].slice.call(arguments,1),r=A.default.format.bind(A.default,e).apply(null,t);return new TypeError(r)}function ke(e){var t;return t=e,we.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function Pe(e){return function(t,r){!function(e){if(!we.isBuffer(e)){if("string"==typeof e)return e;if(!xe)throw Oe(Se);if("object"!=typeof e)throw Oe(Se);if("secret"!==e.type)throw Oe(Se);if("function"!=typeof e.export)throw Oe(Se)}}(r),t=ke(t);var n=T.default.createHmac("sha"+e,r);return Te((n.update(t),n.digest("base64")))}}function je(e){return function(t,r,n){var i=Pe(e)(t,n);return ce(we.from(r),we.from(i))}}function Re(e){return function(t,r){Ae(r),t=ke(t);var n=T.default.createSign("RSA-SHA"+e);return Te((n.update(t),n.sign(r,"base64")))}}function Ne(e){return function(t,r,n){Ce(n),t=ke(t),r=Le(r);var i=T.default.createVerify("RSA-SHA"+e);return i.update(t),i.verify(n,r,"base64")}}function _e(e){return function(t,r){Ae(r),t=ke(t);var n=T.default.createSign("RSA-SHA"+e);return Te((n.update(t),n.sign({key:r,padding:T.default.constants.RSA_PKCS1_PSS_PADDING,saltLength:T.default.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function Ie(e){return function(t,r,n){Ce(n),t=ke(t),r=Le(r);var i=T.default.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:n,padding:T.default.constants.RSA_PKCS1_PSS_PADDING,saltLength:T.default.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function Me(e){var t=Re(e);return function(){var r=t.apply(null,arguments);return r=be.derToJose(r,"ES"+e)}}function De(e){var t=Ne(e);return function(r,n,i){return n=be.joseToDer(n,"ES"+e).toString("base64"),t(r,n,i)}}function ze(){return function(){return""}}function Ue(){return function(e,t){return""===t}}xe&&(Ee+=" or a KeyObject",Se+="or a KeyObject");var qe=function(e){var t={hs:Pe,rs:Re,ps:_e,es:Me,none:ze},r={hs:je,rs:Ne,ps:Ie,es:De,none:Ue},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw Oe('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(n[1]||n[3]).toLowerCase(),o=n[2];return{sign:t[i](o),verify:r[i](o)}},Be=C.default.Buffer,Ke=function(e){return"string"==typeof e?e:"number"==typeof e||Be.isBuffer(e)?e.toString():JSON.stringify(e)},Fe=ne.Buffer;function He(e,t){return Fe.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $e(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,i=e.encoding,o=qe(t.alg),a=function(e,t,r){r=r||"utf8";var n=He(Ke(e),"binary"),i=He(Ke(t),r);return A.default.format("%s.%s",n,i)}(t,r,i),s=o.sign(a,n);return A.default.format("%s.%s",a,s)}function Ve(e){var t=e.secret||e.privateKey||e.key,r=new ae(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new ae(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}A.default.inherits(Ve,S.default),Ve.prototype.sign=function(){try{var e=$e({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},Ve.sign=$e;var We=Ve,Ge=ne.Buffer,Je=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function Xe(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}function Ze(e){var t=e.split(".",1)[0];return Xe(Ge.from(t,"base64").toString("binary"))}function Ye(e){return e.split(".")[2]}function Qe(e){return Je.test(e)&&!!Ze(e)}function et(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=Ye(e=Ke(e)),o=function(e){return e.split(".",2).join(".")}(e);return qe(t).verify(o,i,r)}function tt(e,t){if(t=t||{},!Qe(e=Ke(e)))return null;var r=Ze(e);if(!r)return null;var n=function(e,t){t=t||"utf8";var r=e.split(".")[1];return Ge.from(r,"base64").toString(t)}(e);return("JWT"===r.typ||t.json)&&(n=JSON.parse(n,t.encoding)),{header:r,payload:n,signature:Ye(e)}}function rt(e){var t=(e=e||{}).secret||e.publicKey||e.key,r=new ae(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new ae(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}A.default.inherits(rt,S.default),rt.prototype.verify=function(){try{var e=et(this.signature.buffer,this.algorithm,this.key.buffer),t=tt(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},rt.decode=tt,rt.isValid=Qe,rt.verify=et;var nt=rt,it={ALGORITHMS:["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],sign:We.sign,verify:nt.verify,decode:nt.decode,isValid:nt.isValid,createSign:function(e){return new We(e)},createVerify:function(e){return new nt(e)}},ot=function(e,t){t=t||{};var r=it.decode(e,t);if(!r)return null;var n=r.payload;if("string"==typeof n)try{var i=JSON.parse(n);null!==i&&"object"==typeof i&&(n=i)}catch(e){}return!0===t.complete?{header:r.header,payload:n,signature:r.signature}:n},at=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(at.prototype=Object.create(Error.prototype)).constructor=at;var st=at,ut=function(e,t){st.call(this,e),this.name="NotBeforeError",this.date=t};(ut.prototype=Object.create(st.prototype)).constructor=ut;var ct=ut,ft=function(e,t){st.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(ft.prototype=Object.create(st.prototype)).constructor=ft;var lt=ft,dt=1e3,ht=60*dt,pt=60*ht,vt=24*pt,gt=7*vt,mt=365.25*vt,yt=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*mt;case"weeks":case"week":case"w":return r*gt;case"days":case"day":case"d":return r*vt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*pt;case"minutes":case"minute":case"mins":case"min":case"m":return r*ht;case"seconds":case"second":case"secs":case"sec":case"s":return r*dt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=vt)return bt(e,t,vt,"day");if(t>=pt)return bt(e,t,pt,"hour");if(t>=ht)return bt(e,t,ht,"minute");if(t>=dt)return bt(e,t,dt,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=vt)return Math.round(e/vt)+"d";if(t>=pt)return Math.round(e/pt)+"h";if(t>=ht)return Math.round(e/ht)+"m";if(t>=dt)return Math.round(e/dt)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function bt(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}var wt=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var n=yt(e);if(void 0===n)return;return Math.floor(r+n/1e3)}return"number"==typeof e?r+e:void 0},St=re((function(e,t){var r;t=e.exports=V,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.src=[],a=0,s=a++;o[s]="0|[1-9]\\d*";var u=a++;o[u]="[0-9]+";var c=a++;o[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=a++;o[f]="("+o[s]+")\\.("+o[s]+")\\.("+o[s]+")";var l=a++;o[l]="("+o[u]+")\\.("+o[u]+")\\.("+o[u]+")";var d=a++;o[d]="(?:"+o[s]+"|"+o[c]+")";var h=a++;o[h]="(?:"+o[u]+"|"+o[c]+")";var p=a++;o[p]="(?:-("+o[d]+"(?:\\."+o[d]+")*))";var v=a++;o[v]="(?:-?("+o[h]+"(?:\\."+o[h]+")*))";var g=a++;o[g]="[0-9A-Za-z-]+";var m=a++;o[m]="(?:\\+("+o[g]+"(?:\\."+o[g]+")*))";var y=a++,b="v?"+o[f]+o[p]+"?"+o[m]+"?";o[y]="^"+b+"$";var w="[v=\\s]*"+o[l]+o[v]+"?"+o[m]+"?",S=a++;o[S]="^"+w+"$";var E=a++;o[E]="((?:<|>)?=?)";var x=a++;o[x]=o[u]+"|x|X|\\*";var C=a++;o[C]=o[s]+"|x|X|\\*";var A=a++;o[A]="[v=\\s]*("+o[C]+")(?:\\.("+o[C]+")(?:\\.("+o[C]+")(?:"+o[p]+")?"+o[m]+"?)?)?";var T=a++;o[T]="[v=\\s]*("+o[x]+")(?:\\.("+o[x]+")(?:\\.("+o[x]+")(?:"+o[v]+")?"+o[m]+"?)?)?";var L=a++;o[L]="^"+o[E]+"\\s*"+o[A]+"$";var O=a++;o[O]="^"+o[E]+"\\s*"+o[T]+"$";var k=a++;o[k]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var P=a++;o[P]="(?:~>?)";var j=a++;o[j]="(\\s*)"+o[P]+"\\s+",i[j]=new RegExp(o[j],"g");var R=a++;o[R]="^"+o[P]+o[A]+"$";var N=a++;o[N]="^"+o[P]+o[T]+"$";var _=a++;o[_]="(?:\\^)";var I=a++;o[I]="(\\s*)"+o[_]+"\\s+",i[I]=new RegExp(o[I],"g");var M=a++;o[M]="^"+o[_]+o[A]+"$";var D=a++;o[D]="^"+o[_]+o[T]+"$";var z=a++;o[z]="^"+o[E]+"\\s*("+w+")$|^$";var U=a++;o[U]="^"+o[E]+"\\s*("+b+")$|^$";var q=a++;o[q]="(\\s*)"+o[E]+"\\s*("+w+"|"+o[A]+")",i[q]=new RegExp(o[q],"g");var B=a++;o[B]="^\\s*("+o[A]+")\\s+-\\s+("+o[A]+")\\s*$";var K=a++;o[K]="^\\s*("+o[T]+")\\s+-\\s+("+o[T]+")\\s*$";var F=a++;o[F]="(<|>)?=?\\s*\\*";for(var H=0;H<35;H++)r(H,o[H]),i[H]||(i[H]=new RegExp(o[H]));function $(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof V)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[S]:i[y]).test(e))return null;try{return new V(e,t)}catch(e){return null}}function V(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof V){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof V))return new V(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[S]:i[y]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=$,t.valid=function(e,t){var r=$(e,t);return r?r.version:null},t.clean=function(e,t){var r=$(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=V,V.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},V.prototype.toString=function(){return this.version},V.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof V||(e=new V(e,this.options)),this.compareMain(e)||this.comparePre(e)},V.prototype.compareMain=function(e){return e instanceof V||(e=new V(e,this.options)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},V.prototype.comparePre=function(e){if(e instanceof V||(e=new V(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return G(n,i)}while(++t)},V.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new V(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(Y(e,t))return null;var r=$(e),n=$(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==n[a])return i+a;return o},t.compareIdentifiers=G;var W=/^[0-9]+$/;function G(e,t){var r=W.test(e),n=W.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new V(e,r).compare(new V(t,r))}function X(e,t,r){return J(e,t,r)>0}function Z(e,t,r){return J(e,t,r)<0}function Y(e,t,r){return 0===J(e,t,r)}function Q(e,t,r){return 0!==J(e,t,r)}function ee(e,t,r){return J(e,t,r)>=0}function te(e,t,r){return J(e,t,r)<=0}function re(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Y(e,r,n);case"!=":return Q(e,r,n);case">":return X(e,r,n);case">=":return ee(e,r,n);case"<":return Z(e,r,n);case"<=":return te(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return G(t,e)},t.major=function(e,t){return new V(e,t).major},t.minor=function(e,t){return new V(e,t).minor},t.patch=function(e,t){return new V(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,r){return J(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=X,t.lt=Z,t.eq=Y,t.neq=Q,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var ie={};function oe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof oe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new oe(e.raw,t);if(e instanceof ne)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function se(e,t,r,n,i,o,a,s,u,c,f,l,d){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(i)?">="+r+"."+n+".0":">="+t)+" "+(s=ae(u)?"":ae(c)?"<"+(+u+1)+".0.0":ae(f)?"<"+u+"."+(+c+1)+".0":l?"<="+u+"."+c+"."+f+"-"+l:"<="+s)).trim()}function ue(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==ie&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ce(e,t,r){try{t=new oe(t,r)}catch(e){return!1}return t.test(e)}function fe(e,t,r,n){var i,o,a,s,u;switch(e=new V(e,n),t=new oe(t,n),r){case">":i=X,o=te,a=Z,s=">",u=">=";break;case"<":i=Z,o=ee,a=X,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ce(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var f=t.set[c],l=null,d=null;if(f.forEach((function(e){e.semver===ie&&(e=new ne(">=0.0.0")),l=l||e,d=d||e,i(e.semver,l.semver,n)?l=e:a(e.semver,d.semver,n)&&(d=e)})),l.operator===s||l.operator===u)return!1;if((!d.operator||d.operator===s)&&o(e,d.semver))return!1;if(d.operator===u&&a(e,d.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.options.loose?i[z]:i[U],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new V(r[2],this.options.loose):this.semver=ie},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new V(e,this.options)),re(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new oe(e.value,t),ce(this.value,r,t);if(""===e.operator)return r=new oe(this.value,t),ce(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&a||s||u},t.Range=oe,oe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[K]:i[B];e=e.replace(n,se),r("hyphen replace",e),e=e.replace(i[q],"$1$2$3"),r("comparator trim",e,i[q]),e=(e=(e=e.replace(i[j],"$1~")).replace(i[I],"$1^")).split(/\s+/).join(" ");var o=t?i[z]:i[U],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[D]:i[M];return e.replace(n,(function(t,n,i,o,a){var s;return r("caret",e,t,n,i,o,a),ae(n)?s="":ae(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?s="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[N]:i[R];return e.replace(n,(function(t,n,i,o,a){var s;return r("tilde",e,t,n,i,o,a),ae(n)?s="":ae(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?s=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+(+i+1)+".0"):s=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[O]:i[L];return e.replace(n,(function(t,n,i,o,a,s){r("xRange",e,t,n,i,o,a,s);var u=ae(i),c=u||ae(o),f=c||ae(a);return"="===n&&f&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&f?(c&&(o=0),a=0,">"===n?(n=">=",c?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===n&&(n="<",c?i=+i+1:o=+o+1),t=n+i+"."+o+"."+a):c?t=">="+i+".0.0 <"+(+i+1)+".0.0":f&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[F],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(o)}))),a=a.map((function(e){return new ne(e,this.options)}),this)},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new oe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new V(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=ce,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new oe(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new V(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new oe(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new V(n=e,r)))})),n},t.minVersion=function(e,t){e=new oe(e,t);var r=new V("0.0.0");if(e.test(r))return r;if(r=new V("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new V(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!X(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return fe(e,t,"<",r)},t.gtr=function(e,t,r){return fe(e,t,">",r)},t.outside=fe,t.prerelease=function(e,t){var r=$(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new oe(e,r),t=new oe(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof V)return e;if("string"!=typeof e)return null;var t=e.match(i[k]);if(null==t)return null;return $(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})).satisfies(process.version,"^6.12.0 || >=8.0.0"),Et=["RS256","RS384","RS512","ES256","ES384","ES512"],xt=["RS256","RS384","RS512"],Ct=["HS256","HS384","HS512"];St&&(Et.splice(3,0,"PS256","PS384","PS512"),xt.splice(3,0,"PS256","PS384","PS512"));var At=17976931348623157e292,Tt="[object GeneratorFunction]",Lt=/^\s+|\s+$/g,Ot=/^[-+]0x[0-9a-f]+$/i,kt=/^0b[01]+$/i,Pt=/^0o[0-7]+$/i,jt=/^(?:0|[1-9]\d*)$/,Rt=parseInt;function Nt(e){return e!=e}function _t(e,t){return function(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(t,(function(t){return e[t]}))}var It,Mt,Dt=Object.prototype,zt=Dt.hasOwnProperty,Ut=Dt.toString,qt=Dt.propertyIsEnumerable,Bt=(It=Object.keys,Mt=Object,function(e){return It(Mt(e))}),Kt=Math.max;function Ft(e,t){var r=Vt(e)||function(e){return function(e){return Jt(e)&&Wt(e)}(e)&&zt.call(e,"callee")&&(!qt.call(e,"callee")||"[object Arguments]"==Ut.call(e))}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!zt.call(e,o)||i&&("length"==o||$t(o,n))||r.push(o);return r}function Ht(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||Dt,t!==n)return Bt(e);var t,r,n,i=[];for(var o in Object(e))zt.call(e,o)&&"constructor"!=o&&i.push(o);return i}function $t(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||jt.test(e))&&e>-1&&e%1==0&&e<t}var Vt=Array.isArray;function Wt(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=Gt(e)?Ut.call(e):"";return"[object Function]"==t||t==Tt}(e)}function Gt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Jt(e){return!!e&&"object"==typeof e}var Xt=function(e,t,r,n){var i;e=Wt(e)?e:(i=e)?_t(i,function(e){return Wt(e)?Ft(e):Ht(e)}(i)):[],r=r&&!n?function(e){var t=function(e){if(!e)return 0===e?e:0;if(Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||Jt(e)&&"[object Symbol]"==Ut.call(e)}(e))return NaN;if(Gt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Gt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Lt,"");var r=kt.test(e);return r||Pt.test(e)?Rt(e.slice(2),r?2:8):Ot.test(e)?NaN:+e}(e))||-Infinity===e){return(e<0?-1:1)*At}return e==e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}(r):0;var o=e.length;return r<0&&(r=Kt(o+r,0)),function(e){return"string"==typeof e||!Vt(e)&&Jt(e)&&"[object String]"==Ut.call(e)}(e)?r<=o&&e.indexOf(t,r)>-1:!!o&&function(e,t,r){if(t!=t)return function(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,Nt,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r)>-1},Zt=Object.prototype.toString;var Yt=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==Zt.call(e)},Qt=17976931348623157e292,er=/^\s+|\s+$/g,tr=/^[-+]0x[0-9a-f]+$/i,rr=/^0b[01]+$/i,nr=/^0o[0-7]+$/i,ir=parseInt,or=Object.prototype.toString;function ar(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var sr=function(e){return"number"==typeof e&&e==function(e){var t=function(e){if(!e)return 0===e?e:0;if(Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==or.call(e)}(e))return NaN;if(ar(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ar(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(er,"");var r=rr.test(e);return r||nr.test(e)?ir(e.slice(2),r?2:8):tr.test(e)?NaN:+e}(e))||-Infinity===e){return(e<0?-1:1)*Qt}return e==e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}(e)};Object.prototype.toString;var ur=Function.prototype,cr=Object.prototype,fr=ur.toString,lr=cr.hasOwnProperty,dr=fr.call(Object),hr=cr.toString,pr=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object);var vr=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=hr.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=pr(e);if(null===t)return!0;var r=lr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&fr.call(r)==dr},gr=Object.prototype.toString,mr=Array.isArray;var yr=function(e){return"string"==typeof e||!mr(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==gr.call(e)};parseInt,Object.prototype.toString;var br=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];St&&br.splice(3,0,"PS256","PS384","PS512");Xt.bind(null,br);var wr=function(e,t,r,n){var i;if("function"!=typeof r||n||(n=r,r={}),r||(r={}),r=Object.assign({},r),i=n||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return i(new st("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return i(new st("nonce must be a non-empty string"));var o=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return i(new st("jwt must be provided"));if("string"!=typeof e)return i(new st("jwt must be a string"));var a,s=e.split(".");if(3!==s.length)return i(new st("jwt malformed"));try{a=ot(e,{complete:!0})}catch(e){return i(e)}if(!a)return i(new st("invalid token"));var u,c=a.header;if("function"==typeof t){if(!n)return i(new st("verify must be called asynchronous if secret or public key is provided as a callback"));u=t}else u=function(e,r){return r(null,t)};return u(c,(function(t,n){if(t)return i(new st("error in secret or public key callback: "+t.message));var u,f=""!==s[2].trim();if(!f&&n)return i(new st("jwt signature is required"));if(f&&!n)return i(new st("secret or public key must be provided"));if(f||r.algorithms||(r.algorithms=["none"]),r.algorithms||(r.algorithms=~n.toString().indexOf("BEGIN CERTIFICATE")||~n.toString().indexOf("BEGIN PUBLIC KEY")?Et:~n.toString().indexOf("BEGIN RSA PUBLIC KEY")?xt:Ct),!~r.algorithms.indexOf(a.header.alg))return i(new st("invalid algorithm"));try{u=it.verify(e,a.header.alg,n)}catch(e){return i(e)}if(!u)return i(new st("invalid signature"));var l=a.payload;if(void 0!==l.nbf&&!r.ignoreNotBefore){if("number"!=typeof l.nbf)return i(new st("invalid nbf value"));if(l.nbf>o+(r.clockTolerance||0))return i(new ct("jwt not active",new Date(1e3*l.nbf)))}if(void 0!==l.exp&&!r.ignoreExpiration){if("number"!=typeof l.exp)return i(new st("invalid exp value"));if(o>=l.exp+(r.clockTolerance||0))return i(new lt("jwt expired",new Date(1e3*l.exp)))}if(r.audience){var d=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(l.aud)?l.aud:[l.aud]).some((function(e){return d.some((function(t){return t instanceof RegExp?t.test(e):t===e}))})))return i(new st("jwt audience invalid. expected: "+d.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&l.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(l.iss)))return i(new st("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&l.sub!==r.subject)return i(new st("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&l.jti!==r.jwtid)return i(new st("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&l.nonce!==r.nonce)return i(new st("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof l.iat)return i(new st("iat required when maxAge is specified"));var h=wt(r.maxAge,l.iat);if(void 0===h)return i(new st('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=h+(r.clockTolerance||0))return i(new lt("maxAge exceeded",new Date(1e3*h)))}if(!0===r.complete){var p=a.signature;return i(null,{header:c,payload:l,signature:p})}return i(null,l)}))};const Sr={__prerender_bypass:"",__next_preview_data:""},Er=e=>(e||[]).reduce(((e,t)=>{const r=te.parse(t.value);return xr(r)?r:e}),Sr),xr=e=>!(!e.__next_preview_data||!e.__prerender_bypass);const Cr=async()=>{const{defaultRetryDecider:e,StandardRetryStrategy:t}=await Promise.resolve().then((function(){return di}));return new t((async()=>3),{retryDecider:t=>"code"in t&&("ECONNRESET"===t.code||"EPIPE"===t.code||"ETIMEDOUT"===t.code)||e(t)})},Ar=w.default.basePath,Tr=e=>e?{now:()=>a.performance.now(),log:(e,t,r)=>{t&&r&&console.log(`${e}: ${r-t} (ms)`)}}:{now:()=>0,log:()=>{}},Lr=(e,t)=>{e.headers.host=[{key:"host",value:t}]},Or=e=>e.startsWith("/_next/data"),kr=e=>{if(Ar){if(!e.startsWith(Ar))return"/404";e=e.slice(Ar.length)}return e.endsWith("/")&&(e=e.slice(0,-1)),""===e?"/":e},Pr=(e,t)=>{let r=e.replace("/_next/data/"+t.buildId,"").replace(".json","");return r=["/index",""].includes(r)?"/":r,r},jr=e=>{const{pages:{ssr:t,html:r}}=e,n={...t.dynamic,...r.dynamic};return i=>{let o=i;if(Or(i)&&(o=Pr(o,e)),t.nonDynamic[o])return t.nonDynamic[o];if(r.nonDynamic[o])return r.nonDynamic[o];for(const e in n){const{file:t,regex:r}=n[e];if(new RegExp(r,"i").test(o))return t}return void 0!==r.nonDynamic["/404"]?"pages/404.html":"pages/_error.js"}},Rr=async({event:e,manifest:t,prerenderManifest:r,routesManifest:n})=>{var i;const o=e.Records[0].cf.request,a=o.headers.authorization,s=function(e,t){if(t&&t.username&&t.password&&e!=="Basic "+Buffer.from(t.username+":"+t.password).toString("base64"))return{status:"401",statusDescription:"Unauthorized",body:"Unauthorized",headers:{"www-authenticate":[{key:"WWW-Authenticate",value:"Basic"}]}};return null}(a?a[0].value:null,t.authentication);if(s)return s;const u=function(e,t){const r=e.headers.host;if(r&&r.length>0){const n=r[0].value,i=t.domainRedirects;if(i&&i[n])return`${i[n]}${e.uri}`}return null}(o,t);if(u)return H(u,o.querystring,308);const c=n.basePath;let f=kr(o.uri);const l=decodeURI(f),{pages:d,publicFiles:h}=t;let p=h[l],v=Or(f),g=o.uri;if(v||p)g.endsWith("/")&&(g=g.slice(0,-1));else if("/"!==o.uri&&""!==o.uri&&"/404"!==f){const e=t.trailingSlash;!e&&g.endsWith("/")&&(g=g.slice(0,-1)),e&&!g.endsWith("/")&&(g+="/")}if(g!==o.uri)return H(g,o.querystring,308);const m=function(e,t){const r=t.redirects;for(const t of r){const r=K(e,t.source);if(r){const e=F(t.destination,r.params);return e?{redirectPath:e,statusCode:t.statusCode}:null}}return null}(o.uri,n);if(m)return H(m.redirectPath,o.querystring,m.statusCode);let y;if(!(d.html.nonDynamic[f]||d.ssr.nonDynamic[f]||p)&&!v){const r=function(e,t,r,n){const i=t.rewrites;for(const t of i){const i=K(e,t.source);if(i){const o=F(t.destination,i.params);if(e===o){const e=r(n);if("pages/404.html"===e||"pages/_error.js"===e)continue}return o}}return null}(o.uri,n,jr(t),f);if(r){y=o.uri;const[n,a]=r.split("?");if(o.uri=n,o.querystring?o.querystring=`${o.querystring}${a?"&"+a:""}`:o.querystring=""+(null!=a?a:""),function(e){return e.startsWith("http://")||e.startsWith("https://")}(n)){const{req:r,res:a,responsePromise:s}=_(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression});return await async function(e,t,r,n){const{default:i}=await Promise.resolve().then((function(){return Cn}));let o,a={};if(Object.assign(a,t.headers),a.hasOwnProperty("host")&&delete a.host,n){const r=Buffer.from(n,"base64").toString("utf8");o=await i(e,{headers:a,method:t.method,body:r})}else o=await i(e,{headers:a,method:t.method});for(const[e,t]of o.headers.entries())W(e)||r.setHeader(e,t);r.statusCode=o.status;const s=await o.text();r.end(s)}(n+(o.querystring?"?":"")+o.querystring,r,a,null===(i=o.body)||void 0===i?void 0:i.data),await s}f=kr(o.uri)}}const b=d.html.nonDynamic[f],w=r.routes[f],S=o.origin.s3,E=b||w,x=(e=>{if("us-east-1"===e.region)return e.domainName;if(!e.domainName.includes(e.region))return e.domainName.replace("s3.amazonaws.com",`s3.${e.region}.amazonaws.com`);return e.domainName})(S),C=Ir(f,r,t),{now:A,log:T}=Tr(t.logLambdaExecutionTimes),L=((e,t)=>{const r=Er(e);if(xr(r))try{return wr(r.__next_preview_data,t),!0}catch(e){console.warn("Found preview headers without valid authentication token")}return!1})(o.headers.cookie,r.preview.previewModeSigningKey);S.domainName=x;e:if(p||b||E&&!L||C&&!L||v&&!L){if(p)S.path=c+"/public",c&&(o.uri=o.uri.replace(c,""));else if(E||C){S.path=`${c}/static-pages/${t.buildId}`;const e="/"===f?"/index":f;o.uri=e+".html"}else if(v){const e=Pr(f,t),n=jr(t)(e);if("pages/404.html"===n)S.path=`${c}/static-pages/${t.buildId}`,o.uri=n.replace("pages","");else if("pages/_error.js"===n||!r.routes[e]&&!Ir(e,r,t))break e}return Lr(o,x),o}const O=jr(t)(f);if(O.endsWith(".html")&&!L)return S.path=`${c}/static-pages/${t.buildId}`,o.uri=O.replace("pages",""),Lr(o,x),o;const k=A();let P=require("./"+O);T("require JS execution time",k,A());const j=A(),{req:R,res:N,responsePromise:I}=_(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression,rewrittenUri:y});try{if("pages/_error.js"===O&&(N.statusCode=404),v){const{renderOpts:e}=await P.renderReqToHTML(R,N,"passthrough");N.setHeader("Content-Type","application/json"),N.end(JSON.stringify(e.pageData))}else await Promise.race([P.render(R,N),I])}catch(e){console.error(`Error rendering page: ${O}. Error:\n${e}\nRendering Next.js error page.`),N.statusCode=500,P=require("./pages/_error.js"),await P.render(R,N)}const M=await I;return T("SSR execution time",j,A()),Mr(M,N),M},Nr=async({event:e,manifest:t,prerenderManifest:r})=>{var n,i;const o=e.Records[0].cf.response,a=e.Records[0].cf.request,{status:s}=o;if("403"!==s)return"/404.html"===a.uri&&(o.status="404",o.statusDescription="Not Found"),o;if("PUT"===a.method||"DELETE"===a.method)return o;const u=kr(a.uri),{domainName:c,region:f}=a.origin.s3,l=c.replace(`.s3.${f}.amazonaws.com`,""),{S3Client:d}=await Promise.resolve().then((function(){return Ql})),h=new d({region:null===(i=null===(n=a.origin)||void 0===n?void 0:n.s3)||void 0===i?void 0:i.region,maxAttempts:3,retryStrategy:await Cr()});let p;if(Or(u)&&!(p=jr(t)(u)).endsWith(".html")){const r=require("./"+p),{req:n,res:i,responsePromise:s}=_(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression}),c=!!r.getStaticProps,{renderOpts:f,html:d}=await r.renderReqToHTML(n,i,"passthrough");if(c){const e={Bucket:l,Key:`${Ar}${""===Ar?"":"/"}${u.replace(/^\//,"")}`,Body:JSON.stringify(f.pageData),ContentType:"application/json",CacheControl:"public, max-age=0, s-maxage=2678400, must-revalidate"},r={Bucket:l,Key:`${Ar}${""===Ar?"":"/"}static-pages/${t.buildId}/${a.uri.replace(`/_next/data/${t.buildId}/`,"").replace(".json",".html")}`,Body:d,ContentType:"text/html",CacheControl:"public, max-age=0, s-maxage=2678400, must-revalidate"},{PutObjectCommand:n}=await Promise.resolve().then((function(){return gh}));await Promise.all([h.send(new n(e)),h.send(new n(r))])}return i.writeHead(200,o.headers),i.setHeader("Content-Type","application/json"),i.end(JSON.stringify(f.pageData)),await s}{const e=Ir(u,r,t);if(!e)return o;const n=`${Ar}${""===Ar?"":"/"}static-pages/${t.buildId}${e.fallback||"/404.html"}`,{GetObjectCommand:i}=await Promise.resolve().then((function(){return mh})),a=await Promise.resolve().then((function(){return Oh}));let s;const c={Bucket:l,Key:n},{Body:f,CacheControl:d}=await h.send(new i(c));return s=await a.default(f),{status:e.fallback?"200":"404",statusDescription:e.fallback?"OK":"Not Found",headers:{...o.headers,"content-type":[{key:"Content-Type",value:"text/html"}],"cache-control":[{key:"Cache-Control",value:null!=d?d:e.fallback?"public, max-age=0, s-maxage=0, must-revalidate":"public, max-age=0, s-maxage=2678400, must-revalidate"}]},body:s}}},_r=e=>"origin-response"===e.Records[0].cf.config.eventType,Ir=(e,t,r)=>{const{pages:{ssr:n,html:i}}=r;if(n.nonDynamic[e]||i.nonDynamic[e])return!1;let o=void 0;return!Object.values({...n.dynamic,...i.dynamic}).find((r=>{if(o)return!1;if(new RegExp(r.regex).test(e)){return!Object.keys(t.dynamicRoutes).find((e=>{const n=r.file===`pages${e}.js`;return n&&(o=t.dynamicRoutes[e]),n}))}return!1}))&&(o||Object.values(t.dynamicRoutes).find((t=>new RegExp(t.routeRegex).test(e))))},Mr=(e,t)=>{404==t.statusCode?(e.status="404",e.statusDescription="Not Found"):500==t.statusCode&&(e.status="500",e.statusDescription="Internal Server Error")},Dr=S.default.Readable,zr=Symbol("buffer"),Ur=Symbol("type");class qr{constructor(){this[Ur]="";const e=arguments[0],t=arguments[1],r=[];let n=0;if(e){const t=e,i=Number(t.length);for(let e=0;e<i;e++){const i=t[e];let o;o=i instanceof Buffer?i:ArrayBuffer.isView(i)?Buffer.from(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?Buffer.from(i):i instanceof qr?i[zr]:Buffer.from("string"==typeof i?i:String(i)),n+=o.length,r.push(o)}}this[zr]=Buffer.concat(r);let i=t&&void 0!==t.type&&String(t.type).toLowerCase();i&&!/[^\u0020-\u007E]/.test(i)&&(this[Ur]=i)}get size(){return this[zr].length}get type(){return this[Ur]}text(){return Promise.resolve(this[zr].toString())}arrayBuffer(){const e=this[zr],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new Dr;return e._read=function(){},e.push(this[zr]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let n,i;n=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),i=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const o=Math.max(i-n,0),a=this[zr].slice(n,n+o),s=new qr([],{type:arguments[2]});return s[zr]=a,s}}function Br(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let Kr;Object.defineProperties(qr.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(qr.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),Br.prototype=Object.create(Error.prototype),Br.prototype.constructor=Br,Br.prototype.name="FetchError";try{Kr=require("encoding").convert}catch(e){}const Fr=Symbol("Body internals"),Hr=S.default.PassThrough;function $r(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size;let i=void 0===n?0:n;var o=r.timeout;let a=void 0===o?0:o;null==e?e=null:Wr(e)?e=Buffer.from(e.toString()):Gr(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof S.default||(e=Buffer.from(String(e)))),this[Fr]={body:e,disturbed:!1,error:null},this.size=i,this.timeout=a,e instanceof S.default&&e.on("error",(function(e){const r="AbortError"===e.name?e:new Br(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[Fr].error=r}))}function Vr(){var e=this;if(this[Fr].disturbed)return $r.Promise.reject(new TypeError("body used already for: "+this.url));if(this[Fr].disturbed=!0,this[Fr].error)return $r.Promise.reject(this[Fr].error);let t=this.body;if(null===t)return $r.Promise.resolve(Buffer.alloc(0));if(Gr(t)&&(t=t.stream()),Buffer.isBuffer(t))return $r.Promise.resolve(t);if(!(t instanceof S.default))return $r.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new $r.Promise((function(o,a){let s;e.timeout&&(s=setTimeout((function(){i=!0,a(new Br(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(i=!0,a(t)):a(new Br(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!i&&null!==t){if(e.size&&n+t.length>e.size)return i=!0,void a(new Br(`content size at ${e.url} over limit: ${e.size}`,"max-size"));n+=t.length,r.push(t)}})),t.on("end",(function(){if(!i){clearTimeout(s);try{o(Buffer.concat(r,n))}catch(t){a(new Br(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function Wr(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function Gr(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function Jr(e){let t,r,n=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof S.default&&"function"!=typeof n.getBoundary&&(t=new Hr,r=new Hr,n.pipe(t),n.pipe(r),e[Fr].body=t,n=r),n}function Xr(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":Wr(e)?"application/x-www-form-urlencoded;charset=UTF-8":Gr(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?"multipart/form-data;boundary="+e.getBoundary():e instanceof S.default?null:"text/plain;charset=UTF-8"}function Zr(e){const t=e.body;return null===t?0:Gr(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}$r.prototype={get body(){return this[Fr].body},get bodyUsed(){return this[Fr].disturbed},arrayBuffer(){return Vr.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return Vr.call(this).then((function(t){return Object.assign(new qr([],{type:e.toLowerCase()}),{[zr]:t})}))},json(){var e=this;return Vr.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return $r.Promise.reject(new Br(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return Vr.call(this).then((function(e){return e.toString()}))},buffer(){return Vr.call(this)},textConverted(){var e=this;return Vr.call(this).then((function(t){return function(e,t){if("function"!=typeof Kr)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let n,i,o="utf-8";r&&(n=/charset=([^;]*)/i.exec(r));i=e.slice(0,1024).toString(),!n&&i&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(i));!n&&i&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i),n||(n=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(i),n&&n.pop()),n&&(n=/charset=(.*)/i.exec(n.pop())));!n&&i&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i));n&&(o=n.pop(),"gb2312"!==o&&"gbk"!==o||(o="gb18030"));return Kr(e,"UTF-8",o).toString()}(t,e.headers)}))}},Object.defineProperties($r.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),$r.mixIn=function(e){for(const t of Object.getOwnPropertyNames($r.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor($r.prototype,t);Object.defineProperty(e,t,r)}},$r.Promise=global.Promise;const Yr=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,Qr=/[^\t\x20-\x7e\x80-\xff]/;function en(e){if(e=""+e,Yr.test(e)||""===e)throw new TypeError(e+" is not a legal HTTP header name")}function tn(e){if(e=""+e,Qr.test(e))throw new TypeError(e+" is not a legal HTTP header value")}function rn(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const nn=Symbol("map");class on{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[nn]=Object.create(null),e instanceof on){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){en(e=""+e);const t=rn(this[nn],e);return void 0===t?null:this[nn][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=an(this),n=0;for(;n<r.length;){var i=r[n];const o=i[0],a=i[1];e.call(t,a,o,this),r=an(this),n++}}set(e,t){t=""+t,en(e=""+e),tn(t);const r=rn(this[nn],e);this[nn][void 0!==r?r:e]=[t]}append(e,t){t=""+t,en(e=""+e),tn(t);const r=rn(this[nn],e);void 0!==r?this[nn][r].push(t):this[nn][e]=[t]}has(e){return en(e=""+e),void 0!==rn(this[nn],e)}delete(e){en(e=""+e);const t=rn(this[nn],e);void 0!==t&&delete this[nn][t]}raw(){return this[nn]}keys(){return un(this,"key")}values(){return un(this,"value")}[Symbol.iterator](){return un(this,"key+value")}}function an(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const r=Object.keys(e[nn]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[nn][t].join(", ")}:function(t){return[t.toLowerCase(),e[nn][t].join(", ")]})}on.prototype.entries=on.prototype[Symbol.iterator],Object.defineProperty(on.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(on.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const sn=Symbol("internal");function un(e,t){const r=Object.create(cn);return r[sn]={target:e,kind:t,index:0},r}const cn=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==cn)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[sn];const t=e.target,r=e.kind,n=e.index,i=an(t,r);return n>=i.length?{value:void 0,done:!0}:(this[sn].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function fn(e){const t=Object.assign({__proto__:null},e[nn]),r=rn(e[nn],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(cn,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const ln=Symbol("Response internals"),dn=x.default.STATUS_CODES;class hn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$r.call(this,e,t);const r=t.status||200,n=new on(t.headers);if(null!=e&&!n.has("Content-Type")){const t=Xr(e);t&&n.append("Content-Type",t)}this[ln]={url:t.url,status:r,statusText:t.statusText||dn[r],headers:n,counter:t.counter}}get url(){return this[ln].url||""}get status(){return this[ln].status}get ok(){return this[ln].status>=200&&this[ln].status<300}get redirected(){return this[ln].counter>0}get statusText(){return this[ln].statusText}get headers(){return this[ln].headers}clone(){return new hn(Jr(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}$r.mixIn(hn.prototype),Object.defineProperties(hn.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(hn.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const pn=Symbol("Request internals"),vn=L.default.parse,gn=L.default.format,mn="destroy"in S.default.Readable.prototype;function yn(e){return"object"==typeof e&&"object"==typeof e[pn]}class bn{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yn(e)?t=vn(e.url):(t=e&&e.href?vn(e.href):vn(""+e),e={});let n=r.method||e.method||"GET";if(n=n.toUpperCase(),(null!=r.body||yn(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");let i=null!=r.body?r.body:yn(e)&&null!==e.body?Jr(e):null;$r.call(this,i,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const o=new on(r.headers||e.headers||{});if(null!=i&&!o.has("Content-Type")){const e=Xr(i);e&&o.append("Content-Type",e)}let a=yn(e)?e.signal:null;if("signal"in r&&(a=r.signal),null!=a&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(a))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[pn]={method:n,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:t,signal:a},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[pn].method}get url(){return gn(this[pn].parsedURL)}get headers(){return this[pn].headers}get redirect(){return this[pn].redirect}get signal(){return this[pn].signal}clone(){return new bn(this)}}function wn(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}$r.mixIn(bn.prototype),Object.defineProperty(bn.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(bn.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),wn.prototype=Object.create(Error.prototype),wn.prototype.constructor=wn,wn.prototype.name="AbortError";const Sn=S.default.PassThrough,En=L.default.resolve;function xn(e,t){if(!xn.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return $r.Promise=xn.Promise,new xn.Promise((function(r,n){const i=new bn(e,t),o=function(e){const t=e[pn].parsedURL,r=new on(e[pn].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof S.default.Readable&&!mn)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(n="0"),null!=e.body){const t=Zr(e);"number"==typeof t&&(n=String(t))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=e.agent;return"function"==typeof i&&(i=i(t)),r.has("Connection")||i||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:fn(r),agent:i})}(i),a=("https:"===o.protocol?O.default:x.default).request,s=i.signal;let u=null;const c=function(){let e=new wn("The user aborted a request.");n(e),i.body&&i.body instanceof S.default.Readable&&i.body.destroy(e),u&&u.body&&u.body.emit("error",e)};if(s&&s.aborted)return void c();const f=function(){c(),h()},l=a(o);let d;function h(){l.abort(),s&&s.removeEventListener("abort",f),clearTimeout(d)}s&&s.addEventListener("abort",f),i.timeout&&l.once("socket",(function(e){d=setTimeout((function(){n(new Br("network timeout at: "+i.url,"request-timeout")),h()}),i.timeout)})),l.on("error",(function(e){n(new Br(`request to ${i.url} failed, reason: ${e.message}`,"system",e)),h()})),l.on("response",(function(e){clearTimeout(d);const t=function(e){const t=new on;for(const r of Object.keys(e))if(!Yr.test(r))if(Array.isArray(e[r]))for(const n of e[r])Qr.test(n)||(void 0===t[nn][r]?t[nn][r]=[n]:t[nn][r].push(n));else Qr.test(e[r])||(t[nn][r]=[e[r]]);return t}(e.headers);if(xn.isRedirect(e.statusCode)){const o=t.get("Location"),a=null===o?null:En(i.url,o);switch(i.redirect){case"error":return n(new Br("uri requested responds with a redirect, redirect mode is set to error: "+i.url,"no-redirect")),void h();case"manual":if(null!==a)try{t.set("Location",a)}catch(e){n(e)}break;case"follow":if(null===a)break;if(i.counter>=i.follow)return n(new Br("maximum redirect reached at: "+i.url,"max-redirect")),void h();const o={headers:new on(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};return 303!==e.statusCode&&i.body&&null===Zr(i)?(n(new Br("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void h()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==i.method)||(o.method="GET",o.body=void 0,o.headers.delete("content-length")),r(xn(new bn(a,o))),void h())}}e.once("end",(function(){s&&s.removeEventListener("abort",f)}));let o=e.pipe(new Sn);const a={url:i.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:i.size,timeout:i.timeout,counter:i.counter},c=t.get("Content-Encoding");if(!i.compress||"HEAD"===i.method||null===c||204===e.statusCode||304===e.statusCode)return u=new hn(o,a),void r(u);const l={flush:E.default.Z_SYNC_FLUSH,finishFlush:E.default.Z_SYNC_FLUSH};if("gzip"==c||"x-gzip"==c)return o=o.pipe(E.default.createGunzip(l)),u=new hn(o,a),void r(u);if("deflate"!=c&&"x-deflate"!=c){if("br"==c&&"function"==typeof E.default.createBrotliDecompress)return o=o.pipe(E.default.createBrotliDecompress()),u=new hn(o,a),void r(u);u=new hn(o,a),r(u)}else{e.pipe(new Sn).once("data",(function(e){o=8==(15&e[0])?o.pipe(E.default.createInflate()):o.pipe(E.default.createInflateRaw()),u=new hn(o,a),r(u)}))}})),function(e,t){const r=t.body;null===r?e.end():Gr(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(l,i)}))}xn.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},xn.Promise=global.Promise;var Cn=Object.freeze({__proto__:null,default:xn,Headers:on,Request:bn,Response:hn,FetchError:Br}),An=function(e,t){return(An=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function Tn(e,t){function r(){this.constructor=e}An(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Ln=function(){return(Ln=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function On(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function kn(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function Pn(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function jn(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rn(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function Nn(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Rn(arguments[t]));return e}function _n(e){return this instanceof _n?(this.v=e,this):new _n(e)}function In(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=i[e](t)).value instanceof _n?Promise.resolve(r.value.v).then(u,c):f(o[0][2],r)}catch(e){f(o[0][3],e)}var r}function u(e){s("next",e)}function c(e){s("throw",e)}function f(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function Mn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=jn(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}}var Dn=function(e){return function(t){return function(r){return kn(void 0,void 0,void 0,(function(){return Pn(this,(function(n){return[2,e.retryStrategy.retry(t,r)]}))}))}}},zn={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},Un=function(e){return{applyToStack:function(t){t.add(Dn(e),zn)}}},qn=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),Bn=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,r=new e(Ln(Ln({},this),{headers:Ln({},this.headers)}));return r.query&&(r.query=(t=r.query,Object.keys(t).reduce((function(e,r){var n,i=t[r];return Ln(Ln({},e),((n={})[r]=Array.isArray(i)?Nn(i):i,n))}),{}))),r},e}();for(var Kn=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Fn=["Throttling","ThrottlingException","ThrottledException","RequestThrottledException","TooManyRequestsException","ProvisionedThroughputExceededException","TransactionInProgressException","RequestLimitExceeded","BandwidthLimitExceeded","LimitExceededException","RequestThrottled","SlowDown","PriorRequestNotComplete","EC2ThrottledException"],Hn=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],$n=[500,502,503,504],Vn=function(e){var t;return Fn.includes(e.name)||1==(null===(t=e.$retryable)||void 0===t?void 0:t.throttling)},Wn=function(){return T.default.randomBytes(16)},Gn=[],Jn=0;Jn<256;++Jn)Gn[Jn]=(Jn+256).toString(16).substr(1);var Xn,Zn,Yn=function(e,t){var r=t||0,n=Gn;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")},Qn=0,ei=0;var ti=function(e,t,r){var n=t&&r||0,i=t||[],o=(e=e||{}).node||Xn,a=void 0!==e.clockseq?e.clockseq:Zn;if(null==o||null==a){var s=Wn();null==o&&(o=Xn=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=Zn=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:ei+1,f=u-Qn+(c-ei)/1e4;if(f<0&&void 0===e.clockseq&&(a=a+1&16383),(f<0||u>Qn)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Qn=u,ei=c,Zn=a;var l=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=255&l;var d=u/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var h=0;h<6;++h)i[n+h]=o[h];return t||Yn(i)};var ri=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||Wn)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||Yn(i)},ni=ri;ni.v1=ti,ni.v4=ri;var ii=ni,oi=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},ai=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return Kn.includes(e.name)}(e)||Vn(e)||function(e){var t;return Hn.includes(e.name)||$n.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},si=function(){function e(e,t){var r,n,i,o,a,s,u,c;this.maxAttemptsProvider=e,this.retryDecider=null!==(r=null==t?void 0:t.retryDecider)&&void 0!==r?r:ai,this.delayDecider=null!==(n=null==t?void 0:t.delayDecider)&&void 0!==n?n:oi,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:(a=o=500,s=o,u=function(e){return"TimeoutError"===e.name?10:5},c=function(e){return u(e)<=s},Object.freeze({hasRetryTokens:c,retrieveRetryTokens:function(e){if(!c(e))throw new Error("No retry token available");var t=u(e);return s-=t,t},releaseRetryTokens:function(e){s+=null!=e?e:1,s=Math.min(s,a)}}))}return e.prototype.shouldRetry=function(e,t,r){return t<r&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return kn(this,void 0,void 0,(function(){var e;return Pn(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t){return kn(this,void 0,void 0,(function(){var r,n,i,o,a,s,u,c;return Pn(this,(function(f){switch(f.label){case 0:return n=0,i=0,[4,this.getMaxAttempts()];case 1:o=f.sent(),a=t.request,Bn.isInstance(a)&&(a.headers["amz-sdk-invocation-id"]=ii.v4()),s=function(){var s,c,f,l,d;return Pn(this,(function(h){switch(h.label){case 0:return h.trys.push([0,2,,5]),Bn.isInstance(a)&&(a.headers["amz-sdk-request"]="attempt="+(n+1)+"; max="+o),[4,e(t)];case 1:return s=h.sent(),c=s.response,f=s.output,u.retryQuota.releaseRetryTokens(r),f.$metadata.attempts=n+1,f.$metadata.totalRetryDelay=i,[2,{value:{response:c,output:f}}];case 2:return l=h.sent(),n++,u.shouldRetry(l,n,o)?(r=u.retryQuota.retrieveRetryTokens(l),d=u.delayDecider(Vn(l)?500:100,n),i+=d,[4,new Promise((function(e){return setTimeout(e,d)}))]):[3,4];case 3:return h.sent(),[2,"continue"];case 4:throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=n,l.$metadata.totalRetryDelay=i,l;case 5:return[2]}}))},u=this,f.label=2;case 2:return[5,s()];case 3:return"object"==typeof(c=f.sent())?[2,c.value]:[3,2];case 4:return[2]}}))}))},e}(),ui={environmentVariableSelector:function(e){var t=e.AWS_MAX_ATTEMPTS;if(t){var r=parseInt(t);if(Number.isNaN(r))throw new Error('Environment variable AWS_MAX_ATTEMPTS mast be a number, got "'+t+'"');return r}},configFileSelector:function(e){var t=e.max_attempts;if(t){var r=parseInt(t);if(Number.isNaN(r))throw new Error('Shared config file entry max_attempts mast be a number, got "'+t+'"');return r}},default:3},ci=function(e){var t=fi(e.maxAttempts);return Ln(Ln({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new si(t)})},fi=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},li={environmentVariableSelector:function(e){return e.AWS_RETRY_MODE},configFileSelector:function(e){return e.retry_mode},default:"standard"},di=Object.freeze({__proto__:null,retryMiddleware:Dn,retryMiddlewareOptions:zn,getRetryPlugin:Un,DEFAULT_MAX_ATTEMPTS:3,DEFAULT_RETRY_MODE:"standard",StandardRetryStrategy:si,ENV_MAX_ATTEMPTS:"AWS_MAX_ATTEMPTS",CONFIG_MAX_ATTEMPTS:"max_attempts",NODE_MAX_ATTEMPT_CONFIG_OPTIONS:ui,resolveRetryConfig:ci,ENV_RETRY_MODE:"AWS_RETRY_MODE",CONFIG_RETRY_MODE:"retry_mode",NODE_RETRY_MODE_CONFIG_OPTIONS:li,defaultDelayDecider:oi,defaultRetryDecider:ai}),hi="@aws-sdk/client-s3",pi="1.0.0-rc.3",vi=function(e){var t=e.endpoint,r=e.urlParser;if("string"==typeof t){var n=Promise.resolve(r(t));return function(){return n}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},gi=function(e){return kn(void 0,void 0,void 0,(function(){var t,r,n,i,o;return Pn(this,(function(a){switch(a.label){case 0:return t=e.tls,r=void 0===t||t,[4,e.region()];case 1:if(n=a.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(n)];case 2:if(!(i=(null!==(o=a.sent())&&void 0!==o?o:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((r?"https:":"http:")+"//"+i)]}}))}))},mi={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},yi=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},bi=function(e){function t(t,r){void 0===r&&(r=!0);var n=e.call(this,t)||this;return n.tryNextLink=r,n}return Tn(t,e),t}(Error);function wi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){var t,r,n=Promise.reject(new bi("No providers in chain")),i=function(e){n=n.catch((function(t){if(null==t?void 0:t.tryNextLink)return e();throw t}))};try{for(var o=jn(e),a=o.next();!a.done;a=o.next()){i(a.value)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}}var Si=function(e,t,r){var n,i;if(void 0===t)return function(){return i||(n=e(),i=!0),n};var o=!1;return function(){return kn(void 0,void 0,void 0,(function(){var a;return Pn(this,(function(s){switch(s.label){case 0:return i||(n=e(),i=!0),o?[2,n]:[4,n];case 1:return a=s.sent(),r&&!r(a)?(o=!0,[2,a]):t(a)?[2,n=e()]:[2,a]}}))}))}};function Ei(e){return new Promise((function(t,r){var n=o.request(Ln({method:"GET"},e));n.on("error",(function(e){r(Object.assign(new bi("Unable to connect to instance metadata service"),e))})),n.on("timeout",(function(){r(new Error("TimeoutError"))})),n.on("response",(function(e){var n=e.statusCode,i=void 0===n?400:n;(i<200||300<=i)&&r(Object.assign(new bi("Error response received from instance metadata service"),{statusCode:i}));var o=[];e.on("data",(function(e){o.push(e)})),e.on("end",(function(){t(s.Buffer.concat(o))}))})),n.end()}))}var xi=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration},Ci=function(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}},Ai=function(e){var t=e.maxRetries,r=void 0===t?0:t,n=e.timeout;return{maxRetries:r,timeout:void 0===n?1e3:n}},Ti=function(e,t){for(var r=e(),n=0;n<t;n++)r=r.catch(e);return r},Li="AWS_CONTAINER_CREDENTIALS_FULL_URI",Oi="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI";function ki(e){var t=this;void 0===e&&(e={});var r=Ai(e),n=r.timeout,i=r.maxRetries;return function(){return function(){if(process.env[Oi])return Promise.resolve({hostname:"169.254.170.2",path:process.env[Oi]});if(process.env[Li]){var e=f.parse(process.env[Li]);return e.hostname&&e.hostname in ji?e.protocol&&e.protocol in Ri?Promise.resolve(Ln(Ln({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new bi(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new bi(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new bi("The container metadata credential provider cannot be used unless the "+Oi+" or "+Li+" environment variable is set",!1))}().then((function(e){return Ti((function(){return kn(t,void 0,void 0,(function(){var t,r,i;return Pn(this,(function(o){switch(o.label){case 0:return i=(r=JSON).parse,[4,Pi(n,e)];case 1:if(t=i.apply(r,[o.sent()]),!xi(t))throw new bi("Invalid response received from instance metadata service.");return[2,Ci(t)]}}))}))}),i)}))}}function Pi(e,t){if(process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN){var r=t.headers,n=void 0===r?{}:r;n.Authorization=process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN,t.headers=n}return Ei(Ln(Ln({},t),{timeout:e})).then((function(e){return e.toString()}))}var ji={localhost:!0,"127.0.0.1":!0},Ri={"http:":!0,"https:":!0};var Ni="169.254.169.254",_i="/latest/meta-data/iam/security-credentials/",Ii=function(e){return kn(void 0,void 0,void 0,(function(){return Pn(this,(function(t){return[2,Ei(Ln(Ln({},e),{host:Ni,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]}))}))},Mi=function(e){return kn(void 0,void 0,void 0,(function(){return Pn(this,(function(t){switch(t.label){case 0:return[4,Ei(Ln(Ln({},e),{host:Ni,path:_i}))];case 1:return[2,t.sent().toString()]}}))}))},Di=function(e,t){return kn(void 0,void 0,void 0,(function(){var r,n,i;return Pn(this,(function(o){switch(o.label){case 0:return i=(n=JSON).parse,[4,Ei(Ln(Ln({},t),{host:Ni,path:_i+e}))];case 1:if(r=i.apply(n,[o.sent().toString()]),!xi(r))throw new bi("Invalid response received from instance metadata service.");return[2,Ci(r)]}}))}))},zi=function(){return{}};function Ui(e){void 0===e&&(e={});var t=e.filepath,r=void 0===t?process.env.AWS_SHARED_CREDENTIALS_FILE||p.join(Hi(),".aws","credentials"):t,n=e.configFilepath,i=void 0===n?process.env.AWS_CONFIG_FILE||p.join(Hi(),".aws","config"):n;return Promise.all([Fi(i).then(Ki).then(Bi).catch(zi),Fi(r).then(Ki).catch(zi)]).then((function(e){var t=Rn(e,2);return{configFile:t[0],credentialsFile:t[1]}}))}var qi=/^profile\s(["'])?([^\1]+)\1$/;function Bi(e){var t,r,n={};try{for(var i=jn(Object.keys(e)),o=i.next();!o.done;o=i.next()){var a=o.value,s=void 0;if("default"===a)n.default=e.default;else if(s=qi.exec(a)){var u=Rn(s,3),c=(u[0],u[1],u[2]);c&&(n[c]=e[a])}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}function Ki(e){var t,r,n,i={};try{for(var o=jn(e.split(/\r?\n/)),a=o.next();!a.done;a=o.next()){var s=a.value,u=(s=s.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(u)n=u[1];else if(n){var c=s.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);c&&(i[n]=i[n]||{},i[n][c[1]]=c[2])}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}function Fi(e){return new Promise((function(t,r){d.readFile(e,"utf8",(function(e,n){e?r(e):t(n)}))}))}function Hi(){var e=process.env,t=e.HOME,r=e.USERPROFILE,n=e.HOMEPATH,i=e.HOMEDRIVE,o=void 0===i?"C:"+p.sep:i;return t||(r||(n?""+o+n:h.homedir()))}function $i(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1}function Vi(e){return void 0===e&&(e={}),function(){return Ji(e).then((function(t){return Gi(Wi(e),t,e)}))}}function Wi(e){return e.profile||process.env.AWS_PROFILE||"default"}function Gi(e,t,r,n){return void 0===n&&(n={}),kn(this,void 0,void 0,(function(){var i,o,a,s,u,c,f,l,d,h,p,v,g;return Pn(this,(function(m){switch(m.label){case 0:if(i=t[e],Object.keys(n).length>0&&$i(i))return[2,Xi(i)];if(y=i,!(Boolean(y)&&"object"==typeof y&&"string"==typeof y.role_arn&&"string"==typeof y.source_profile&&["undefined","string"].indexOf(typeof y.role_session_name)>-1&&["undefined","string"].indexOf(typeof y.external_id)>-1&&["undefined","string"].indexOf(typeof y.mfa_serial)>-1))return[3,4];if(o=i.external_id,a=i.mfa_serial,s=i.role_arn,u=i.role_session_name,c=void 0===u?"aws-sdk-js-"+Date.now():u,f=i.source_profile,!r.roleAssumer)throw new bi("Profile "+e+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(f in n)throw new bi("Detected a cycle attempting to resolve credentials for profile "+Wi(r)+". Profiles visited: "+Object.keys(n).join(", "),!1);if(l=Gi(f,t,r,Ln(Ln({},n),((g={})[f]=!0,g))),d={RoleArn:s,RoleSessionName:c,ExternalId:o},!a)return[3,2];if(!r.mfaCodeProvider)throw new bi("Profile "+e+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return d.SerialNumber=a,h=d,[4,r.mfaCodeProvider(a)];case 1:h.TokenCode=m.sent(),m.label=2;case 2:return v=(p=r).roleAssumer,[4,l];case 3:return[2,v.apply(p,[m.sent(),d])];case 4:if($i(i))return[2,Xi(i)];throw new bi("Profile "+e+" could not be found or parsed in shared credentials file.")}var y}))}))}function Ji(e){var t=e.loadedConfig;return(void 0===t?Ui(e):t).then((function(e){var t=e.configFile,r=e.credentialsFile;return Ln(Ln({},t),r)}))}function Xi(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})}function Zi(e){return void 0===e&&(e={}),function(){return Ji(e).then((function(t){return function(e,t,r){return kn(this,void 0,void 0,(function(){var r,n;return Pn(this,(function(i){switch(i.label){case 0:return r=t[e],t[e]?void 0===(n=r.credential_process)?[3,2]:[4,Yi(n).then((function(t){var r;try{r=JSON.parse(t)}catch(t){throw Error("Profile "+e+" credential_process returned invalid JSON.")}var n,i=r.Version,o=r.AccessKeyId,a=r.SecretAccessKey,s=r.SessionToken,u=r.Expiration;if(1!==i)throw Error("Profile "+e+" credential_process did not return Version 1.");if(void 0===o||void 0===a)throw Error("Profile "+e+" credential_process returned invalid credentials.");if(u){var c=new Date;if(new Date(u)<c)throw Error("Profile "+e+" credential_process returned expired credentials.");n=Math.floor(new Date(u).valueOf()/1e3)}return{accessKeyId:o,secretAccessKey:a,sessionToken:s,expirationUnix:n}})).catch((function(e){throw new bi(e.message)}))]:[3,4];case 1:return[2,i.sent()];case 2:throw new bi("Profile "+e+" did not contain credential_process.");case 3:return[3,5];case 4:throw new bi("Profile "+e+" could not be found in shared credentials file.");case 5:return[2]}}))}))}(Wi(e),t)}))}}function Yi(e){return new Promise((function(t,r){v.exec(e,(function(e,n){e?r(e):t(n.trim())}))}))}var Qi=function(e,t){return(Qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var eo=function(){return(eo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function to(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ro(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function no(e){return this instanceof no?(this.v=e,this):new no(e)}for(var io=Object.freeze({__proto__:null,__extends:function(e,t){function r(){this.constructor=e}Qi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},get __assign(){return eo},__rest:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},__decorate:function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__param:function(e,t){return function(r,n){t(r,n,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator:function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},__createBinding:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},__exportStar:function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])},__values:to,__read:ro,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ro(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n},__await:no,__asyncGenerator:function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=i[e](t)).value instanceof no?Promise.resolve(r.value.v).then(u,c):f(o[0][2],r)}catch(e){f(o[0][3],e)}var r}function u(e){s("next",e)}function c(e){s("throw",e)}function f(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},__asyncDelegator:function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:no(e[n](t)),done:"return"===n}:i?i(t):t}:i}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=to(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}}),oo=re((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Crc32=t.crc32=void 0,t.crc32=function(e){return(new r).update(e).digest()};var r=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,r;try{for(var i=io.__values(e),o=i.next();!o.done;o=i.next()){var a=o.value;this.checksum=this.checksum>>>8^n[255&(this.checksum^a)]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=r;var n=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])})),ao={},so={},uo=0;uo<256;uo++){var co=uo.toString(16).toLowerCase();1===co.length&&(co="0"+co),ao[uo]=co,so[co]=uo}function fo(e){for(var t="",r=0;r<e.byteLength;r++)t+=ao[e[r]];return t}var lo=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var r=new Uint8Array(8),n=7,i=Math.abs(Math.round(t));n>-1&&i>0;n--,i/=256)r[n]=i;return t<0&&ho(r),new e(r)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&ho(e),parseInt(fo(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function ho(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}var po,vo=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,r,n,i,o=[];try{for(var a=jn(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}var f=new Uint8Array(o.reduce((function(e,t){return e+t.byteLength}),0)),l=0;try{for(var d=jn(o),h=d.next();!h.done;h=d.next()){var p=h.value;f.set(p,l),l+=p.byteLength}}catch(e){n={error:e}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return f},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":var n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":var i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":var a=this.fromUtf8(e.value),s=new DataView(new ArrayBuffer(3+a.byteLength));s.setUint8(0,7),s.setUint16(1,a.byteLength,!1);var u=new Uint8Array(s.buffer);return u.set(a,3),u;case"timestamp":var c=new Uint8Array(9);return c[0]=8,c.set(lo.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!Ao.test(e.value))throw new Error("Invalid UUID received: "+e.value);var f=new Uint8Array(17);return f[0]=9,f.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2){var n=e.substr(r,2).toLowerCase();if(!(n in so))throw new Error("Cannot decode unrecognized sequence "+n+" as hexadecimal");t[r/2]=so[n]}return t}(e.value.replace(/\-/g,"")),1),f}},e.prototype.parse=function(e){for(var t={},r=0;r<e.byteLength;){var n=e.getUint8(r++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,n));switch(r+=n,e.getUint8(r++)){case 0:t[i]={type:go,value:!0};break;case 1:t[i]={type:go,value:!1};break;case 2:t[i]={type:mo,value:e.getInt8(r++)};break;case 3:t[i]={type:yo,value:e.getInt16(r,!1)},r+=2;break;case 4:t[i]={type:bo,value:e.getInt32(r,!1)},r+=4;break;case 5:t[i]={type:wo,value:new lo(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:var o=e.getUint16(r,!1);r+=2,t[i]={type:So,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:var a=e.getUint16(r,!1);r+=2,t[i]={type:Eo,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,a))},r+=a;break;case 8:t[i]={type:xo,value:new Date(new lo(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:var s=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,t[i]={type:Co,value:fo(s.subarray(0,4))+"-"+fo(s.subarray(4,6))+"-"+fo(s.subarray(6,8))+"-"+fo(s.subarray(8,10))+"-"+fo(s.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(po||(po={}));var go="boolean",mo="byte",yo="short",bo="integer",wo="long",So="binary",Eo="string",xo="timestamp",Co="uuid",Ao=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var To=function(){function e(e,t){this.headerMarshaller=new vo(e,t)}return e.prototype.marshall=function(e){var t=e.headers,r=e.body,n=this.headerMarshaller.format(t),i=n.byteLength+r.byteLength+16,o=new Uint8Array(i),a=new DataView(o.buffer,o.byteOffset,o.byteLength),s=new oo.Crc32;return a.setUint32(0,i,!1),a.setUint32(4,n.byteLength,!1),a.setUint32(8,s.update(o.subarray(0,8)).digest(),!1),o.set(n,12),o.set(r,n.byteLength+12),a.setUint32(i-4,s.update(o.subarray(8,i-4)).digest(),!1),o},e.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,r=e.byteOffset,n=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(n,r,t),o=i.getUint32(0,!1);if(t!==o)throw new Error("Reported message length does not match received message length");var a=i.getUint32(4,!1),s=i.getUint32(8,!1),u=i.getUint32(t-4,!1),c=(new oo.Crc32).update(new Uint8Array(n,r,8));if(s!==c.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+c.digest()+")");if(c.update(new Uint8Array(n,r+8,t-12)),u!==c.digest())throw new Error("The message checksum ("+c.digest()+") did not match the expected value of "+u);return{headers:new DataView(n,r+8+4,a),body:new Uint8Array(n,r+8+4+a,o-a-16)}}(e),r=t.headers,n=t.body;return{headers:this.headerMarshaller.parse(r),body:n}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}();var Lo=function(){function e(e){var t=e.utf8Encoder,r=e.utf8Decoder;this.eventMarshaller=new To(t,r),this.utfEncoder=t}return e.prototype.deserialize=function(e,t){var r,n,i,o,a,s,u;return function(e,t){var r;return(r={})[Symbol.asyncIterator]=function(){return In(this,arguments,(function(){var r,n,i,o,a,s,u,c,f,l,d,h,p,v,g,m,y;return Pn(this,(function(b){switch(b.label){case 0:b.trys.push([0,12,13,18]),r=Mn(e),b.label=1;case 1:return[4,_n(r.next())];case 2:if((n=b.sent()).done)return[3,11];if(i=n.value,o=t.eventMarshaller.unmarshall(i),"error"!==(a=o.headers[":message-type"].value))return[3,3];throw(s=new Error(o.headers[":error-message"].value||"UnknownError")).name=o.headers[":error-code"].value,s;case 3:return"exception"!==a?[3,5]:(u=o.headers[":exception-type"].value,(v={})[u]=o,c=v,[4,_n(t.deserializer(c))]);case 4:if((f=b.sent()).$unknown)throw(l=new Error(t.toUtf8(o.body))).name=u,l;throw f[u];case 5:return"event"!==a?[3,9]:((g={})[o.headers[":event-type"].value]=o,d=g,[4,_n(t.deserializer(d))]);case 6:return(h=b.sent()).$unknown?[3,10]:[4,_n(h)];case 7:return[4,b.sent()];case 8:return b.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+o.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return p=b.sent(),m={error:p},[3,18];case 13:return b.trys.push([13,,16,17]),n&&!n.done&&(y=r.return)?[4,_n(y.call(r))]:[3,15];case 14:b.sent(),b.label=15;case 15:return[3,17];case 16:if(m)throw m.error;return[7];case 17:return[7];case 18:return[2]}}))}))},r}((r=e,i=0,o=0,a=null,s=null,u=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);i=e,o=4,a=new Uint8Array(e),new DataView(a.buffer).setUint32(0,e,!1)},(n={})[Symbol.asyncIterator]=function(){return In(this,arguments,(function(){var e,t,n,c,f,l,d,h;return Pn(this,(function(p){switch(p.label){case 0:e=r[Symbol.asyncIterator](),p.label=1;case 1:return[4,_n(e.next())];case 2:return t=p.sent(),n=t.value,t.done?i?[3,4]:[4,_n(void 0)]:[3,10];case 3:return[2,p.sent()];case 4:return i!==o?[3,7]:[4,_n(a)];case 5:return[4,p.sent()];case 6:return p.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,_n(void 0)];case 9:return[2,p.sent()];case 10:c=n.length,f=0,p.label=11;case 11:if(!(f<c))return[3,15];if(!a){if(l=c-f,s||(s=new Uint8Array(4)),d=Math.min(4-o,l),s.set(n.slice(f,f+d),o),f+=d,(o+=d)<4)return[3,15];u(new DataView(s.buffer).getUint32(0,!1)),s=null}return h=Math.min(i-o,c-f),a.set(n.slice(f,f+h),o),o+=h,f+=h,i&&i===o?[4,_n(a)]:[3,14];case 12:return[4,p.sent()];case 13:p.sent(),a=null,i=0,o=0,p.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}}))}))},n),{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder})},e.prototype.serialize=function(e,t){var r,n=this;return(r={})[Symbol.asyncIterator]=function(){return In(this,arguments,(function(){var r,i,o,a,s,u;return Pn(this,(function(c){switch(c.label){case 0:c.trys.push([0,7,8,13]),r=Mn(e),c.label=1;case 1:return[4,_n(r.next())];case 2:return(i=c.sent()).done?[3,6]:(o=i.value,[4,_n(n.eventMarshaller.marshall(t(o)))]);case 3:return[4,c.sent()];case 4:c.sent(),c.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return a=c.sent(),s={error:a},[3,13];case 8:return c.trys.push([8,,11,12]),i&&!i.done&&(u=r.return)?[4,_n(u.call(r))]:[3,10];case 9:c.sent(),c.label=10;case 10:return[3,12];case 11:if(s)throw s.error;return[7];case 12:return[7];case 13:return[4,_n(new Uint8Array(0))];case 14:return[4,c.sent()];case 15:return c.sent(),[2]}}))}))},r},e}();var Oo=function(){function e(e){var t=e.utf8Encoder,r=e.utf8Decoder;this.eventMarshaller=new To(t,r),this.universalMarshaller=new Lo({utf8Decoder:r,utf8Encoder:t})}return e.prototype.deserialize=function(e,t){var r="function"==typeof e[Symbol.asyncIterator]?e:function(e){return In(this,arguments,(function(){var t,r,n,i;return Pn(this,(function(o){switch(o.label){case 0:t=!1,r=!1,n=new Array,e.on("error",(function(e){if(t||(t=!0),e)throw e})),e.on("data",(function(e){n.push(e)})),e.on("end",(function(){t=!0})),o.label=1;case 1:return r?[3,6]:[4,_n(new Promise((function(e){return setTimeout((function(){return e(n.shift())}),0)})))];case 2:return(i=o.sent())?[4,_n(i)]:[3,5];case 3:return[4,o.sent()];case 4:o.sent(),o.label=5;case 5:return r=t&&0===n.length,[3,1];case 6:return[2]}}))}))}(e);return this.universalMarshaller.deserialize(r,t)},e.prototype.serialize=function(e,t){var r=this.universalMarshaller.serialize(e,t);if("function"==typeof n.Readable.from)return n.Readable.from(r);var i=r[Symbol.asyncIterator](),o=new n.Readable({autoDestroy:!0,objectMode:!0,read:function(){return kn(this,void 0,void 0,(function(){var e=this;return Pn(this,(function(t){return i.next().then((function(t){var r=t.done,n=t.value;r?e.push(null):e.push(n)})).catch((function(t){e.destroy(t)})),[2]}))}))}});return o.on("error",(function(){o.destroy()})),o.on("end",(function(){o.destroy()})),o},e}(),ko=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},Po=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=e.byteLength-t),!ko(e))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return s.Buffer.from(e,t,r)},jo=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?s.Buffer.from(e,t):s.Buffer.from(e)},Ro=function(){function e(e,t){this.hash=t?c.createHmac(e,No(t)):c.createHash(e)}return e.prototype.update=function(e,t){this.hash.update(No(e,t))},e.prototype.digest=function(){return Promise.resolve(this.hash.digest())},e}();function No(e,t){return s.Buffer.isBuffer(e)?e:"string"==typeof e?jo(e,t):ArrayBuffer.isView(e)?Po(e.buffer,e.byteOffset,e.byteLength):Po(e)}var _o=function(e){function t(t,r){var n=e.call(this,r)||this;return n.hash=t,n}return Tn(t,e),t.prototype._write=function(e,t,r){try{this.hash.update(e)}catch(e){return r(e)}r()},t}(n.Writable);var Io=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&e.split(":").length>=6},Mo=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Do=/(\d+\.){3}\d+/,zo=/\.\./,Uo=/\./,qo=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,Bo=/^s3(-external-1)?\.amazonaws\.com$/,Ko=function(e){return Ho(e)?e.replace(/fips-|-fips/,""):e},Fo=function(e){var t=e.match(qo);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},Ho=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},$o=function(e,t){return e===t||Ko(e)===t||e===Ko(t)},Vo=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==t?void 0:t.tlsCompatible)&&Uo.test(e))throw new Error("Invalid DNS label "+e)},Wo=function(e){var t=e.baseHostname;return qo.test(t)?function(e){return"string"==typeof e.bucketName}(e)?Jo(e):Go(e):{bucketEndpoint:!1,hostname:t}},Go=function(e){var t,r=Rn((t=e.baseHostname,Bo.test(t)?[t.replace(".amazonaws.com",""),"amazonaws.com"]:Fo(t)),2),n=r[0],i=r[1],o=e.pathStyleEndpoint,a=e.dualstackEndpoint,s=void 0!==a&&a,u=e.accelerateEndpoint,c=void 0!==u&&u,f=e.tlsCompatible,l=void 0===f||f,d=e.useArnRegion,h=e.bucketName,p=e.clientPartition,v=void 0===p?"aws":p,g=e.clientSigningRegion,m=void 0===g?n:g;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:o,accelerateEndpoint:c,tlsCompatible:l});var y=h.service,b=h.partition,w=h.accountId,S=h.region,E=h.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(y),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(b,{clientPartition:v}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(w),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!$o(e,t.clientRegion)&&!$o(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&Ho(e))throw new Error("Endpoint does not support FIPS region")}(S,{useArnRegion:d,clientRegion:n,clientSigningRegion:m});var x=function(e){var t=e.includes(":")?":":"/",r=Rn(e.split(t)),n=r[0],i=r.slice(1);if("accesspoint"===n){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===n){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var o=Rn(i,3),a=o[0];return o[1],{outpostId:a,accesspointName:o[2]}}throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")}(E),C=x.accesspointName,A=x.outpostId;Vo(C+"-"+w,{tlsCompatible:l});var T=d?S:n,L=d?S:m;return A?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(y),Vo(A,{tlsCompatible:l}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(s),function(e){if(Ho(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(T),{bucketEndpoint:!0,hostname:C+"-"+w+"."+A+".s3-outposts."+T+"."+i,signingRegion:L,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(y),{bucketEndpoint:!0,hostname:C+"-"+w+".s3-accesspoint"+(s?".dualstack":"")+"."+T+"."+i,signingRegion:L})},Jo=function(e){var t,r=e.accelerateEndpoint,n=void 0!==r&&r,i=e.baseHostname,o=e.bucketName,a=e.dualstackEndpoint,s=void 0!==a&&a,u=e.pathStyleEndpoint,c=void 0!==u&&u,f=e.tlsCompatible,l=void 0===f||f,d=Rn((t=i,Bo.test(t)?["us-east-1","amazonaws.com"]:Fo(t)),2),h=d[0],p=d[1];return c||!function(e){return Mo.test(e)&&!Do.test(e)&&!zo.test(e)}(o)||l&&Uo.test(o)?{bucketEndpoint:!1,hostname:s?"s3.dualstack."+h+"."+p:i}:(n?i="s3-accelerate"+(s?".dualstack":"")+"."+p:s&&(i="s3.dualstack."+h+"."+p),{bucketEndpoint:!0,hostname:o+"."+i})},Xo=function(e){return function(t,r){return function(n){return kn(void 0,void 0,void 0,(function(){var i,o,a,s,u,c,f,l,d,h,p,v,g,m,y,b,w;return Pn(this,(function(S){switch(S.label){case 0:return i=n.input.Bucket,o=e.bucketEndpoint,a=n.request,Bn.isInstance(a)?e.bucketEndpoint?(a.hostname=i,[3,6]):[3,1]:[3,7];case 1:return Io(i)?(s=function(e){var t=e.split(":");if(t.length<6||"arn"!==t[0])throw new Error("Malformed ARN");var r=Rn(t);return{partition:r[1],service:r[2],region:r[3],accountId:r[4],resource:r.slice(5).join(":")}}(i),c=Ko,[4,e.region()]):[3,5];case 2:return u=c.apply(void 0,[S.sent()]),[4,e.regionInfoProvider(u)];case 3:return f=S.sent()||{},l=f.partition,d=f.signingRegion,h=void 0===d?u:d,[4,e.useArnRegion()];case 4:return p=S.sent(),v=Wo({bucketName:s,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,useArnRegion:p,clientPartition:l,clientSigningRegion:h}),b=v.hostname,w=v.bucketEndpoint,g=v.signingRegion,m=v.signingService,g&&g!==h&&(r.signing_region=g),m&&"s3"!==m&&(r.signing_service=m),a.hostname=b,o=w,[3,6];case 5:y=Wo({bucketName:i,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol}),b=y.hostname,w=y.bucketEndpoint,a.hostname=b,o=w,S.label=6;case 6:o&&(a.path=a.path.replace(/^(\/)?[^\/]+/,""),""===a.path&&(a.path="/")),S.label=7;case 7:return[2,t(Ln(Ln({},n),{request:a}))]}}))}))}}},Zo={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware"},Yo=function(e){return{applyToStack:function(t){t.addRelativeTo(Xo(e),Zo)}}};var Qo={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,"AWS_S3_USE_ARN_REGION")){if("true"===e.AWS_S3_USE_ARN_REGION)return!0;if("false"===e.AWS_S3_USE_ARN_REGION)return!1;throw new Error('Cannot load env AWS_S3_USE_ARN_REGION. Expected "true" or "false", got '+e.AWS_S3_USE_ARN_REGION+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,"s3_use_arn_region")){if("true"===e.s3_use_arn_region)return!0;if("false"===e.s3_use_arn_region)return!1;throw new Error('Cannot load shared config entry s3_use_arn_region. Expected "true" or "false", got '+e.s3_use_arn_region+".")}},default:!1},ea=function(e){return function(e){return"function"==typeof e}(e)?function(){return kn(void 0,void 0,void 0,(function(){return Pn(this,(function(t){return[2,e()]}))}))}:(t=e,function(){return Promise.resolve(t)});var t},ta=function(e,t){var r,n=e.environmentVariableSelector,i=e.configFileSelector,o=e.default;return void 0===t&&(t={}),Si(wi((r=n,function(){return kn(void 0,void 0,void 0,(function(){var e;return Pn(this,(function(t){try{if(void 0===(e=r(process.env)))throw new Error;return[2,e]}catch(e){throw new bi(e.message||"Cannot load config from environment variables with getter: "+r)}return[2]}))}))}),function(e,t){void 0===t&&(t={});var r=t.preferredFile,n=void 0===r?"config":r,i=On(t,["preferredFile"]);return function(){return kn(void 0,void 0,void 0,(function(){var t,r,o,a,s,u,c,f,l,d,h;return Pn(this,(function(p){switch(p.label){case 0:return t=i.loadedConfig,r=void 0===t?Ui(i):t,o=i.profile,a=void 0===o?process.env.AWS_PROFILE||"default":o,[4,r];case 1:s=p.sent(),u=s.configFile,c=s.credentialsFile,f=c[a]||{},l=u[a]||{},d="config"===n?Ln(Ln({},f),l):Ln(Ln({},l),f);try{if(void 0===(h=e(d)))throw new Error;return[2,h]}catch(t){throw new bi(t.message||"Cannot load config for profile "+a+" in SDK configuration files with getter: "+e)}return[2]}}))}))}}(i,t),ea(o)))},ra=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,na)},na=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};var ia=function(e){var t,r,n={};try{for(var i=jn(Object.keys(e)),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];n[a]=Array.isArray(s)?s.join(","):s}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n};function oa(e,t){t instanceof n.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var aa=function(){function e(e){var t=void 0===e?{}:e,r=t.connectionTimeout,n=t.socketTimeout,i=t.httpAgent,a=t.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=r,this.socketTimeout=n;this.httpAgent=i||new o.Agent({keepAlive:true}),this.httpsAgent=a||new l.Agent({keepAlive:true})}return e.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},e.prototype.handle=function(e,t){var r=this,n=t.abortSignal;return new Promise((function(t,i){if(null==n?void 0:n.aborted){var a=new Error("Request aborted");return a.name="AbortError",void i(a)}var s="https:"===e.protocol,u=function(e){var t,r,n=[];try{for(var i=jn(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];if(a=ra(a),Array.isArray(s))for(var u=0,c=s.length;u<c;u++)n.push(a+"="+ra(s[u]));else{var f=a;(s||"string"==typeof s)&&(f+="="+ra(s)),n.push(f)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n.join("&")}(e.query||{}),c={headers:e.headers,host:e.hostname,method:e.method,path:u?e.path+"?"+u:e.path,port:e.port,agent:s?r.httpsAgent:r.httpAgent},f=(s?l.request:o.request)(c,(function(e){var r=new qn({statusCode:e.statusCode||-1,headers:ia(e.headers),body:e});t({response:r})}));f.on("error",i),function(e,t,r){void 0===r&&(r=0),r&&e.on("socket",(function(e){var n=this;if(e.connecting){var i=setTimeout((function(){n.abort();var e=new Error("Socket timed out without establishing a connection within "+r+" ms");e.name="TimeoutError",t(e)}),r);e.on("connect",(function(){clearTimeout(i)}))}}))}(f,i,r.connectionTimeout),function(e,t,r){void 0===r&&(r=0),e.setTimeout(r,(function(){this.abort();var e=new Error("Connection timed out after "+r+" ms");e.name="TimeoutError",t(e)}))}(f,i,r.socketTimeout),n&&(n.onabort=function(){f.abort();var e=new Error("Request aborted");e.name="AbortError",i(e)}),function(e,t){"100-continue"===(t.headers.Expect||t.headers.expect)?e.on("continue",(function(){oa(e,t.body)})):oa(e,t.body)}(f,e)}))},e}(),sa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bufferedBytes=[],t}return Tn(t,e),t.prototype._write=function(e,t,r){this.bufferedBytes.push(e),r()},t}(n.Writable);const ua=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),ca=new Set(["cn-north-1","cn-northwest-1"]),fa=new Set(["us-iso-east-1"]),la=new Set(["us-isob-east-1"]),da=new Set(["us-gov-east-1","us-gov-west-1"]),ha={...{apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:(e,t)=>{let r=void 0;switch(e){case"ap-east-1":r={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":r={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":r={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":r={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":r={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":r={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":r={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":r={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":r={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":r={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":r={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":r={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":r={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":r={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":r={hostname:"s3-fips-us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":r={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":r={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":r={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":r={hostname:"s3.amazonaws.com",partition:"aws"};break;case"us-east-2":r={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":r={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":r={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":r={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":r={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":r={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":r={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:ua.has(e)&&(r={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),ca.has(e)&&(r={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),fa.has(e)&&(r={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),la.has(e)&&(r={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),da.has(e)&&(r={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===r&&(r={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(r)},signingEscapePath:!1,signingName:"s3",useArnRegion:!1},runtime:"node",base64Decoder:function(e){var t=jo(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},base64Encoder:function(e){return Po(e.buffer,e.byteOffset,e.byteLength).toString("base64")},bodyLengthChecker:function(e){return e?"string"==typeof e?Buffer.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?d.lstatSync(e.path).size:void 0:0},credentialDefaultProvider:function(e){void 0===e&&(e={});var t=e.profile,r=(void 0===t?process.env.AWS_PROFILE:t)?Vi(e):wi((function(){var e=process.env.AWS_ACCESS_KEY_ID,t=process.env.AWS_SECRET_ACCESS_KEY,r=process.env.AWS_CREDENTIAL_EXPIRATION;return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:process.env.AWS_SESSION_TOKEN,expiration:r?new Date(r):void 0}):Promise.reject(new bi("Unable to find environment variable credentials."))}),Vi(e),Zi(e),function(e){if(process.env[Oi]||process.env[Li])return ki(e);if(process.env.AWS_EC2_METADATA_DISABLED)return function(){return Promise.reject(new bi("EC2 Instance Metadata Service access disabled"))};return function(e){void 0===e&&(e={});var t=!1,r=Ai(e),n=r.timeout,i=r.maxRetries,o=function(e,r){return kn(void 0,void 0,void 0,(function(){var n;return Pn(this,(function(i){switch(i.label){case 0:return[4,Ti((function(){return kn(void 0,void 0,void 0,(function(){var e,n;return Pn(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Mi(r)];case 1:return e=i.sent(),[3,3];case 2:throw 401===(n=i.sent()).statusCode&&(t=!1),n;case 3:return[2,e]}}))}))}),e)];case 1:return n=i.sent().trim(),[2,Ti((function(){return kn(void 0,void 0,void 0,(function(){var e,i;return Pn(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Di(n,r)];case 1:return e=o.sent(),[3,3];case 2:throw 401===(i=o.sent()).statusCode&&(t=!1),i;case 3:return[2,e]}}))}))}),e)]}}))}))};return function(){return kn(void 0,void 0,void 0,(function(){var e,r;return Pn(this,(function(a){switch(a.label){case 0:return t?[2,o(i,{timeout:n})]:[3,1];case 1:e=void 0,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,Ii({timeout:n})];case 3:return e=a.sent().toString(),[3,5];case 4:if(400===(null==(r=a.sent())?void 0:r.statusCode))throw Object.assign(r,{message:"EC2 Metadata token request returned error"});return("TimeoutError"===r.message||[403,404,405].includes(r.statusCode))&&(t=!0),[2,o(i,{timeout:n})];case 5:return[2,o(i,{timeout:n,headers:{"x-aws-ec2-metadata-token":e}})]}}))}))}}(e)}(e));return Si(r,(function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5}),(function(e){return void 0!==e.expiration}))},defaultUserAgent:(pa=hi,va=pi,ga=k.default.platform+"/"+k.default.version,k.default.env.AWS_EXECUTION_ENV&&(ga+=" exec-env/"+k.default.env.AWS_EXECUTION_ENV),"aws-sdk-nodejs-v3-"+pa+"/"+va+" "+ga),eventStreamSerdeProvider:function(e){return new Oo(e)},maxAttempts:ta(ui),md5:Ro.bind(null,"md5"),region:ta(mi,{preferredFile:"credentials"}),requestHandler:new aa,sha256:Ro.bind(null,"sha256"),streamCollector:function(e){return new Promise((function(t,r){var n=new sa;e.pipe(n),e.on("error",(function(e){n.end(),r(e)})),n.on("error",r),n.on("finish",(function(){var e=new Uint8Array(Buffer.concat(this.bufferedBytes));t(e)}))}))},streamHasher:function(e,t){return new Promise((function(r,n){if("string"==typeof t.path){var i=d.createReadStream(t.path,{start:t.start,end:t.end}),o=new e,a=new _o(o);i.pipe(a),i.on("error",(function(e){a.end(),n(e)})),a.on("error",n),a.on("finish",(function(){o.digest().then(r).catch(n)}))}else n(new Error("Unable to calculate hash for non-file streams."))}))},urlParser:function(e){var t,r=f.parse(e),n=r.hostname,i=void 0===n?"localhost":n,o=r.pathname,a=void 0===o?"/":o,s=r.port,u=r.protocol,c=void 0===u?"https:":u,l=r.search;return l&&(t=function(e){var t,r,n={};if(e=e.replace(/^\?/,""))try{for(var i=jn(e.split("&")),o=i.next();!o.done;o=i.next()){var a=Rn(o.value.split("="),2),s=a[0],u=a[1],c=void 0===u?null:u;s=decodeURIComponent(s),c&&(c=decodeURIComponent(c)),s in n?Array.isArray(n[s])?n[s].push(c):n[s]=[n[s],c]:n[s]=c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}(l)),{hostname:i,port:s?parseInt(s):void 0,protocol:c,path:a,query:t}},useArnRegion:ta(Qo),utf8Decoder:function(e){var t=jo(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},utf8Encoder:function(e){return Po(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}};var pa,va,ga;var ma={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"},ya=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(r){return function(n){return kn(t,void 0,void 0,(function(){var t,i,o,a,s;return Pn(this,(function(u){return t=n.request,Bn.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(a=e(i))&&(t.headers=Ln(Ln({},t.headers),((s={})["content-length"]=String(a),s)))),[2,r(Ln(Ln({},n),{request:t}))]}))}))}}}(e.bodyLengthChecker),ma)}}};var ba={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware"},wa=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(r){return function(n){return kn(t,void 0,void 0,(function(){var t;return Pn(this,(function(i){return t=n.request,Bn.isInstance(t)&&t.body&&"node"===e.runtime&&(t.headers=Ln(Ln({},t.headers),{Expect:"100-continue"})),[2,r(Ln(Ln({},n),{request:t}))]}))}))}}}(e),ba)}}};var Sa={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"]},Ea=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(r){return kn(void 0,void 0,void 0,(function(){var n,i;return Pn(this,(function(o){return Bn.isInstance(r.request)?(n=r.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!n.headers[":authority"]?(delete n.headers.host,n.headers[":authority"]=""):n.headers.host||(n.headers.host=n.hostname),[2,t(r)]):[2,t(r)]}))}))}}}(e),Sa)}}},xa={name:"loggerMiddleware",tags:["LOGGER"],step:"build"},Ca=function(e){return{applyToStack:function(e){e.add((function(e,t){return function(r){return kn(void 0,void 0,void 0,(function(){var n,i,o;return Pn(this,(function(a){switch(a.label){case 0:return n=t.logger,[4,e(r)];case 1:return i=a.sent(),n?(o=i.output.$metadata,"function"==typeof n.info&&n.info({$metadata:o}),[2,i]):[2,i]}}))}))}}),xa)}}};var Aa={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware"},Ta=function(e){return{applyToStack:function(e){e.add(function(){var e=this;return function(t){return function(r){return kn(e,void 0,void 0,(function(){var e,n;return Pn(this,(function(i){if("string"==typeof(e=r.input.Bucket)&&!Io(e)&&e.indexOf("/")>=0)throw(n=new Error("Bucket name shouldn't contain '/', received '"+e+"'")).name="InvalidBucketName",n;return[2,t(Ln({},r))]}))}))}}}(),Aa)}}},La={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware"},Oa=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(r){return kn(void 0,void 0,void 0,(function(){var n,i;return Pn(this,(function(o){switch(o.label){case 0:return n=r.request,!Bn.isInstance(n)||e.isCustomEndpoint?[2,t(Ln({},r))]:"s3.amazonaws.com"!==n.hostname?[3,1]:(n.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===o.sent()&&(n.hostname="s3.amazonaws.com"),o.label=3;case 3:return[2,t(Ln({},r))]}}))}))}}}(e),La)}}},ka="X-Amz-Date".toLowerCase(),Pa=["authorization",ka,"date"],ja="X-Amz-Signature".toLowerCase(),Ra="X-Amz-Security-Token".toLowerCase(),Na={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},_a=/^proxy-/,Ia=/^sec-/,Ma="AWS4-HMAC-SHA256-PAYLOAD",Da={},za=[];function Ua(e,t,r){return e+"/"+t+"/"+r+"/aws4_request"}function qa(e,t,r){var n,i,o=e.headers,a={};try{for(var s=jn(Object.keys(o).sort()),u=s.next();!u.done;u=s.next()){var c=u.value,f=c.toLowerCase();(f in Na||(null==t?void 0:t.has(f))||_a.test(f)||Ia.test(f))&&(!r||r&&!r.has(f))||(a[f]=o[c].trim().replace(/\s+/g," "))}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a}function Ba(e,t){var r=e.headers,n=e.body;return kn(this,void 0,void 0,(function(){var e,i,o,a,s,u,c;return Pn(this,(function(f){switch(f.label){case 0:try{for(e=jn(Object.keys(r)),i=e.next();!i.done;i=e.next())if("x-amz-content-sha256"===(o=i.value).toLowerCase())return[2,r[o]]}catch(e){u={error:e}}finally{try{i&&!i.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=n?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof n||ArrayBuffer.isView(n)||ko(n)?((a=new t).update(n),s=fo,[4,a.digest()]):[3,3];case 2:return[2,s.apply(void 0,[f.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}}))}))}function Ka(e){var t=e.headers,r=e.query,n=On(e,["headers","query"]);return Ln(Ln({},n),{headers:Ln({},t),query:r?Fa(r):void 0})}function Fa(e){return Object.keys(e).reduce((function(t,r){var n,i=e[r];return Ln(Ln({},t),((n={})[r]=Array.isArray(i)?Nn(i):i,n))}),{})}function Ha(e){var t,r;e="function"==typeof e.clone?e.clone():Ka(e);try{for(var n=jn(Object.keys(e.headers)),i=n.next();!i.done;i=n.next()){var o=i.value;Pa.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return e}function $a(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"==typeof e)return Number(e)?new Date(1e3*Number(e)):new Date(e);return e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var Va=function(){function e(e){var t=e.applyChecksum,r=e.credentials,n=e.region,i=e.service,o=e.sha256,a=e.uriEscapePath,s=void 0===a||a;this.service=i,this.sha256=o,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Ja(n),this.credentialProvider=Xa(r)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),kn(this,void 0,void 0,(function(){var r,n,i,o,a,s,u,c,f,l,d,h,p,v,g,m,y,b,w,S,E,x,C;return Pn(this,(function(A){switch(A.label){case 0:return r=t.signingDate,n=void 0===r?new Date:r,i=t.expiresIn,o=void 0===i?3600:i,a=t.unsignableHeaders,s=t.signableHeaders,u=t.signingRegion,c=t.signingService,[4,this.credentialProvider()];case 1:return f=A.sent(),null==u?[3,2]:(d=u,[3,4]);case 2:return[4,this.regionProvider()];case 3:d=A.sent(),A.label=4;case 4:return l=d,h=Wa(n),p=h.longDate,v=h.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=Ua(v,l,null!=c?c:this.service),m=function(e){var t,r,n="function"==typeof e.clone?e.clone():Ka(e),i=n.headers,o=n.query,a=void 0===o?{}:o;try{for(var s=jn(Object.keys(i)),u=s.next();!u.done;u=s.next()){var c=u.value;"x-amz-"===c.toLowerCase().substr(0,6)&&(a[c]=i[c],delete i[c])}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return Ln(Ln({},e),{headers:i,query:a})}(Ha(e)),f.sessionToken&&(m.query["X-Amz-Security-Token"]=f.sessionToken),m.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",m.query["X-Amz-Credential"]=f.accessKeyId+"/"+g,m.query["X-Amz-Date"]=p,m.query["X-Amz-Expires"]=o.toString(10),y=qa(m,a,s),m.query["X-Amz-SignedHeaders"]=Ga(y),b=m.query,w="X-Amz-Signature",S=this.getSignature,E=[p,g,this.getSigningKey(f,l,v,c)],x=this.createCanonicalRequest,C=[m,y],[4,Ba(e,this.sha256)]);case 5:return[4,S.apply(this,E.concat([x.apply(this,C.concat([A.sent()]))]))];case 6:return b[w]=A.sent(),[2,m]}}))}))},e.prototype.sign=function(e,t){return kn(this,void 0,void 0,(function(){return Pn(this,(function(r){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var r=e.headers,n=e.payload,i=t.signingDate,o=void 0===i?new Date:i,a=t.priorSignature,s=t.signingRegion,u=t.signingService;return kn(this,void 0,void 0,(function(){var e,t,i,c,f,l,d,h,p,v,g;return Pn(this,(function(m){switch(m.label){case 0:return null==s?[3,1]:(t=s,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=m.sent(),m.label=3;case 3:return e=t,i=Wa(o),c=i.shortDate,f=i.longDate,l=Ua(c,e,null!=u?u:this.service),[4,Ba({headers:{},body:n},this.sha256)];case 4:return d=m.sent(),(h=new this.sha256).update(r),v=fo,[4,h.digest()];case 5:return p=v.apply(void 0,[m.sent()]),g=[Ma,f,l,a,p,d].join("\n"),[2,this.signString(g,{signingDate:o,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var r=void 0===t?{}:t,n=r.signingDate,i=void 0===n?new Date:n,o=r.signingRegion,a=r.signingService;return kn(this,void 0,void 0,(function(){var t,r,n,s,u,c,f,l;return Pn(this,(function(d){switch(d.label){case 0:return[4,this.credentialProvider()];case 1:return t=d.sent(),null==o?[3,2]:(n=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:n=d.sent(),d.label=4;case 4:return r=n,s=Wa(i).shortDate,f=(c=this.sha256).bind,[4,this.getSigningKey(t,r,s,a)];case 5:return(u=new(f.apply(c,[void 0,d.sent()]))).update(e),l=fo,[4,u.digest()];case 6:return[2,l.apply(void 0,[d.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var r=void 0===t?{}:t,n=r.signingDate,i=void 0===n?new Date:n,o=r.signableHeaders,a=r.unsignableHeaders,s=r.signingRegion,u=r.signingService;return kn(this,void 0,void 0,(function(){var t,r,n,c,f,l,d,h,p,v,g;return Pn(this,(function(m){switch(m.label){case 0:return[4,this.credentialProvider()];case 1:return t=m.sent(),null==s?[3,2]:(n=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:n=m.sent(),m.label=4;case 4:return r=n,c=Ha(e),f=Wa(i),l=f.longDate,d=f.shortDate,h=Ua(d,r,null!=u?u:this.service),c.headers[ka]=l,t.sessionToken&&(c.headers[Ra]=t.sessionToken),[4,Ba(c,this.sha256)];case 5:return p=m.sent(),!function(e,t){var r,n;e=e.toLowerCase();try{for(var i=jn(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=p),v=qa(c,a,o),[4,this.getSignature(l,h,this.getSigningKey(t,r,d,u),this.createCanonicalRequest(c,v,p))];case 6:return g=m.sent(),c.headers.authorization="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+h+", SignedHeaders="+Ga(v)+", Signature="+g,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,r){var n=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,r,n=e.query,i=void 0===n?{}:n,o=[],a={},s=function(e){if(e.toLowerCase()===ja)return"continue";o.push(e);var t=i[e];"string"==typeof t?a[e]=ra(e)+"="+ra(t):Array.isArray(t)&&(a[e]=t.slice(0).sort().reduce((function(t,r){return t.concat([ra(e)+"="+ra(r)])}),[]).join("&"))};try{for(var u=jn(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())s(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return o.map((function(e){return a[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+n.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+n.join(";")+"\n"+r},e.prototype.createStringToSign=function(e,t,r){return kn(this,void 0,void 0,(function(){var n,i;return Pn(this,(function(o){switch(o.label){case 0:return(n=new this.sha256).update(r),[4,n.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+fo(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,r,n){return kn(this,void 0,void 0,(function(){var i,o,a,s,u;return Pn(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,n)];case 1:return i=c.sent(),s=(a=this.sha256).bind,[4,r];case 2:return(o=new(s.apply(a,[void 0,c.sent()]))).update(i),u=fo,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,r,n){return function(e,t,r,n,i){var o=r+":"+n+":"+i+":"+t.accessKeyId+":"+t.sessionToken;if(o in Da)return Da[o];for(za.push(o);za.length>50;)delete Da[za.shift()];return Da[o]=new Promise((function(a,s){var u,c,f=Promise.resolve("AWS4"+t.secretAccessKey),l=function(t){(f=f.then((function(r){return n=t,(i=new e(r)).update(n),i.digest();var n,i}))).catch((function(){}))};try{for(var d=jn([r,n,i,"aws4_request"]),h=d.next();!h.done;h=d.next())l(h.value)}catch(e){u={error:e}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}f.then(a,(function(e){delete Da[o],s(e)}))}))}(this.sha256,e,r,t,n||this.service)},e}(),Wa=function(e){var t=$a(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},Ga=function(e){return Object.keys(e).sort().join(";")},Ja=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Xa=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function Za(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}var Ya=function(e){return new Date(Date.now()+e)};function Qa(e){return function(t,r){return function(n){return kn(this,void 0,void 0,(function(){var i,o,a,s,u,c,f,l,d;return Pn(this,(function(h){switch(h.label){case 0:return Bn.isInstance(n.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(n)];case 1:return o=h.sent(),[3,3];case 2:o=e.signer,h.label=3;case 3:return i=o,s=t,u=[Ln({},n)],d={},[4,i.sign(n.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:r.signing_region,signingService:r.signing_service})];case 4:return[4,s.apply(void 0,[Ln.apply(void 0,u.concat([(d.request=h.sent(),d)]))])];case 5:return a=h.sent(),c=a.response.headers,(f=c&&(c.date||c.Date))&&(l=Date.parse(f),p=l,v=e.systemClockOffset,Math.abs(Ya(v).getTime()-p)>=3e5&&(e.systemClockOffset=l-Date.now())),[2,a]}var p,v}))}))}}}var es={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"};var ts={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},rs=function(e){return{applyToStack:function(t){var r;t.add((r=e,function(e){return function(t){var n=t.request;if(!Bn.isInstance(n))return e(t);var i=n.headers,o="node"===r.runtime?"user-agent":"x-amz-user-agent";return i[o]?i[o]+=" "+r.defaultUserAgent:i[o]=""+r.defaultUserAgent,r.customUserAgent&&(i[o]+=" "+r.customUserAgent),e(Ln(Ln({},t),{request:n}))}}),ts)}}},ns=function(){var e=[],t=[],r=new Set,n=function(r){return e.forEach((function(e){r.add(e.middleware,Ln({},e))})),t.forEach((function(e){r.addRelativeTo(e.middleware,Ln({},e))})),r},i=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Nn(i(e)))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Nn(i(e)))})),t},o=function(){var r,n=[],o=[],a={};return e.forEach((function(e){var t=Ln(Ln({},e),{before:[],after:[]});t.name&&(a[t.name]=t),n.push(t)})),t.forEach((function(e){var t=Ln(Ln({},e),{before:[],after:[]});t.name&&(a[t.name]=t),o.push(t)})),o.forEach((function(e){if(e.toMiddleware){var t=a[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(r=n,r.sort((function(e,t){return is[t.step]-is[e.step]||os[t.priority||"normal"]-os[e.priority||"normal"]}))).map(i).reduce((function(e,t){return e.push.apply(e,Nn(t)),e}),[]).map((function(e){return e.middleware}))},a={add:function(t,n){void 0===n&&(n={});var i=n.name,o=Ln({step:"initialize",priority:"normal",middleware:t},n);if(i){if(r.has(i))throw new Error("Duplicate middleware name '"+i+"'");r.add(i)}e.push(o)},addRelativeTo:function(e,n){var i=n.name,o=Ln({middleware:e},n);if(i){if(r.has(i))throw new Error("Duplicated middleware name '"+i+"'");r.add(i)}t.push(o)},clone:function(){return n(ns())},use:function(e){e.applyToStack(a)},remove:function(n){return"string"==typeof n?function(n){var i=!1,o=function(e){return!e.name||e.name!==n||(i=!0,r.delete(n),!1)};return e=e.filter(o),t=t.filter(o),i}(n):function(n){var i=!1,o=function(e){return e.middleware!==n||(i=!0,e.name&&r.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(n)},removeByTag:function(n){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(n)||(o&&r.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=n(ns());return t.use(e),t},applyToStack:n,resolve:function(e,t){var r,n;try{for(var i=jn(o().reverse()),a=i.next();!a.done;a=i.next()){e=(0,a.value)(e,t)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return e}};return a},is={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},os={high:3,normal:2,low:1},as=function(){function e(e){this.middlewareStack=ns(),this.config=e}return e.prototype.send=function(e,t,r){var n="function"!=typeof t?t:void 0,i="function"==typeof t?t:r,o=e.resolveMiddleware(this.middlewareStack,this.config,n);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),ss=function(){this.middlewareStack=ns()};function us(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}var cs=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=cs(e[t]));return e},fs=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,Nn([null],arguments)),r=new t;return Object.setPrototypeOf(r,e.prototype),r};fs.prototype=Object.create(String.prototype,{constructor:{value:fs,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(fs,String);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Tn(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(fs);var ls=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ds=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hs(e){var t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds();return ls[n]+", "+(i<10?"0"+i:""+i)+" "+ds[r]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(a<10?"0"+a:""+a)+":"+(s<10?"0"+s:""+s)+" GMT"}var ps="***SensitiveInformation***";var vs,gs,ms,ys,bs,ws,Ss,Es,xs,Cs,As,Ts,Ls,Os,ks,Ps,js,Rs,Ns,_s,Is,Ms,Ds,zs,Us,qs,Bs,Ks,Fs,Hs,$s,Vs,Ws,Gs,Js,Xs,Zs,Ys,Qs,eu,tu,ru,nu,iu,ou,au,su,uu,cu,fu,lu,du,hu,pu,vu,gu,mu,yu,bu,wu,Su,Eu,xu,Cu,Au,Tu,Lu,Ou,ku,Pu,ju,Ru,Nu,_u,Iu,Mu,Du,zu,Uu,qu,Bu,Ku,Fu,Hu,$u,Vu,Wu,Gu,Ju,Xu,Zu,Yu,Qu,ec,tc,rc,nc,ic,oc,ac,sc,uc,cc,fc,lc,dc,hc,pc,vc,gc,mc,yc,bc,wc,Sc,Ec,xc,Cc,Ac,Tc,Lc,Oc,kc,Pc,jc,Rc,Nc,_c,Ic,Mc,Dc,zc,Uc,qc,Bc,Kc,Fc,Hc,$c,Vc,Wc,Gc,Jc,Xc,Zc,Yc,Qc,ef,tf,rf,nf,of,af,sf,uf,cf,ff,lf,df,hf,pf,vf,gf,mf,yf,bf,wf,Sf,Ef,xf,Cf,Af,Tf,Lf,Of,kf,Pf,jf,Rf,Nf,_f,If,Mf,Df,zf,Uf,qf,Bf,Kf,Ff,Hf,$f,Vf,Wf,Gf,Jf,Xf,Zf,Yf,Qf,el,tl,rl,nl,il,ol,al,sl,ul,cl,fl,ll,dl,hl,pl,vl,gl,ml,yl,bl,wl,Sl,El,xl,Cl,Al,Tl,Ll,Ol,kl,Pl,jl,Rl,Nl,_l,Il,Ml,Dl,zl,Ul,ql,Bl,Kl,Fl,Hl,$l,Vl,Wl,Gl,Jl,Xl,Zl,Yl,Ql=Object.freeze({__proto__:null,S3Client:class extends as{constructor(e){let t=function(e){if(!e.region)throw new Error("Region is missing");return Ln(Ln({},e),{region:yi(e.region)})}({...ha,...e});var r,n;let i=function(e){var t,r=this,n=Za(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,a=e.systemClockOffset,s=void 0===a?e.systemClockOffset||0:a,u=e.sha256;return t=e.signer?Za(e.signer):function(){return Za(e.region)().then((function(t){return kn(r,void 0,void 0,(function(){return Pn(this,(function(r){switch(r.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[r.sent()||{},t]]}}))}))})).then((function(t){var r=Rn(t,2),i=r[0],a=r[1],s=i.signingRegion,c=void 0===s?e.signingRegion:s,f=i.signingService,l=void 0===f?e.signingName:f;return e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||l,new Va({credentials:n,region:e.signingRegion,service:e.signingName,sha256:u,uriEscapePath:o})}))},Ln(Ln({},e),{systemClockOffset:s,signingEscapePath:o,credentials:n,signer:t})}(Ln(Ln({},r=t),{tls:null===(n=r.tls)||void 0===n||n,endpoint:r.endpoint?vi(r):function(){return gi(r)},isCustomEndpoint:!!r.endpoint})),o=function(e){return Ln(Ln({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}(function(e){var t=e.bucketEndpoint,r=void 0!==t&&t,n=e.forcePathStyle,i=void 0!==n&&n,o=e.useAccelerateEndpoint,a=void 0!==o&&o,s=e.useDualstackEndpoint,u=void 0!==s&&s,c=e.useArnRegion,f=void 0!==c&&c;return Ln(Ln({},e),{bucketEndpoint:r,forcePathStyle:i,useAccelerateEndpoint:a,useDualstackEndpoint:u,useArnRegion:"function"==typeof f?f:function(){return Promise.resolve(f)}})}(ci(i)));var a;super(o),this.config=o,this.middlewareStack.use((a=this.config,{applyToStack:function(e){e.addRelativeTo(Qa(a),es)}})),this.middlewareStack.use(Un(this.config)),this.middlewareStack.use(rs(this.config)),this.middlewareStack.use(ya(this.config)),this.middlewareStack.use(Ta(this.config)),this.middlewareStack.use(Oa(this.config)),this.middlewareStack.use(wa(this.config)),this.middlewareStack.use(Ea(this.config)),this.middlewareStack.use(Ca(this.config))}destroy(){super.destroy()}}});!function(e){e.filterSensitiveLog=e=>({...e})}(vs||(vs={})),function(e){e.filterSensitiveLog=e=>({...e})}(gs||(gs={})),function(e){e.filterSensitiveLog=e=>({...e})}(ms||(ms={})),function(e){e.filterSensitiveLog=e=>({...e})}(ys||(ys={})),function(e){e.filterSensitiveLog=e=>({...e})}(bs||(bs={})),function(e){e.filterSensitiveLog=e=>({...e})}(ws||(ws={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ss||(Ss={})),function(e){e.filterSensitiveLog=e=>({...e})}(Es||(Es={})),function(e){e.filterSensitiveLog=e=>({...e})}(xs||(xs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cs||(Cs={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:ps}})}(As||(As={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ts||(Ts={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ls||(Ls={})),function(e){e.filterSensitiveLog=e=>({...e})}(Os||(Os={})),function(e){e.filterSensitiveLog=e=>({...e})}(ks||(ks={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ps},...e.SSEKMSKeyId&&{SSEKMSKeyId:ps}})}(Ps||(Ps={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ps},...e.SSECustomerKey&&{SSECustomerKey:ps},...e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:ps},...e.SSEKMSKeyId&&{SSEKMSKeyId:ps}})}(js||(js={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rs||(Rs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ns||(Ns={})),function(e){e.filterSensitiveLog=e=>({...e})}(_s||(_s={})),function(e){e.filterSensitiveLog=e=>({...e})}(Is||(Is={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ms||(Ms={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ds||(Ds={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ps},...e.SSEKMSKeyId&&{SSEKMSKeyId:ps}})}(zs||(zs={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:ps},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ps},...e.SSECustomerKey&&{SSECustomerKey:ps}})}(Us||(Us={})),function(e){e.filterSensitiveLog=e=>({...e})}(qs||(qs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bs||(Bs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ks||(Ks={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fs||(Fs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hs||(Hs={})),function(e){e.filterSensitiveLog=e=>({...e})}($s||($s={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vs||(Vs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ws||(Ws={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gs||(Gs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Js||(Js={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xs||(Xs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zs||(Zs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ys||(Ys={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qs||(Qs={})),function(e){e.filterSensitiveLog=e=>({...e})}(eu||(eu={})),function(e){e.filterSensitiveLog=e=>({...e})}(tu||(tu={})),function(e){e.filterSensitiveLog=e=>({...e})}(ru||(ru={})),function(e){e.filterSensitiveLog=e=>({...e})}(nu||(nu={})),function(e){e.filterSensitiveLog=e=>({...e})}(iu||(iu={})),function(e){e.filterSensitiveLog=e=>({...e})}(ou||(ou={})),function(e){e.filterSensitiveLog=e=>({...e})}(au||(au={})),function(e){e.filterSensitiveLog=e=>({...e})}(su||(su={})),function(e){e.filterSensitiveLog=e=>({...e})}(uu||(uu={})),function(e){e.filterSensitiveLog=e=>({...e})}(cu||(cu={})),function(e){e.filterSensitiveLog=e=>({...e})}(fu||(fu={})),function(e){e.filterSensitiveLog=e=>({...e})}(lu||(lu={})),function(e){e.filterSensitiveLog=e=>({...e})}(du||(du={})),function(e){e.filterSensitiveLog=e=>({...e})}(hu||(hu={})),function(e){e.filterSensitiveLog=e=>({...e})}(pu||(pu={})),function(e){e.filterSensitiveLog=e=>({...e})}(vu||(vu={})),function(e){e.filterSensitiveLog=e=>({...e})}(gu||(gu={})),function(e){e.filterSensitiveLog=e=>({...e})}(mu||(mu={})),function(e){e.filterSensitiveLog=e=>({...e})}(yu||(yu={})),function(e){e.filterSensitiveLog=e=>({...e})}(bu||(bu={})),function(e){e.filterSensitiveLog=e=>({...e})}(wu||(wu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Su||(Su={})),function(e){e.filterSensitiveLog=e=>({...e})}(Eu||(Eu={})),function(e){e.filterSensitiveLog=e=>({...e})}(xu||(xu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cu||(Cu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Au||(Au={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KMSMasterKeyID&&{KMSMasterKeyID:ps}})}(Tu||(Tu={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:Tu.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)}})}(Lu||(Lu={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>Lu.filterSensitiveLog(e)))}})}(Ou||(Ou={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Ou.filterSensitiveLog(e.ServerSideEncryptionConfiguration)}})}(ku||(ku={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pu||(Pu={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KeyId&&{KeyId:ps}})}(ju||(ju={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ru||(Ru={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMS&&{SSEKMS:ju.filterSensitiveLog(e.SSEKMS)}})}(Nu||(Nu={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Encryption&&{Encryption:Nu.filterSensitiveLog(e.Encryption)}})}(_u||(_u={})),function(e){e.filterSensitiveLog=e=>({...e,...e.S3BucketDestination&&{S3BucketDestination:_u.filterSensitiveLog(e.S3BucketDestination)}})}(Iu||(Iu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mu||(Mu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Du||(Du={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Destination&&{Destination:Iu.filterSensitiveLog(e.Destination)}})}(zu||(zu={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:zu.filterSensitiveLog(e.InventoryConfiguration)}})}(Uu||(Uu={})),function(e){e.filterSensitiveLog=e=>({...e})}(qu||(qu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bu||(Bu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ku||(Ku={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fu||(Fu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hu||(Hu={})),function(e){e.filterSensitiveLog=e=>({...e})}($u||($u={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vu||(Vu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wu||(Wu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gu||(Gu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ju||(Ju={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xu||(Xu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zu||(Zu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yu||(Yu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qu||(Qu={})),function(e){e.filterSensitiveLog=e=>({...e})}(ec||(ec={})),function(e){e.filterSensitiveLog=e=>({...e})}(tc||(tc={})),function(e){e.filterSensitiveLog=e=>({...e})}(rc||(rc={})),function(e){e.filterSensitiveLog=e=>({...e})}(nc||(nc={})),function(e){e.filterSensitiveLog=e=>({...e})}(ic||(ic={})),function(e){e.filterSensitiveLog=e=>({...e})}(oc||(oc={})),function(e){e.filterSensitiveLog=e=>({...e})}(ac||(ac={})),function(e){e.filterSensitiveLog=e=>({...e})}(sc||(sc={})),function(e){e.filterSensitiveLog=e=>({...e})}(uc||(uc={})),function(e){e.filterSensitiveLog=e=>({...e})}(cc||(cc={})),function(e){e.filterSensitiveLog=e=>({...e})}(fc||(fc={})),function(e){e.filterSensitiveLog=e=>({...e})}(lc||(lc={})),function(e){e.filterSensitiveLog=e=>({...e})}(dc||(dc={})),function(e){e.filterSensitiveLog=e=>({...e})}(hc||(hc={})),function(e){e.filterSensitiveLog=e=>({...e})}(pc||(pc={})),function(e){e.filterSensitiveLog=e=>({...e})}(vc||(vc={})),function(e){e.filterSensitiveLog=e=>({...e})}(gc||(gc={})),function(e){e.filterSensitiveLog=e=>({...e})}(mc||(mc={})),function(e){e.filterSensitiveLog=e=>({...e})}(yc||(yc={})),function(e){e.filterSensitiveLog=e=>({...e})}(bc||(bc={})),function(e){e.filterSensitiveLog=e=>({...e})}(wc||(wc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Sc||(Sc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ec||(Ec={})),function(e){e.filterSensitiveLog=e=>({...e})}(xc||(xc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cc||(Cc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ac||(Ac={})),function(e){e.filterSensitiveLog=e=>({...e})}(Tc||(Tc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Lc||(Lc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Oc||(Oc={})),function(e){e.filterSensitiveLog=e=>({...e})}(kc||(kc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pc||(Pc={})),function(e){e.filterSensitiveLog=e=>({...e})}(jc||(jc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rc||(Rc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nc||(Nc={})),function(e){e.filterSensitiveLog=e=>({...e})}(_c||(_c={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ic||(Ic={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mc||(Mc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Dc||(Dc={})),function(e){e.filterSensitiveLog=e=>({...e})}(zc||(zc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Uc||(Uc={})),function(e){e.filterSensitiveLog=e=>({...e})}(qc||(qc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bc||(Bc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Kc||(Kc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fc||(Fc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hc||(Hc={})),function(e){e.filterSensitiveLog=e=>({...e})}($c||($c={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vc||(Vc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wc||(Wc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gc||(Gc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Jc||(Jc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xc||(Xc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zc||(Zc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yc||(Yc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:ps}})}(Qc||(Qc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:ps}})}(ef||(ef={})),function(e){e.filterSensitiveLog=e=>({...e})}(tf||(tf={})),function(e){e.filterSensitiveLog=e=>({...e})}(rf||(rf={})),function(e){e.filterSensitiveLog=e=>({...e})}(nf||(nf={})),function(e){e.filterSensitiveLog=e=>({...e})}(of||(of={})),function(e){e.filterSensitiveLog=e=>({...e})}(af||(af={})),function(e){e.filterSensitiveLog=e=>({...e})}(sf||(sf={})),function(e){e.filterSensitiveLog=e=>({...e})}(uf||(uf={})),function(e){e.filterSensitiveLog=e=>({...e})}(cf||(cf={})),function(e){e.filterSensitiveLog=e=>({...e})}(ff||(ff={})),function(e){e.filterSensitiveLog=e=>({...e})}(lf||(lf={})),function(e){e.filterSensitiveLog=e=>({...e})}(df||(df={})),function(e){e.filterSensitiveLog=e=>({...e})}(hf||(hf={})),function(e){e.filterSensitiveLog=e=>({...e})}(pf||(pf={})),function(e){e.filterSensitiveLog=e=>({...e})}(vf||(vf={})),function(e){e.filterSensitiveLog=e=>({...e})}(gf||(gf={})),function(e){e.filterSensitiveLog=e=>({...e})}(mf||(mf={})),function(e){e.filterSensitiveLog=e=>({...e})}(yf||(yf={})),function(e){e.filterSensitiveLog=e=>({...e})}(bf||(bf={})),function(e){e.filterSensitiveLog=e=>({...e})}(wf||(wf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Sf||(Sf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ef||(Ef={})),function(e){e.filterSensitiveLog=e=>({...e})}(xf||(xf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cf||(Cf={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:ps}})}(Af||(Af={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:ps}})}(Tf||(Tf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Lf||(Lf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Of||(Of={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map((e=>zu.filterSensitiveLog(e)))}})}(kf||(kf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pf||(Pf={})),function(e){e.filterSensitiveLog=e=>({...e})}(jf||(jf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rf||(Rf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nf||(Nf={})),function(e){e.filterSensitiveLog=e=>({...e})}(_f||(_f={})),function(e){e.filterSensitiveLog=e=>({...e})}(If||(If={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mf||(Mf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Df||(Df={})),function(e){e.filterSensitiveLog=e=>({...e})}(zf||(zf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Uf||(Uf={})),function(e){e.filterSensitiveLog=e=>({...e})}(qf||(qf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bf||(Bf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Kf||(Kf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ff||(Ff={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hf||(Hf={})),function(e){e.filterSensitiveLog=e=>({...e})}($f||($f={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vf||(Vf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wf||(Wf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gf||(Gf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Jf||(Jf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xf||(Xf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zf||(Zf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yf||(Yf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qf||(Qf={})),function(e){e.filterSensitiveLog=e=>({...e})}(el||(el={})),function(e){e.filterSensitiveLog=e=>({...e})}(tl||(tl={})),function(e){e.filterSensitiveLog=e=>({...e})}(rl||(rl={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Ou.filterSensitiveLog(e.ServerSideEncryptionConfiguration)}})}(nl||(nl={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:zu.filterSensitiveLog(e.InventoryConfiguration)}})}(il||(il={})),function(e){e.filterSensitiveLog=e=>({...e})}(ol||(ol={})),function(e){e.filterSensitiveLog=e=>({...e})}(al||(al={})),function(e){e.filterSensitiveLog=e=>({...e})}(sl||(sl={})),function(e){e.filterSensitiveLog=e=>({...e})}(ul||(ul={})),function(e){e.filterSensitiveLog=e=>({...e})}(cl||(cl={})),function(e){e.filterSensitiveLog=e=>({...e})}(fl||(fl={})),function(e){e.filterSensitiveLog=e=>({...e})}(ll||(ll={})),function(e){e.filterSensitiveLog=e=>({...e})}(dl||(dl={})),function(e){e.filterSensitiveLog=e=>({...e})}(hl||(hl={})),function(e){e.filterSensitiveLog=e=>({...e})}(pl||(pl={})),function(e){e.filterSensitiveLog=e=>({...e})}(vl||(vl={})),function(e){e.filterSensitiveLog=e=>({...e})}(gl||(gl={})),function(e){e.filterSensitiveLog=e=>({...e})}(ml||(ml={})),function(e){e.filterSensitiveLog=e=>({...e})}(yl||(yl={})),function(e){e.filterSensitiveLog=e=>({...e})}(bl||(bl={})),function(e){e.filterSensitiveLog=e=>({...e})}(wl||(wl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Sl||(Sl={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ps},...e.SSEKMSKeyId&&{SSEKMSKeyId:ps}})}(El||(El={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:ps},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ps},...e.SSEKMSKeyId&&{SSEKMSKeyId:ps}})}(xl||(xl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cl||(Cl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Al||(Al={})),function(e){e.filterSensitiveLog=e=>({...e})}(Tl||(Tl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ll||(Ll={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ol||(Ol={})),function(e){e.filterSensitiveLog=e=>({...e})}(kl||(kl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pl||(Pl={})),function(e){e.filterSensitiveLog=e=>({...e})}(jl||(jl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rl||(Rl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nl||(Nl={})),function(e){e.filterSensitiveLog=e=>({...e})}(_l||(_l={})),function(e){e.filterSensitiveLog=e=>({...e})}(Il||(Il={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ml||(Ml={})),function(e){e.filterSensitiveLog=e=>({...e})}(Dl||(Dl={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KMSKeyId&&{KMSKeyId:ps}})}(zl||(zl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ul||(Ul={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Encryption&&{Encryption:zl.filterSensitiveLog(e.Encryption)}})}(ql||(ql={})),function(e){e.filterSensitiveLog=e=>({...e,...e.S3&&{S3:ql.filterSensitiveLog(e.S3)}})}(Bl||(Bl={})),function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"}(Kl||(Kl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fl||(Fl={})),function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"}(Hl||(Hl={})),function(e){e.filterSensitiveLog=e=>({...e})}($l||($l={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vl||(Vl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wl||(Wl={})),function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"}(Gl||(Gl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Jl||(Jl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xl||(Xl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zl||(Zl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yl||(Yl={}));var ed=re((function(e,t){const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+n+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,r){if(t){const n=Object.keys(t),i=n.length;for(let o=0;o<i;o++)e[n[o]]="strict"===r?[t[n[o]]]:t[n[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,r){var n={};if(!e)return t;for(let i=0;i<r.length;i++)void 0!==e[r[i]]?n[r[i]]=e[r[i]]:n[r[i]]=t[r[i]];return n},t.isName=function(e){const t=i.exec(e);return!(null==t)},t.getAllMatches=function(e,t){const r=[];let n=t.exec(e);for(;n;){const i=[],o=n.length;for(let e=0;e<o;e++)i.push(n[e]);r.push(i),n=t.exec(e)}return r},t.nameRegexp=n}));const td=function(e,t){const r={};if(!(e.child&&!ed.isEmptyObject(e.child)||e.attrsMap&&!ed.isEmptyObject(e.attrsMap)))return ed.isExist(e.val)?e.val:"";ed.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&("strict"===t.arrayMode?r[t.textNodeName]=[e.val]:r[t.textNodeName]=e.val),ed.merge(r,e.attrsMap,t.arrayMode);const n=Object.keys(e.child);for(let a=0;a<n.length;a++){var i=n[a];if(e.child[i]&&e.child[i].length>1)for(var o in r[i]=[],e.child[i])r[i].push(td(e.child[i][o],t));else if(!0===t.arrayMode){const n=td(e.child[i][0],t);r[i]="object"==typeof n?[n]:n}else"strict"===t.arrayMode?r[i]=[td(e.child[i][0],t)]:r[i]=td(e.child[i][0],t)}return r};var rd={convertToJson:td},nd=function(e,t,r){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=r,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}};const id=ed.buildOptions;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,ed.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const od={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};var ad=od;const sd=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];var ud=sd;function cd(e,t,r){return t&&(r.trimValues&&(t=t.trim()),t=ld(t=r.tagValueProcessor(t,e),r.parseNodeValue,r.parseTrueNumberOnly)),t}function fd(e,t){if(t.ignoreNameSpace){const t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}function ld(e,t,r){if(t&&"string"==typeof e){let t;return""===e.trim()||isNaN(e)?t="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?t=Number.parseInt(e,16):-1!==e.indexOf(".")?(t=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):t=Number.parseInt(e,10),r&&(t=String(t)===e?t:e)),t}return ed.isExist(e)?e:""}const dd=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function hd(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const r=ed.getAllMatches(e,dd),n=r.length,i={};for(let e=0;e<n;e++){const n=fd(r[e][1],t);n.length&&(void 0!==r[e][4]?(t.trimValues&&(r[e][4]=r[e][4].trim()),r[e][4]=t.attrValueProcessor(r[e][4],n),i[t.attributeNamePrefix+n]=ld(r[e][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(i[t.attributeNamePrefix+n]=!0))}if(!Object.keys(i).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=i,e}return i}}function pd(e,t){let r,n="";for(let i=t;i<e.length;i++){let t=e[i];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else{if(">"===t)return{data:n,index:i};"\t"===t&&(t=" ")}n+=t}}function vd(e,t,r,n){const i=e.indexOf(t,r);if(-1===i)throw new Error(n);return i+t.length-1}var gd={defaultOptions:ad,props:ud,getTraversalObj:function(e,t){e=e.replace(/(\r\n)|\n/," "),t=id(t,od,sd);const r=new nd("!xml");let n=r,i="";for(let r=0;r<e.length;r++){if("<"===e[r])if("/"===e[r+1]){const o=vd(e,">",r,"Closing Tag is not closed.");let a=e.substring(r+2,o).trim();if(t.ignoreNameSpace){const e=a.indexOf(":");-1!==e&&(a=a.substr(e+1))}n&&(n.val?n.val=ed.getValue(n.val)+""+cd(a,i,t):n.val=cd(a,i,t)),t.stopNodes.length&&t.stopNodes.includes(n.tagname)&&(n.child=[],null==n.attrsMap&&(n.attrsMap={}),n.val=e.substr(n.startIndex+1,r-n.startIndex-1)),n=n.parent,i="",r=o}else if("?"===e[r+1])r=vd(e,"?>",r,"Pi Tag is not closed.");else if("!--"===e.substr(r+1,3))r=vd(e,"--\x3e",r,"Comment is not closed.");else if("!D"===e.substr(r+1,2)){const t=vd(e,">",r,"DOCTYPE is not closed.");r=e.substring(r,t).indexOf("[")>=0?e.indexOf("]>",r)+1:t}else if("!["===e.substr(r+1,2)){const o=vd(e,"]]>",r,"CDATA is not closed.")-2,a=e.substring(r+9,o);if(i&&(n.val=ed.getValue(n.val)+""+cd(n.tagname,i,t),i=""),t.cdataTagName){const e=new nd(t.cdataTagName,n,a);n.addChild(e),n.val=ed.getValue(n.val)+t.cdataPositionChar,a&&(e.val=a)}else n.val=(n.val||"")+(a||"");r=o+2}else{const o=pd(e,r+1);let a=o.data;const s=o.index,u=a.indexOf(" ");let c=a;if(-1!==u&&(c=a.substr(0,u).trimRight(),a=a.substr(u+1)),t.ignoreNameSpace){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1))}if(n&&i&&"!xml"!==n.tagname&&(n.val=ed.getValue(n.val)+""+cd(n.tagname,i,t)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===c[c.length-1]?(c=c.substr(0,c.length-1),a=c):a=a.substr(0,a.length-1);const e=new nd(c,n,"");c!==a&&(e.attrsMap=hd(a,t)),n.addChild(e)}else{const e=new nd(c,n);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=s),c!==a&&(e.attrsMap=hd(a,t)),n.addChild(e),n=e}i="",r=s}else i+=e[r]}return r}};const md={allowBooleanAttributes:!1},yd=["allowBooleanAttributes"];function bd(e,t){for(var r=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var n=e.substr(r,t-r);if(t>5&&"xml"===n)return Ad("InvalidXml","XML declaration allowed only at the start of the document.",Ld(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function wd(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&(r--,0===r))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function Sd(e,t){let r="",n="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===n)n=e[t];else{if(n!==e[t])continue;n=""}else if(">"===e[t]&&""===n){i=!0;break}r+=e[t]}return""===n&&{value:r,index:t,tagClosed:i}}const Ed=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function xd(e,t){const r=ed.getAllMatches(e,Ed),n={};for(let i=0;i<r.length;i++){if(0===r[i][1].length)return Ad("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",Od(e,r[i][0]));if(void 0===r[i][3]&&!t.allowBooleanAttributes)return Ad("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",Od(e,r[i][0]));const o=r[i][2];if(!Td(o))return Ad("InvalidAttr","Attribute '"+o+"' is an invalid name.",Od(e,r[i][0]));if(n.hasOwnProperty(o))return Ad("InvalidAttr","Attribute '"+o+"' is repeated.",Od(e,r[i][0]));n[o]=1}return!0}function Cd(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}(e,++t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}function Ad(e,t,r){return{err:{code:e,msg:t,line:r}}}function Td(e){return ed.isName(e)}function Ld(e,t){return e.substring(0,t).split(/\r?\n/).length}function Od(e,t){return e.indexOf(t)+t.length}var kd=function(e,t){t=ed.buildOptions(t,md,yd);const r=[];let n=!1,i=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let a=0;a<e.length;a++){if("<"!==e[a]){if(" "===e[a]||"\t"===e[a]||"\n"===e[a]||"\r"===e[a])continue;return Ad("InvalidChar","char '"+e[a]+"' is not expected.",Ld(e,a))}if(a++,"?"===e[a]){if(a=bd(e,++a),a.err)return a}else{if("!"===e[a]){a=wd(e,a);continue}{let s=!1;"/"===e[a]&&(s=!0,a++);let u="";for(;a<e.length&&">"!==e[a]&&" "!==e[a]&&"\t"!==e[a]&&"\n"!==e[a]&&"\r"!==e[a];a++)u+=e[a];if(u=u.trim(),"/"===u[u.length-1]&&(u=u.substring(0,u.length-1),a--),o=u,!ed.isName(o)){let t;return t=0===u.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+u+"' is an invalid name.",Ad("InvalidTag",t,Ld(e,a))}const c=Sd(e,a);if(!1===c)return Ad("InvalidAttr","Attributes for '"+u+"' have open quote.",Ld(e,a));let f=c.value;if(a=c.index,"/"===f[f.length-1]){f=f.substring(0,f.length-1);const r=xd(f,t);if(!0!==r)return Ad(r.err.code,r.err.msg,Ld(e,a-f.length+r.err.line));n=!0}else if(s){if(!c.tagClosed)return Ad("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",Ld(e,a));if(f.trim().length>0)return Ad("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",Ld(e,a));{const t=r.pop();if(u!==t)return Ad("InvalidTag","Closing tag '"+t+"' is expected inplace of '"+u+"'.",Ld(e,a));0==r.length&&(i=!0)}}else{const o=xd(f,t);if(!0!==o)return Ad(o.err.code,o.err.msg,Ld(e,a-f.length+o.err.line));if(!0===i)return Ad("InvalidXml","Multiple possible root nodes found.",Ld(e,a));r.push(u),n=!0}for(a++;a<e.length;a++){if("<"===e[a]){if("!"===e[a+1]){a++,a=wd(e,a);continue}break}if("&"===e[a]){const t=Cd(e,a);if(-1==t)return Ad("InvalidChar","char '&' is not expected.",Ld(e,a));a=t}}"<"===e[a]&&a--}}}var o;return n?!(r.length>0)||Ad("InvalidXml","Invalid '"+JSON.stringify(r,null,4).replace(/\r?\n/g,"")+"' found.",1):Ad("InvalidXml","Start tag expected.",1)};const Pd=function(e){return String.fromCharCode(e)},jd={nilChar:Pd(176),missingChar:Pd(201),nilPremitive:Pd(175),missingPremitive:Pd(200),emptyChar:Pd(178),emptyValue:Pd(177),boundryChar:Pd(179),objStart:Pd(198),arrStart:Pd(204),arrayEnd:Pd(185)},Rd=[jd.nilChar,jd.nilPremitive,jd.missingChar,jd.missingPremitive,jd.boundryChar,jd.emptyChar,jd.emptyValue,jd.arrayEnd,jd.objStart,jd.arrStart],Nd=function(e,t,r){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?_d(e[0].val):_d(e);{const i=void 0===(n=e)?jd.missingChar:null===n?jd.nilChar:!(n.child&&0===Object.keys(n.child).length&&(!n.attrsMap||0===Object.keys(n.attrsMap).length))||jd.emptyChar;if(!0===i){let n="";if(Array.isArray(t)){n+=jd.arrStart;const i=t[0],o=e.length;if("string"==typeof i)for(let t=0;t<o;t++){const r=_d(e[t].val);n=Id(n,r)}else for(let t=0;t<o;t++){const o=Nd(e[t],i,r);n=Id(n,o)}n+=jd.arrayEnd}else{n+=jd.objStart;const i=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let o in i){const a=i[o];let s;s=!r.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?Nd(e.attrsMap[a],t[a],r):a===r.textNodeName?Nd(e.val,t[a],r):Nd(e.child[a],t[a],r),n=Id(n,s)}}return n}return i}var n},_d=function(e){switch(e){case void 0:return jd.missingPremitive;case null:return jd.nilPremitive;case"":return jd.emptyValue;default:return e}},Id=function(e,t){return Md(t[0])||Md(e[e.length-1])||(e+=jd.boundryChar),e+t},Md=function(e){return-1!==Rd.indexOf(e)};const Dd=ed.buildOptions;var zd={convert2nimn:function(e,t,r){return r=Dd(r,gd.defaultOptions,gd.props),Nd(e,t,r)}};const Ud=ed.buildOptions,qd=function(e,t,r){let n="{";const i=Object.keys(e.child);for(let r=0;r<i.length;r++){var o=i[r];if(e.child[o]&&e.child[o].length>1){for(var a in n+='"'+o+'" : [ ',e.child[o])n+=qd(e.child[o][a],t)+" , ";n=n.substr(0,n.length-1)+" ] "}else n+='"'+o+'" : '+qd(e.child[o][0],t)+" ,"}return ed.merge(n,e.attrsMap),ed.isEmptyObject(n)?ed.isExist(e.val)?e.val:"":(ed.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(n+='"'+t.textNodeName+'" : '+(!0!==(s=e.val)&&!1!==s&&isNaN(s)?'"'+s+'"':s)),","===n[n.length-1]&&(n=n.substr(0,n.length-2)),n+"}");var s};var Bd={convertToJsonString:function(e,t){return(t=Ud(t,gd.defaultOptions,gd.props)).indentBy=t.indentBy||"",qd(e,t)}};const Kd=ed.buildOptions,Fd={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},Hd=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function $d(e){this.options=Kd(e,Fd,Hd),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Qd),this.options.cdataTagName?this.isCDATA=eh:this.isCDATA=function(){return!1},this.replaceCDATAstr=Vd,this.replaceCDATAarr=Wd,this.options.format?(this.indentate=Yd,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=Zd,this.buildObjNode=Jd):(this.buildTextNode=Xd,this.buildObjNode=Gd),this.buildTextValNode=Xd,this.buildObjectNode=Gd}function Vd(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function Wd(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[r]+"]]>");return e+this.newLine}function Gd(e,t,r,n){return r&&!e.includes("<")?this.indentate(n)+"<"+t+r+">"+e+"</"+t+this.tagEndChar:this.indentate(n)+"<"+t+r+this.tagEndChar+e+this.indentate(n)+"</"+t+this.tagEndChar}function Jd(e,t,r,n){return""!==e?this.buildObjectNode(e,t,r,n):this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function Xd(e,t,r,n){return this.indentate(n)+"<"+t+r+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function Zd(e,t,r,n){return""!==e?this.buildTextValNode(e,t,r,n):this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function Yd(e){return this.options.indentBy.repeat(e)}function Qd(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function eh(e){return e===this.options.cdataTagName}$d.prototype.parse=function(e){return this.j2x(e,0).val},$d.prototype.j2x=function(e,t){let r="",n="";const i=Object.keys(e),o=i.length;for(let a=0;a<o;a++){const o=i[a];if(void 0===e[o]);else if(null===e[o])n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextNode(e[o],o,"",t);else if("object"!=typeof e[o]){const i=this.isAttribute(o);i?r+=" "+i+'="'+this.options.attrValueProcessor(""+e[o])+'"':this.isCDATA(o)?e[this.options.textNodeName]?n+=this.replaceCDATAstr(e[this.options.textNodeName],e[o]):n+=this.replaceCDATAstr("",e[o]):o===this.options.textNodeName?e[this.options.cdataTagName]||(n+=this.options.tagValueProcessor(""+e[o])):n+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o]))if(this.isCDATA(o))n+=this.indentate(t),e[this.options.textNodeName]?n+=this.replaceCDATAarr(e[this.options.textNodeName],e[o]):n+=this.replaceCDATAarr("",e[o]);else{const r=e[o].length;for(let i=0;i<r;i++){const r=e[o][i];if(void 0===r);else if(null===r)n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if("object"==typeof r){const e=this.j2x(r,t+1);n+=this.buildObjNode(e.val,o,e.attrStr,t)}else n+=this.buildTextNode(r,o,"",t)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const t=Object.keys(e[o]),n=t.length;for(let i=0;i<n;i++)r+=" "+t[i]+'="'+this.options.attrValueProcessor(""+e[o][t[i]])+'"'}else{const r=this.j2x(e[o],t+1);n+=this.buildObjNode(r.val,o,r.attrStr,t)}}return{attrStr:r,val:n}};var th=$d,rh=re((function(e,t){const r=gd,n=ed.buildOptions;t.parse=function(e,t,i){if(i){!0===i&&(i={});const t=kd(e,i);if(!0!==t)throw Error(t.err.msg)}t=n(t,r.defaultOptions,r.props);const o=gd.getTraversalObj(e,t);return rd.convertToJson(o,t)},t.convertTonimn=zd.convert2nimn,t.getTraversalObj=gd.getTraversalObj,t.convertToJson=rd.convertToJson,t.convertToJsonString=Bd.convertToJsonString,t.validate=kd,t.j2xParser=th,t.parseToNimn=function(e,r,n){return t.convertTonimn(t.getTraversalObj(e,n),r,n)}}));const nh=async(e,t)=>{const r={...e,body:await ch(e.body,t)};let n,i="UnknownError";switch(i=fh(e,r.body),i){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":n={...await oh(r),name:i,$metadata:ah(e)};break;default:const t=r.body;i=t.code||t.Code||i,n={...t,name:""+i,message:t.message||t.Message||i,$fault:"client",$metadata:ah(e)}}const o=n.message||n.Message||i;return n.message=o,delete n.Message,Promise.reject(Object.assign(new Error(o),n))},ih=async(e,t)=>{const r={...e,body:await ch(e.body,t)};let n,i="UnknownError";i=fh(e,r.body);{const t=r.body;i=t.code||t.Code||i,n={...t,name:""+i,message:t.message||t.Message||i,$fault:"client",$metadata:ah(e)}}const o=n.message||n.Message||i;return n.message=o,delete n.Message,Promise.reject(Object.assign(new Error(o),n))},oh=async(e,t)=>{const r={name:"NoSuchKey",$fault:"client",$metadata:ah(e)};e.body;return r},ah=e=>({httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}),sh=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),uh=e=>!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size),ch=(e,t)=>((e,t)=>sh(e,t).then((e=>t.utf8Encoder(e))))(e,t).then((e=>{if(e.length){const t=rh.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:(e,t)=>e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}),r="#text",n=Object.keys(t)[0],i=t[n];return i[r]&&(i[n]=i[r],delete i[r]),cs(i)}return{}})),fh=(e,t)=>void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":"";var lh={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},dh={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]};function hh(e,t,r){return{applyToStack:function(n){n.add(function(e,t){return function(r,n){return function(i){return kn(void 0,void 0,void 0,(function(){var o,a,s,u,c;return Pn(this,(function(f){switch(f.label){case 0:return o=n.logger,a=n.outputFilterSensitiveLog,[4,r(i)];case 1:return s=f.sent().response,"function"==typeof(null==o?void 0:o.debug)&&o.debug({httpResponse:s}),[4,t(s,e)];case 2:return(u=f.sent()).$metadata,c=On(u,["$metadata"]),"function"==typeof(null==o?void 0:o.info)&&o.info({output:a(c)}),[2,{response:s,output:u}]}}))}))}}}(e,r),lh),n.add(function(e,t){return function(r,n){return function(i){return kn(void 0,void 0,void 0,(function(){var o,a,s;return Pn(this,(function(u){switch(u.label){case 0:return o=n.logger,a=n.inputFilterSensitiveLog,"function"==typeof(null==o?void 0:o.info)&&o.info({input:a(i.input)}),[4,t(i.input,e)];case 1:return s=u.sent(),"function"==typeof(null==o?void 0:o.debug)&&o.debug({httpRequest:s}),[2,r(Ln(Ln({},i),{request:s}))]}}))}))}}}(e,t),dh)}}}var ph={name:"ssecMiddleware",step:"initialize",tags:["SSE"]},vh=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(r){return function(n){return kn(t,void 0,void 0,(function(){var t,i,o,a,s,u,c,f,l,d,h,p,v,g,m,y,b;return Pn(this,(function(w){switch(w.label){case 0:t=Ln({},n.input),i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],w.label=1;case 1:w.trys.push([1,6,7,8]),o=jn(i),a=o.next(),w.label=2;case 2:return a.done?[3,5]:(s=a.value,(u=t[s.target])?(c=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):"string"==typeof u?e.utf8Decoder(u):new Uint8Array(u),f=e.base64Encoder(c),(l=new e.md5).update(c),d=[Ln({},t)],(b={})[s.target]=f,h=s.hash,v=(p=e).base64Encoder,[4,l.digest()]):[3,4]);case 3:t=Ln.apply(void 0,d.concat([(b[h]=v.apply(p,[w.sent()]),b)])),w.label=4;case 4:return a=o.next(),[3,2];case 5:return[3,8];case 6:return g=w.sent(),m={error:g},[3,8];case 7:try{a&&!a.done&&(y=o.return)&&y.call(o)}finally{if(m)throw m.error}return[7];case 8:return[2,r(Ln(Ln({},n),{input:t}))]}}))}))}}}(e),ph)}}};var gh=Object.freeze({__proto__:null,PutObjectCommand:class extends ss{constructor(e){super(),this.input=e}resolveMiddleware(e,t,r){this.middlewareStack.use(hh(t,this.serialize,this.deserialize)),this.middlewareStack.use(vh(t)),this.middlewareStack.use(Yo(t));const n=e.concat(this.middlewareStack),{logger:i}=t,o={logger:i,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:xl.filterSensitiveLog,outputFilterSensitiveLog:El.filterSensitiveLog},{requestHandler:a}=t;return n.resolve((e=>a.handle(e.request,r||{})),o)}serialize(e,t){return(async(e,t)=>{const r={"Content-Type":"application/octet-stream",...uh(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl},...uh(e.ContentEncoding)&&{"Content-Encoding":e.ContentEncoding},...uh(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer},...uh(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP},...uh(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":e.SSECustomerKeyMD5},...uh(e.CacheControl)&&{"Cache-Control":e.CacheControl},...uh(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation},...uh(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus},...uh(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP},...uh(e.ContentLength)&&{"Content-Length":e.ContentLength.toString()},...uh(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()},...uh(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm},...uh(e.ContentDisposition)&&{"Content-Disposition":e.ContentDisposition},...uh(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey},...uh(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext},...uh(e.Tagging)&&{"x-amz-tagging":e.Tagging},...uh(e.Expires)&&{Expires:hs(e.Expires).toString()},...uh(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass},...uh(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner},...uh(e.ContentMD5)&&{"Content-MD5":e.ContentMD5},...uh(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption},...uh(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode},...uh(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId},...uh(e.ContentLanguage)&&{"Content-Language":e.ContentLanguage},...uh(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead},...uh(e.ACL)&&{"x-amz-acl":e.ACL},...uh(e.ContentType)&&{"Content-Type":e.ContentType},...void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(((t,r)=>(t["x-amz-meta-"+r]=e.Metadata[r],t)),{})};let n,i,o="/{Bucket}/{Key+}";if(void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");{const t=e.Bucket;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");o=o.replace("{Bucket}",us(t))}if(void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");{const t=e.Key;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");o=o.replace("{Key+}",t.split("/").map((e=>us(e))).join("/"))}void 0!==e.Body&&(i=e.Body,n=i);const{hostname:a,protocol:s="https",port:u}=await t.endpoint();return new Bn({protocol:s,hostname:a,port:u,method:"PUT",headers:r,path:o,query:{"x-id":"PutObject"},body:n})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return ih(e,t);const r={$metadata:ah(e),ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0};return void 0!==e.headers["x-amz-server-side-encryption-context"]&&(r.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-expiration"]&&(r.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers.etag&&(r.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-version-id"]&&(r.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(r.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),await sh(e.body,t),Promise.resolve(r)})(e,t)}}});var mh=Object.freeze({__proto__:null,GetObjectCommand:class extends ss{constructor(e){super(),this.input=e}resolveMiddleware(e,t,r){this.middlewareStack.use(hh(t,this.serialize,this.deserialize)),this.middlewareStack.use(vh(t)),this.middlewareStack.use(Yo(t));const n=e.concat(this.middlewareStack),{logger:i}=t,o={logger:i,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:ef.filterSensitiveLog,outputFilterSensitiveLog:Qc.filterSensitiveLog},{requestHandler:a}=t;return n.resolve((e=>a.handle(e.request,r||{})),o)}serialize(e,t){return(async(e,t)=>{const r={"Content-Type":"",...uh(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey},...uh(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm},...uh(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":e.SSECustomerKeyMD5},...uh(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer},...uh(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner},...uh(e.IfUnmodifiedSince)&&{"If-Unmodified-Since":hs(e.IfUnmodifiedSince).toString()},...uh(e.IfModifiedSince)&&{"If-Modified-Since":hs(e.IfModifiedSince).toString()},...uh(e.IfNoneMatch)&&{"If-None-Match":e.IfNoneMatch},...uh(e.IfMatch)&&{"If-Match":e.IfMatch},...uh(e.Range)&&{Range:e.Range}};let n="/{Bucket}/{Key+}";if(void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");{const t=e.Bucket;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",us(t))}if(void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");{const t=e.Key;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",t.split("/").map((e=>us(e))).join("/"))}const i={"x-id":"GetObject",...void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding},...void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl},...void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage},...void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition},...void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()},...void 0!==e.VersionId&&{versionId:e.VersionId},...void 0!==e.ResponseExpires&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()},...void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}},{hostname:o,protocol:a="https",port:s}=await t.endpoint();return new Bn({protocol:a,hostname:o,port:s,method:"GET",headers:r,path:n,query:i,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return nh(e,t);const r={$metadata:ah(e),AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0};void 0!==e.headers["x-amz-object-lock-mode"]&&(r.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["content-language"]&&(r.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-disposition"]&&(r.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["cache-control"]&&(r.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-type"]&&(r.ContentType=e.headers["content-type"]),void 0!==e.headers["content-range"]&&(r.ContentRange=e.headers["content-range"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["content-length"]&&(r.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(r.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(r.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),void 0!==e.headers["x-amz-delete-marker"]&&(r.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-storage-class"]&&(r.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["content-encoding"]&&(r.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["x-amz-restore"]&&(r.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["x-amz-website-redirect-location"]&&(r.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(r.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["accept-ranges"]&&(r.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-version-id"]&&(r.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers.expires&&(r.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-expiration"]&&(r.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-missing-meta"]&&(r.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-replication-status"]&&(r.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-tagging-count"]&&(r.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["last-modified"]&&(r.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers.etag&&(r.ETag=e.headers.etag),void 0!==e.headers["x-amz-request-charged"]&&(r.RequestCharged=e.headers["x-amz-request-charged"]),Object.keys(e.headers).forEach((t=>{void 0===r.Metadata&&(r.Metadata={}),t.startsWith("x-amz-meta-")&&(r.Metadata[t.substring(11)]=e.headers[t])}));const n=e.body;return r.Body=n,Promise.resolve(r)})(e,t)}}});const{PassThrough:yh}=S.default;const{constants:bh}=C.default,{promisify:wh}=A.default,Sh=wh(S.default.pipeline);class Eh extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function xh(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:r}=t,n=(e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const n="buffer"===r;let i=!1;t?i=!(r||n):r=r||"utf8",n&&(r=null);const o=new yh({objectMode:i});r&&o.setEncoding(r);let a=0;const s=[];return o.on("data",(e=>{s.push(e),i?a=s.length:a+=e.length})),o.getBufferedValue=()=>t?s:n?Buffer.concat(s,a):s.join(""),o.getBufferedLength=()=>a,o})(t);return await new Promise(((t,i)=>{const o=e=>{e&&n.getBufferedLength()<=bh.MAX_LENGTH&&(e.bufferedData=n.getBufferedValue()),i(e)};(async()=>{try{await Sh(e,n),t()}catch(e){o(e)}})(),n.on("data",(()=>{n.getBufferedLength()>r&&o(new Eh)}))})),n.getBufferedValue()}var Ch=xh,Ah=(e,t)=>xh(e,{...t,encoding:"buffer"}),Th=(e,t)=>xh(e,{...t,array:!0}),Lh=Eh;Ch.buffer=Ah,Ch.array=Th,Ch.MaxBufferError=Lh;var Oh=Object.freeze(Object.assign(Object.create(null),Ch,{default:Ch,buffer:Ah,array:Th,MaxBufferError:Lh}));exports.handler=async e=>{const t=b.default;let r;const n=y.default,i=w.default,{now:o,log:a}=Tr(t.logLambdaExecutionTimes),s=o();if(r=_r(e)?await Nr({event:e,manifest:t,prerenderManifest:n}):await Rr({event:e,manifest:t,prerenderManifest:n,routesManifest:i}),r.hasOwnProperty("status")){!function(e,t,r){if(t.headers)for(const n of r.headers)if(K(e,n.source))for(const e of n.headers)if(e.key&&e.value){const r=e.key.toLowerCase();t.headers[r]=[{key:r,value:e.value}]}}(e.Records[0].cf.request.uri,r,i)}return a("handler execution time",s,o()),r};
