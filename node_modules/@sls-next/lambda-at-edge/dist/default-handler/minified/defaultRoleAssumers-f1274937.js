"use strict";var e=require("./httpRequest-eeeab15a.js"),n=require("./serdePlugin-96c19d04.js"),t=require("url"),r=require("buffer"),o=require("http"),i=require("fs"),s=require("os"),a=require("path"),u=require("child_process"),c=require("crypto"),d=require("./configurations-a8a5ec49.js"),l=require("https"),f=require("stream");require("http2");var v,g,_,p,h,m,w,y,b,S,A,E,x,k,I,T,P,C,R,O,N,z,L,D,q,j,K,U,H,W=require("process"),F="3.19.0";!function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(v||(v={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(g||(g={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(_||(_={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(p||(p={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(h||(h={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(m||(m={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(w||(w={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(y||(y={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(b||(b={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(S||(S={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(A||(A={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(E||(E={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(x||(x={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(k||(k={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(I||(I={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(T||(T={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(P||(P={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(C||(C={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(R||(R={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(O||(O={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(N||(N={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(z||(z={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(L||(L={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(D||(D={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(q||(q={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(j||(j={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(K||(K={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(U||(U={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(H||(H={}));var M=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o,i,s,a,u,c,d,l,f,v;return e.__generator(this,(function(g){switch(g.label){case 0:return o=[e.__assign({},n)],v={},[4,ye(n.body,t)];case 1:switch(r=e.__assign.apply(void 0,o.concat([(v.body=g.sent(),v)])),s="UnknownError",s=Se(n,r.body),s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":return[3,2];case"MalformedPolicyDocumentException":case"com.amazonaws.sts#MalformedPolicyDocumentException":return[3,4];case"PackedPolicyTooLargeException":case"com.amazonaws.sts#PackedPolicyTooLargeException":return[3,6];case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":return[3,8]}return[3,10];case 2:return a=[{}],[4,V(r)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,a.concat([g.sent()])),{name:s,$metadata:he(n)}]),[3,11];case 4:return u=[{}],[4,Y(r)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([g.sent()])),{name:s,$metadata:he(n)}]),[3,11];case 6:return c=[{}],[4,Z(r)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([g.sent()])),{name:s,$metadata:he(n)}]),[3,11];case 8:return d=[{}],[4,J(r)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([g.sent()])),{name:s,$metadata:he(n)}]),[3,11];case 10:l=r.body,s=l.Error.code||l.Error.Code||s,i=e.__assign(e.__assign({},l.Error),{name:""+s,message:l.Error.message||l.Error.Message||s,$fault:"client",$metadata:he(n)}),g.label=11;case 11:return f=i.message||i.Message||s,i.message=f,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}}))}))},$=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o,i,s,a,u,c,d,l,f,v,g,_,p;return e.__generator(this,(function(h){switch(h.label){case 0:return o=[e.__assign({},n)],p={},[4,ye(n.body,t)];case 1:switch(r=e.__assign.apply(void 0,o.concat([(p.body=h.sent(),p)])),s="UnknownError",s=Se(n,r.body),s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":return[3,2];case"IDPCommunicationErrorException":case"com.amazonaws.sts#IDPCommunicationErrorException":return[3,4];case"IDPRejectedClaimException":case"com.amazonaws.sts#IDPRejectedClaimException":return[3,6];case"InvalidIdentityTokenException":case"com.amazonaws.sts#InvalidIdentityTokenException":return[3,8];case"MalformedPolicyDocumentException":case"com.amazonaws.sts#MalformedPolicyDocumentException":return[3,10];case"PackedPolicyTooLargeException":case"com.amazonaws.sts#PackedPolicyTooLargeException":return[3,12];case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":return[3,14]}return[3,16];case 2:return a=[{}],[4,V(r)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,a.concat([h.sent()])),{name:s,$metadata:he(n)}]),[3,17];case 4:return u=[{}],[4,B(r)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([h.sent()])),{name:s,$metadata:he(n)}]),[3,17];case 6:return c=[{}],[4,G(r)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([h.sent()])),{name:s,$metadata:he(n)}]),[3,17];case 8:return d=[{}],[4,X(r)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([h.sent()])),{name:s,$metadata:he(n)}]),[3,17];case 10:return l=[{}],[4,Y(r)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([h.sent()])),{name:s,$metadata:he(n)}]),[3,17];case 12:return f=[{}],[4,Z(r)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,f.concat([h.sent()])),{name:s,$metadata:he(n)}]),[3,17];case 14:return v=[{}],[4,J(r)];case 15:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,v.concat([h.sent()])),{name:s,$metadata:he(n)}]),[3,17];case 16:g=r.body,s=g.Error.code||g.Error.Code||s,i=e.__assign(e.__assign({},g.Error),{name:""+s,message:g.Error.message||g.Error.Message||s,$fault:"client",$metadata:he(n)}),h.label=17;case 17:return _=i.message||i.Message||s,i.message=_,delete i.Message,[2,Promise.reject(Object.assign(new Error(_),i))]}}))}))},V=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(o){return t=n.body,r=de(t.Error),[2,e.__assign({name:"ExpiredTokenException",$fault:"client",$metadata:he(n)},r)]}))}))},B=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(o){return t=n.body,r=le(t.Error),[2,e.__assign({name:"IDPCommunicationErrorException",$fault:"client",$metadata:he(n)},r)]}))}))},G=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(o){return t=n.body,r=fe(t.Error),[2,e.__assign({name:"IDPRejectedClaimException",$fault:"client",$metadata:he(n)},r)]}))}))},X=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(o){return t=n.body,r=ve(t.Error),[2,e.__assign({name:"InvalidIdentityTokenException",$fault:"client",$metadata:he(n)},r)]}))}))},Y=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(o){return t=n.body,r=ge(t.Error),[2,e.__assign({name:"MalformedPolicyDocumentException",$fault:"client",$metadata:he(n)},r)]}))}))},Z=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(o){return t=n.body,r=_e(t.Error),[2,e.__assign({name:"PackedPolicyTooLargeException",$fault:"client",$metadata:he(n)},r)]}))}))},J=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(o){return t=n.body,r=pe(t.Error),[2,e.__assign({name:"RegionDisabledException",$fault:"client",$metadata:he(n)},r)]}))}))},Q=function(n,t){var r={};if(void 0!==n.RoleArn&&null!==n.RoleArn&&(r.RoleArn=n.RoleArn),void 0!==n.RoleSessionName&&null!==n.RoleSessionName&&(r.RoleSessionName=n.RoleSessionName),void 0!==n.PolicyArns&&null!==n.PolicyArns){var o=ne(n.PolicyArns,t);Object.entries(o).forEach((function(n){var t=e.__read(n,2),o=t[0],i=t[1];r["PolicyArns."+o]=i}))}if(void 0!==n.Policy&&null!==n.Policy&&(r.Policy=n.Policy),void 0!==n.DurationSeconds&&null!==n.DurationSeconds&&(r.DurationSeconds=n.DurationSeconds),void 0!==n.Tags&&null!==n.Tags){o=ie(n.Tags,t);Object.entries(o).forEach((function(n){var t=e.__read(n,2),o=t[0],i=t[1];r["Tags."+o]=i}))}if(void 0!==n.TransitiveTagKeys&&null!==n.TransitiveTagKeys){o=oe(n.TransitiveTagKeys);Object.entries(o).forEach((function(n){var t=e.__read(n,2),o=t[0],i=t[1];r["TransitiveTagKeys."+o]=i}))}return void 0!==n.ExternalId&&null!==n.ExternalId&&(r.ExternalId=n.ExternalId),void 0!==n.SerialNumber&&null!==n.SerialNumber&&(r.SerialNumber=n.SerialNumber),void 0!==n.TokenCode&&null!==n.TokenCode&&(r.TokenCode=n.TokenCode),void 0!==n.SourceIdentity&&null!==n.SourceIdentity&&(r.SourceIdentity=n.SourceIdentity),r},ee=function(n,t){var r={};if(void 0!==n.RoleArn&&null!==n.RoleArn&&(r.RoleArn=n.RoleArn),void 0!==n.RoleSessionName&&null!==n.RoleSessionName&&(r.RoleSessionName=n.RoleSessionName),void 0!==n.WebIdentityToken&&null!==n.WebIdentityToken&&(r.WebIdentityToken=n.WebIdentityToken),void 0!==n.ProviderId&&null!==n.ProviderId&&(r.ProviderId=n.ProviderId),void 0!==n.PolicyArns&&null!==n.PolicyArns){var o=ne(n.PolicyArns,t);Object.entries(o).forEach((function(n){var t=e.__read(n,2),o=t[0],i=t[1];r["PolicyArns."+o]=i}))}return void 0!==n.Policy&&null!==n.Policy&&(r.Policy=n.Policy),void 0!==n.DurationSeconds&&null!==n.DurationSeconds&&(r.DurationSeconds=n.DurationSeconds),r},ne=function(n,t){var r,o,i={},s=1;try{for(var a=e.__values(n),u=a.next();!u.done;u=a.next()){var c=u.value;if(null!==c){var d=te(c,t);Object.entries(d).forEach((function(n){var t=e.__read(n,2),r=t[0],o=t[1];i["member."+s+"."+r]=o})),s++}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i},te=function(e,n){var t={};return void 0!==e.arn&&null!==e.arn&&(t.arn=e.arn),t},re=function(e,n){var t={};return void 0!==e.Key&&null!==e.Key&&(t.Key=e.Key),void 0!==e.Value&&null!==e.Value&&(t.Value=e.Value),t},oe=function(n,t){var r,o,i={},s=1;try{for(var a=e.__values(n),u=a.next();!u.done;u=a.next()){var c=u.value;null!==c&&(i["member."+s]=c,s++)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i},ie=function(n,t){var r,o,i={},s=1;try{for(var a=e.__values(n),u=a.next();!u.done;u=a.next()){var c=u.value;if(null!==c){var d=re(c);Object.entries(d).forEach((function(n){var t=e.__read(n,2),r=t[0],o=t[1];i["member."+s+"."+r]=o})),s++}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i},se=function(e,n){var t={AssumedRoleId:void 0,Arn:void 0};return void 0!==e.AssumedRoleId&&(t.AssumedRoleId=e.AssumedRoleId),void 0!==e.Arn&&(t.Arn=e.Arn),t},ae=function(e,n){var t={Credentials:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,SourceIdentity:void 0};return void 0!==e.Credentials&&(t.Credentials=ce(e.Credentials)),void 0!==e.AssumedRoleUser&&(t.AssumedRoleUser=se(e.AssumedRoleUser)),void 0!==e.PackedPolicySize&&(t.PackedPolicySize=parseInt(e.PackedPolicySize)),void 0!==e.SourceIdentity&&(t.SourceIdentity=e.SourceIdentity),t},ue=function(e,n){var t={Credentials:void 0,SubjectFromWebIdentityToken:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,Provider:void 0,Audience:void 0,SourceIdentity:void 0};return void 0!==e.Credentials&&(t.Credentials=ce(e.Credentials)),void 0!==e.SubjectFromWebIdentityToken&&(t.SubjectFromWebIdentityToken=e.SubjectFromWebIdentityToken),void 0!==e.AssumedRoleUser&&(t.AssumedRoleUser=se(e.AssumedRoleUser)),void 0!==e.PackedPolicySize&&(t.PackedPolicySize=parseInt(e.PackedPolicySize)),void 0!==e.Provider&&(t.Provider=e.Provider),void 0!==e.Audience&&(t.Audience=e.Audience),void 0!==e.SourceIdentity&&(t.SourceIdentity=e.SourceIdentity),t},ce=function(e,n){var t={AccessKeyId:void 0,SecretAccessKey:void 0,SessionToken:void 0,Expiration:void 0};return void 0!==e.AccessKeyId&&(t.AccessKeyId=e.AccessKeyId),void 0!==e.SecretAccessKey&&(t.SecretAccessKey=e.SecretAccessKey),void 0!==e.SessionToken&&(t.SessionToken=e.SessionToken),void 0!==e.Expiration&&(t.Expiration=new Date(e.Expiration)),t},de=function(e,n){var t={message:void 0};return void 0!==e.message&&(t.message=e.message),t},le=function(e,n){var t={message:void 0};return void 0!==e.message&&(t.message=e.message),t},fe=function(e,n){var t={message:void 0};return void 0!==e.message&&(t.message=e.message),t},ve=function(e,n){var t={message:void 0};return void 0!==e.message&&(t.message=e.message),t},ge=function(e,n){var t={message:void 0};return void 0!==e.message&&(t.message=e.message),t},_e=function(e,n){var t={message:void 0};return void 0!==e.message&&(t.message=e.message),t},pe=function(e,n){var t={message:void 0};return void 0!==e.message&&(t.message=e.message),t},he=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},me=function(e,n){return function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,n).then((function(e){return n.utf8Encoder(e)}))},we=function(n,t,r,o,i){return e.__awaiter(void 0,void 0,void 0,(function(){var s,a,u,c,d,l;return e.__generator(this,(function(f){switch(f.label){case 0:return[4,n.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,d=s.port,l={protocol:c,hostname:a,port:d,method:"POST",path:r,headers:t},void 0!==o&&(l.hostname=o),void 0!==i&&(l.body=i),[2,new e.HttpRequest(l)]}}))}))},ye=function(e,t){return me(e,t).then((function(e){if(e.length){var t=n.parser.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,trimValues:!1,tagValueProcessor:function(e,t){return""===e.trim()?"":n.lib.decodeHTML(e)}}),r=Object.keys(t)[0],o=t[r];return o["#text"]&&(o[r]=o["#text"],delete o["#text"]),n.getValueFromTextNode(o)}return{}}))},be=function(t){return Object.entries(t).map((function(t){var r=e.__read(t,2),o=r[0],i=r[1];return n.extendedEncodeURIComponent(o)+"="+n.extendedEncodeURIComponent(i)})).join("&")},Se=function(e,n){return void 0!==n.Error.Code?n.Error.Code:404==e.statusCode?"NotFound":""},Ae=function(n){function t(e,t){void 0===t&&(t=!0);var r=n.call(this,e)||this;return r.tryNextLink=t,r}return e.__extends(t,n),t.from=function(e,n){return void 0===n&&(n=!0),Object.defineProperty(e,"tryNextLink",{value:n,configurable:!1,enumerable:!1,writable:!1}),e},t}(Error),Ee=function(n){function t(e,t){void 0===t&&(t=!0);var r=n.call(this,e)||this;return r.tryNextLink=t,r.name="CredentialsProviderError",r}return e.__extends(t,n),t.from=function(e,n){return void 0===n&&(n=!0),Object.defineProperty(e,"tryNextLink",{value:n,configurable:!1,enumerable:!1,writable:!1}),e},t}(Error);function xe(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(){var t,r,o=Promise.reject(new Ae("No providers in chain")),i=function(e){o=o.catch((function(n){if(null==n?void 0:n.tryNextLink)return e();throw n}))};try{for(var s=e.__values(n),a=s.next();!a.done;a=s.next()){i(a.value)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o}}for(var ke=function(n,t,r){var o,i;if(void 0===t)return function(){return i||(o=n(),i=!0),o};var s=!1;return function(){return e.__awaiter(void 0,void 0,void 0,(function(){var a;return e.__generator(this,(function(e){switch(e.label){case 0:return i||(o=n(),i=!0),s?[2,o]:[4,o];case 1:return a=e.sent(),r&&!r(a)?(s=!0,[2,a]):t(a)?[2,o=n()]:[2,a]}}))}))}},Ie={},Te={},Pe=0;Pe<256;Pe++){var Ce=Pe.toString(16).toLowerCase();1===Ce.length&&(Ce="0"+Ce),Ie[Pe]=Ce,Te[Ce]=Pe}function Re(e){for(var n="",t=0;t<e.byteLength;t++)n+=Ie[e[t]];return n}var Oe="X-Amz-Date".toLowerCase(),Ne=["authorization",Oe,"date"],ze="X-Amz-Signature".toLowerCase(),Le="X-Amz-Security-Token".toLowerCase(),De={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},qe=/^proxy-/,je=/^sec-/,Ke="AWS4-HMAC-SHA256-PAYLOAD",Ue={},He=[];function We(e,n,t){return e+"/"+n+"/"+t+"/aws4_request"}function Fe(e,n,t){var r=new e(n);return r.update(t),r.digest()}function Me(n,t,r){var o,i,s=n.headers,a={};try{for(var u=e.__values(Object.keys(s).sort()),c=u.next();!c.done;c=u.next()){var d=c.value,l=d.toLowerCase();(l in De||(null==t?void 0:t.has(l))||qe.test(l)||je.test(l))&&(!r||r&&!r.has(l))||(a[l]=s[d].trim().replace(/\s+/g," "))}}catch(e){o={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return a}var $e=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Ve)},Ve=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};var Be=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)};function Ge(n,t){var r=n.headers,o=n.body;return e.__awaiter(this,void 0,void 0,(function(){var n,i,s,a,u,c,d;return e.__generator(this,(function(l){switch(l.label){case 0:try{for(n=e.__values(Object.keys(r)),i=n.next();!i.done;i=n.next())if("x-amz-content-sha256"===(s=i.value).toLowerCase())return[2,r[s]]}catch(e){c={error:e}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(c)throw c.error}}return null!=o?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof o||ArrayBuffer.isView(o)||Be(o)?((a=new t).update(o),u=Re,[4,a.digest()]):[3,3];case 2:return[2,u.apply(void 0,[l.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}}))}))}function Xe(n){var t=n.headers,r=n.query,o=e.__rest(n,["headers","query"]);return e.__assign(e.__assign({},o),{headers:e.__assign({},t),query:r?Ye(r):void 0})}function Ye(n){return Object.keys(n).reduce((function(t,r){var o,i=n[r];return e.__assign(e.__assign({},t),((o={})[r]=Array.isArray(i)?e.__spreadArray([],e.__read(i)):i,o))}),{})}function Ze(n){var t,r;n="function"==typeof n.clone?n.clone():Xe(n);try{for(var o=e.__values(Object.keys(n.headers)),i=o.next();!i.done;i=o.next()){var s=i.value;Ne.indexOf(s.toLowerCase())>-1&&delete n.headers[s]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}function Je(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"==typeof e)return Number(e)?new Date(1e3*Number(e)):new Date(e);return e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var Qe=function(){function n(e){var n=e.applyChecksum,t=e.credentials,r=e.region,o=e.service,i=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=o,this.sha256=i,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof n||n,this.regionProvider=tn(r),this.credentialProvider=rn(t)}return n.prototype.presign=function(n,t){return void 0===t&&(t={}),e.__awaiter(this,void 0,void 0,(function(){var r,o,i,s,a,u,c,d,l,f,v,g,_,p,h,m,w,y,b,S,A,E,x,k;return e.__generator(this,(function(I){switch(I.label){case 0:return r=t.signingDate,o=void 0===r?new Date:r,i=t.expiresIn,s=void 0===i?3600:i,a=t.unsignableHeaders,u=t.unhoistableHeaders,c=t.signableHeaders,d=t.signingRegion,l=t.signingService,[4,this.credentialProvider()];case 1:return f=I.sent(),null==d?[3,2]:(g=d,[3,4]);case 2:return[4,this.regionProvider()];case 3:g=I.sent(),I.label=4;case 4:return v=g,_=en(o),p=_.longDate,h=_.shortDate,s>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(m=We(h,v,null!=l?l:this.service),w=function(n,t){var r,o,i;void 0===t&&(t={});var s="function"==typeof n.clone?n.clone():Xe(n),a=s.headers,u=s.query,c=void 0===u?{}:u;try{for(var d=e.__values(Object.keys(a)),l=d.next();!l.done;l=d.next()){var f=l.value,v=f.toLowerCase();"x-amz-"!==v.substr(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(v))||(c[f]=a[f],delete a[f])}}catch(e){r={error:e}}finally{try{l&&!l.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return e.__assign(e.__assign({},n),{headers:a,query:c})}(Ze(n),{unhoistableHeaders:u}),f.sessionToken&&(w.query["X-Amz-Security-Token"]=f.sessionToken),w.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",w.query["X-Amz-Credential"]=f.accessKeyId+"/"+m,w.query["X-Amz-Date"]=p,w.query["X-Amz-Expires"]=s.toString(10),y=Me(w,a,c),w.query["X-Amz-SignedHeaders"]=nn(y),b=w.query,S="X-Amz-Signature",A=this.getSignature,E=[p,m,this.getSigningKey(f,v,h,l)],x=this.createCanonicalRequest,k=[w,y],[4,Ge(n,this.sha256)]);case 5:return[4,A.apply(this,E.concat([x.apply(this,k.concat([I.sent()]))]))];case 6:return b[S]=I.sent(),[2,w]}}))}))},n.prototype.sign=function(n,t){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){return"string"==typeof n?[2,this.signString(n,t)]:n.headers&&n.payload?[2,this.signEvent(n,t)]:[2,this.signRequest(n,t)]}))}))},n.prototype.signEvent=function(n,t){var r=n.headers,o=n.payload,i=t.signingDate,s=void 0===i?new Date:i,a=t.priorSignature,u=t.signingRegion,c=t.signingService;return e.__awaiter(this,void 0,void 0,(function(){var n,t,i,d,l,f,v,g,_,p,h;return e.__generator(this,(function(e){switch(e.label){case 0:return null==u?[3,1]:(t=u,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=e.sent(),e.label=3;case 3:return n=t,i=en(s),d=i.shortDate,l=i.longDate,f=We(d,n,null!=c?c:this.service),[4,Ge({headers:{},body:o},this.sha256)];case 4:return v=e.sent(),(g=new this.sha256).update(r),p=Re,[4,g.digest()];case 5:return _=p.apply(void 0,[e.sent()]),h=[Ke,l,f,a,_,v].join("\n"),[2,this.signString(h,{signingDate:s,signingRegion:n,signingService:c})]}}))}))},n.prototype.signString=function(n,t){var r=void 0===t?{}:t,o=r.signingDate,i=void 0===o?new Date:o,s=r.signingRegion,a=r.signingService;return e.__awaiter(this,void 0,void 0,(function(){var t,r,o,u,c,d,l,f;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==s?[3,2]:(o=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:o=e.sent(),e.label=4;case 4:return r=o,u=en(i).shortDate,l=(d=this.sha256).bind,[4,this.getSigningKey(t,r,u,a)];case 5:return(c=new(l.apply(d,[void 0,e.sent()]))).update(n),f=Re,[4,c.digest()];case 6:return[2,f.apply(void 0,[e.sent()])]}}))}))},n.prototype.signRequest=function(n,t){var r=void 0===t?{}:t,o=r.signingDate,i=void 0===o?new Date:o,s=r.signableHeaders,a=r.unsignableHeaders,u=r.signingRegion,c=r.signingService;return e.__awaiter(this,void 0,void 0,(function(){var t,r,o,d,l,f,v,g,_,p,h;return e.__generator(this,(function(m){switch(m.label){case 0:return[4,this.credentialProvider()];case 1:return t=m.sent(),null==u?[3,2]:(o=u,[3,4]);case 2:return[4,this.regionProvider()];case 3:o=m.sent(),m.label=4;case 4:return r=o,d=Ze(n),l=en(i),f=l.longDate,v=l.shortDate,g=We(v,r,null!=c?c:this.service),d.headers[Oe]=f,t.sessionToken&&(d.headers[Le]=t.sessionToken),[4,Ge(d,this.sha256)];case 5:return _=m.sent(),!function(n,t){var r,o;n=n.toLowerCase();try{for(var i=e.__values(Object.keys(t)),s=i.next();!s.done;s=i.next())if(n===s.value.toLowerCase())return!0}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return!1}("x-amz-content-sha256",d.headers)&&this.applyChecksum&&(d.headers["x-amz-content-sha256"]=_),p=Me(d,a,s),[4,this.getSignature(f,g,this.getSigningKey(t,r,v,c),this.createCanonicalRequest(d,p,_))];case 6:return h=m.sent(),d.headers.authorization="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+g+", SignedHeaders="+nn(p)+", Signature="+h,[2,d]}}))}))},n.prototype.createCanonicalRequest=function(n,t,r){var o=Object.keys(t).sort();return n.method+"\n"+this.getCanonicalPath(n)+"\n"+function(n){var t,r,o=n.query,i=void 0===o?{}:o,s=[],a={},u=function(e){if(e.toLowerCase()===ze)return"continue";s.push(e);var n=i[e];"string"==typeof n?a[e]=$e(e)+"="+$e(n):Array.isArray(n)&&(a[e]=n.slice(0).sort().reduce((function(n,t){return n.concat([$e(e)+"="+$e(t)])}),[]).join("&"))};try{for(var c=e.__values(Object.keys(i).sort()),d=c.next();!d.done;d=c.next())u(d.value)}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return s.map((function(e){return a[e]})).filter((function(e){return e})).join("&")}(n)+"\n"+o.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+o.join(";")+"\n"+r},n.prototype.createStringToSign=function(n,t,r){return e.__awaiter(this,void 0,void 0,(function(){var o,i;return e.__generator(this,(function(e){switch(e.label){case 0:return(o=new this.sha256).update(r),[4,o.digest()];case 1:return i=e.sent(),[2,"AWS4-HMAC-SHA256\n"+n+"\n"+t+"\n"+Re(i)]}}))}))},n.prototype.getCanonicalPath=function(e){var n=e.path;return this.uriEscapePath?"/"+encodeURIComponent(n.replace(/^\//,"")).replace(/%2F/g,"/"):n},n.prototype.getSignature=function(n,t,r,o){return e.__awaiter(this,void 0,void 0,(function(){var i,s,a,u,c;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,this.createStringToSign(n,t,o)];case 1:return i=e.sent(),u=(a=this.sha256).bind,[4,r];case 2:return(s=new(u.apply(a,[void 0,e.sent()]))).update(i),c=Re,[4,s.digest()];case 3:return[2,c.apply(void 0,[e.sent()])]}}))}))},n.prototype.getSigningKey=function(n,t,r,o){return function(n,t,r,o,i){return e.__awaiter(void 0,void 0,void 0,(function(){var s,a,u,c,d,l,f,v,g;return e.__generator(this,(function(_){switch(_.label){case 0:return[4,Fe(n,t.secretAccessKey,t.accessKeyId)];case 1:if(s=_.sent(),(a=r+":"+o+":"+i+":"+Re(s)+":"+t.sessionToken)in Ue)return[2,Ue[a]];for(He.push(a);He.length>50;)delete Ue[He.shift()];u="AWS4"+t.secretAccessKey,_.label=2;case 2:_.trys.push([2,7,8,9]),c=e.__values([r,o,i,"aws4_request"]),d=c.next(),_.label=3;case 3:return d.done?[3,6]:(l=d.value,[4,Fe(n,u,l)]);case 4:u=_.sent(),_.label=5;case 5:return d=c.next(),[3,3];case 6:return[3,9];case 7:return f=_.sent(),v={error:f},[3,9];case 8:try{d&&!d.done&&(g=c.return)&&g.call(c)}finally{if(v)throw v.error}return[7];case 9:return[2,Ue[a]=u]}}))}))}(this.sha256,n,r,t,o||this.service)},n}(),en=function(e){var n=Je(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.substr(0,8)}},nn=function(e){return Object.keys(e).sort().join(";")},tn=function(e){if("string"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},rn=function(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},on=function(n){var t,r=n.credentials?an(n.credentials):n.credentialDefaultProvider(n),o=n.signingEscapePath,i=void 0===o||o,s=n.systemClockOffset,a=void 0===s?n.systemClockOffset||0:s,u=n.sha256;return t=n.signer?sn(n.signer):function(){return sn(n.region)().then((function(t){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,n.regionInfoProvider(t)];case 1:return[2,[e.sent()||{},t]]}}))}))})).then((function(t){var o=e.__read(t,2),s=o[0],a=o[1],c=s.signingRegion,d=s.signingService;return n.signingRegion=n.signingRegion||c||a,n.signingName=n.signingName||d||n.serviceId,new Qe({credentials:r,region:n.signingRegion,service:n.signingName,sha256:u,uriEscapePath:i})}))},e.__assign(e.__assign({},n),{systemClockOffset:a,signingEscapePath:i,credentials:r,signer:t})},sn=function(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},an=function(e){return"function"==typeof e?ke(e,(function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5}),(function(e){return void 0!==e.expiration})):sn(e)},un=function(e){return new Date(Date.now()+e)};function cn(n){return function(t,r){return function(o){return e.__awaiter(this,void 0,void 0,(function(){var i,s,a,u,c,d,l,f,v;return e.__generator(this,(function(g){switch(g.label){case 0:return e.HttpRequest.isInstance(o.request)?"function"!=typeof n.signer?[3,2]:[4,n.signer()]:[2,t(o)];case 1:return s=g.sent(),[3,3];case 2:s=n.signer,g.label=3;case 3:return i=s,u=t,c=[e.__assign({},o)],v={},[4,i.sign(o.request,{signingDate:new Date(Date.now()+n.systemClockOffset),signingRegion:r.signing_region,signingService:r.signing_service})];case 4:return[4,u.apply(void 0,[e.__assign.apply(void 0,c.concat([(v.request=g.sent(),v)]))])];case 5:return a=g.sent(),d=a.response.headers,(l=d&&(d.date||d.Date))&&(f=Date.parse(l),_=f,p=n.systemClockOffset,Math.abs(un(p).getTime()-_)>=3e5&&(n.systemClockOffset=f-Date.now())),[2,a]}var _,p}))}))}}}var dn={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},ln=function(e){return{applyToStack:function(n){n.addRelativeTo(cn(e),dn)}}},fn=function(t){function r(e){var n=t.call(this)||this;return n.input=e,n}return e.__extends(r,t),r.prototype.resolveMiddleware=function(e,t,r){this.middlewareStack.use(n.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(ln(t));var o=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:p.filterSensitiveLog,outputFilterSensitiveLog:m.filterSensitiveLog},s=t.requestHandler;return o.resolve((function(e){return s.handle(e.request,r||{})}),i)},r.prototype.serialize=function(n,t){return function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o;return e.__generator(this,(function(i){return r={"content-type":"application/x-www-form-urlencoded"},o=be(e.__assign(e.__assign({},Q(n,t)),{Action:"AssumeRole",Version:"2011-06-15"})),[2,we(t,r,"/",void 0,o)]}))}))}(n,t)},r.prototype.deserialize=function(n,t){return function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o,i;return e.__generator(this,(function(s){switch(s.label){case 0:return n.statusCode>=300?[2,M(n,t)]:[4,ye(n.body,t)];case 1:return r=s.sent(),o=ae(r.AssumeRoleResult),i=e.__assign({$metadata:he(n)},o),[2,Promise.resolve(i)]}}))}))}(n,t)},r}(n.Command),vn=function(t){function r(e){var n=t.call(this)||this;return n.input=e,n}return e.__extends(r,t),r.prototype.resolveMiddleware=function(e,t,r){this.middlewareStack.use(n.getSerdePlugin(t,this.serialize,this.deserialize));var o=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:I.filterSensitiveLog,outputFilterSensitiveLog:T.filterSensitiveLog},s=t.requestHandler;return o.resolve((function(e){return s.handle(e.request,r||{})}),i)},r.prototype.serialize=function(n,t){return function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o;return e.__generator(this,(function(i){return r={"content-type":"application/x-www-form-urlencoded"},o=be(e.__assign(e.__assign({},ee(n,t)),{Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"})),[2,we(t,r,"/",void 0,o)]}))}))}(n,t)},r.prototype.deserialize=function(n,t){return function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o,i;return e.__generator(this,(function(s){switch(s.label){case 0:return n.statusCode>=300?[2,$(n,t)]:[4,ye(n.body,t)];case 1:return r=s.sent(),o=ue(r.AssumeRoleWithWebIdentityResult),i=e.__assign({$metadata:he(n)},o),[2,Promise.resolve(i)]}}))}))}(n,t)},r}(n.Command),gn=function(n){return"function"!=typeof n?void 0===n?"us-east-1":n:function(){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,"us-east-1"];case 3:return[2]}}))}))}},_n=function(n,t){var r,o;return function(i,s){return e.__awaiter(void 0,void 0,void 0,(function(){var a,u,c,d;return e.__generator(this,(function(l){switch(l.label){case 0:return o=i,r||(a=n.logger,u=n.region,c=n.requestHandler,r=new t(e.__assign({logger:a,credentialDefaultProvider:function(){return function(){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){return[2,o]}))}))}},region:gn(u||n.region)},c?{requestHandler:c}:{}))),[4,r.send(new fn(s))];case 1:if(!(d=l.sent().Credentials)||!d.AccessKeyId||!d.SecretAccessKey)throw new Error("Invalid response from STS.assumeRole call with role "+s.RoleArn);return[2,{accessKeyId:d.AccessKeyId,secretAccessKey:d.SecretAccessKey,sessionToken:d.SessionToken,expiration:d.Expiration}]}}))}))}},pn=function(n,t){var r;return function(o){return e.__awaiter(void 0,void 0,void 0,(function(){var i,s,a,u;return e.__generator(this,(function(c){switch(c.label){case 0:return r||(i=n.logger,s=n.region,a=n.requestHandler,r=new t(e.__assign({logger:i,region:gn(s||n.region)},a?{requestHandler:a}:{}))),[4,r.send(new vn(o))];case 1:if(!(u=c.sent().Credentials)||!u.AccessKeyId||!u.SecretAccessKey)throw new Error("Invalid response from STS.assumeRoleWithWebIdentity call with role "+o.RoleArn);return[2,{accessKeyId:u.AccessKeyId,secretAccessKey:u.SecretAccessKey,sessionToken:u.SessionToken,expiration:u.Expiration}]}}))}))}},hn=function(n){var t;return e.__assign(e.__assign({},n),{tls:null===(t=n.tls)||void 0===t||t,endpoint:n.endpoint?mn(n):function(){return wn(n)},isCustomEndpoint:!!n.endpoint})},mn=function(e){var n=e.endpoint,t=e.urlParser;if("string"==typeof n){var r=Promise.resolve(t(n));return function(){return r}}if("object"==typeof n){var o=Promise.resolve(n);return function(){return o}}return n},wn=function(n){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r,o,i,s;return e.__generator(this,(function(e){switch(e.label){case 0:return t=n.tls,r=void 0===t||t,[4,n.region()];case 1:if(o=e.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(o))throw new Error("Invalid region in client config");return[4,n.regionInfoProvider(o)];case 2:if(!(i=(null!==(s=e.sent())&&void 0!==s?s:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,n.urlParser((r?"https:":"http:")+"//"+i)]}}))}))},yn={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},bn={preferredFile:"credentials"},Sn=function(n){if(!n.region)throw new Error("Region is missing");return e.__assign(e.__assign({},n),{region:An(n.region)})},An=function(e){if("string"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e};function En(){return function(){var e=process.env.AWS_ACCESS_KEY_ID,n=process.env.AWS_SECRET_ACCESS_KEY,t=process.env.AWS_CREDENTIAL_EXPIRATION;return e&&n?Promise.resolve({accessKeyId:e,secretAccessKey:n,sessionToken:process.env.AWS_SESSION_TOKEN,expiration:t?new Date(t):void 0}):Promise.reject(new Ee("Unable to find environment variable credentials."))}}function xn(n){return new Promise((function(t,i){var s=o.request(e.__assign({method:"GET"},n));s.on("error",(function(e){i(Object.assign(new Ae("Unable to connect to instance metadata service"),e)),s.destroy()})),s.on("timeout",(function(){i(new Ae("TimeoutError from instance metadata service")),s.destroy()})),s.on("response",(function(e){var n=e.statusCode,o=void 0===n?400:n;(o<200||300<=o)&&(i(Object.assign(new Ae("Error response received from instance metadata service"),{statusCode:o})),s.destroy());var a=[];e.on("data",(function(e){a.push(e)})),e.on("end",(function(){t(r.Buffer.concat(a)),s.destroy()}))})),s.end()}))}var kn=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration},In=function(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}},Tn=function(e){var n=e.maxRetries,t=void 0===n?0:n,r=e.timeout;return{maxRetries:t,timeout:void 0===r?1e3:r}},Pn=function(e,n){for(var t=e(),r=0;r<n;r++)t=t.catch(e);return t},Cn="AWS_CONTAINER_CREDENTIALS_FULL_URI",Rn="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",On=function(n){void 0===n&&(n={});var t=Tn(n),r=t.timeout,o=t.maxRetries;return function(){return Pn((function(){return e.__awaiter(void 0,void 0,void 0,(function(){var n,t,o,i;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,Dn()];case 1:return n=e.sent(),i=(o=JSON).parse,[4,Nn(r,n)];case 2:if(t=i.apply(o,[e.sent()]),!kn(t))throw new Ee("Invalid response received from instance metadata service.");return[2,In(t)]}}))}))}),o)}},Nn=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(r){switch(r.label){case 0:return process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN&&(t.headers=e.__assign(e.__assign({},t.headers),{Authorization:process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN})),[4,xn(e.__assign(e.__assign({},t),{timeout:n}))];case 1:return[2,r.sent().toString()]}}))}))},zn={localhost:!0,"127.0.0.1":!0},Ln={"http:":!0,"https:":!0},Dn=function(){return e.__awaiter(void 0,void 0,void 0,(function(){var n;return e.__generator(this,(function(r){if(process.env[Rn])return[2,{hostname:"169.254.170.2",path:process.env[Rn]}];if(process.env[Cn]){if(!(n=t.parse(process.env[Cn])).hostname||!(n.hostname in zn))throw new Ee(n.hostname+" is not a valid container metadata service hostname",!1);if(!n.protocol||!(n.protocol in Ln))throw new Ee(n.protocol+" is not a valid container metadata service protocol",!1);return[2,e.__assign(e.__assign({},n),{port:n.port?parseInt(n.port,10):void 0})]}throw new Ee("The container metadata credential provider cannot be used unless the "+Rn+" or "+Cn+" environment variable is set",!1)}))}))},qn="169.254.169.254",jn="/latest/meta-data/iam/security-credentials/",Kn=function(n){void 0===n&&(n={});var t=!1,r=Tn(n),o=r.timeout,i=r.maxRetries,s=function(n,r){return e.__awaiter(void 0,void 0,void 0,(function(){var o;return e.__generator(this,(function(i){switch(i.label){case 0:return[4,Pn((function(){return e.__awaiter(void 0,void 0,void 0,(function(){var n,o;return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Hn(r)];case 1:return n=e.sent(),[3,3];case 2:throw 401===(o=e.sent()).statusCode&&(t=!1),o;case 3:return[2,n]}}))}))}),n)];case 1:return o=i.sent().trim(),[2,Pn((function(){return e.__awaiter(void 0,void 0,void 0,(function(){var n,i;return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Wn(o,r)];case 1:return n=e.sent(),[3,3];case 2:throw 401===(i=e.sent()).statusCode&&(t=!1),i;case 3:return[2,n]}}))}))}),n)]}}))}))};return function(){return e.__awaiter(void 0,void 0,void 0,(function(){var n,r;return e.__generator(this,(function(e){switch(e.label){case 0:return t?[2,s(i,{timeout:o})]:[3,1];case 1:n=void 0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,Un({timeout:o})];case 3:return n=e.sent().toString(),[3,5];case 4:if(400===(null==(r=e.sent())?void 0:r.statusCode))throw Object.assign(r,{message:"EC2 Metadata token request returned error"});return("TimeoutError"===r.message||[403,404,405].includes(r.statusCode))&&(t=!0),[2,s(i,{timeout:o})];case 5:return[2,s(i,{timeout:o,headers:{"x-aws-ec2-metadata-token":n}})]}}))}))}},Un=function(n){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(t){return[2,xn(e.__assign(e.__assign({},n),{host:qn,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]}))}))},Hn=function(n){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(t){switch(t.label){case 0:return[4,xn(e.__assign(e.__assign({},n),{host:qn,path:jn}))];case 1:return[2,t.sent().toString()]}}))}))},Wn=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o,i;return e.__generator(this,(function(s){switch(s.label){case 0:return i=(o=JSON).parse,[4,xn(e.__assign(e.__assign({},t),{host:qn,path:jn+n}))];case 1:if(r=i.apply(o,[s.sent().toString()]),!kn(r))throw new Ee("Invalid response received from instance metadata service.");return[2,In(r)]}}))}))},Fn=function(n){return void 0===n&&(n={}),function(){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){return[2,Mn(n)]}))}))}},Mn=function(n){var t,r,o,s=null!==(t=null==n?void 0:n.webIdentityTokenFile)&&void 0!==t?t:process.env.AWS_WEB_IDENTITY_TOKEN_FILE,a=null!==(r=null==n?void 0:n.roleArn)&&void 0!==r?r:process.env.AWS_ROLE_ARN,u=null!==(o=null==n?void 0:n.roleSessionName)&&void 0!==o?o:process.env.AWS_ROLE_SESSION_NAME;if(!s||!a)throw new Ee("Web identity configuration not specified");return function(e){return function(){var n=e.roleArn,t=e.roleSessionName,r=e.webIdentityToken,o=e.providerId,i=e.policyArns,s=e.policy,a=e.durationSeconds,u=e.roleAssumerWithWebIdentity;if(!u)throw new Ee("Role Arn '"+n+"' needs to be assumed with web identity, but no role assumption callback was provided.",!1);return u({RoleArn:n,RoleSessionName:null!=t?t:"aws-sdk-js-session-"+Date.now(),WebIdentityToken:r,ProviderId:o,PolicyArns:i,Policy:s,DurationSeconds:a})}}(e.__assign(e.__assign({},n),{webIdentityToken:i.readFileSync(s,{encoding:"ascii"}),roleArn:a,roleSessionName:u}))()},$n=function(){return{}},Vn=function(n){void 0===n&&(n={});var t=n.filepath,r=void 0===t?process.env.AWS_SHARED_CREDENTIALS_FILE||a.join(Jn(),".aws","credentials"):t,o=n.configFilepath,i=void 0===o?process.env.AWS_CONFIG_FILE||a.join(Jn(),".aws","config"):o;return Promise.all([Zn(i).then(Yn).then(Gn).catch($n),Zn(r).then(Yn).catch($n)]).then((function(n){var t=e.__read(n,2);return{configFile:t[0],credentialsFile:t[1]}}))},Bn=/^profile\s(["'])?([^\1]+)\1$/,Gn=function(n){var t,r,o={};try{for(var i=e.__values(Object.keys(n)),s=i.next();!s.done;s=i.next()){var a=s.value,u=void 0;if("default"===a)o.default=n.default;else if(u=Bn.exec(a)){var c=e.__read(u,3),d=(c[0],c[1],c[2]);d&&(o[d]=n[a])}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return o},Xn=["__proto__","profile __proto__"],Yn=function(n){var t,r,o,i={};try{for(var s=e.__values(n.split(/\r?\n/)),a=s.next();!a.done;a=s.next()){var u=a.value,c=(u=u.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(c){if(o=c[1],Xn.includes(o))throw new Error('Found invalid profile name "'+o+'"')}else if(o){var d=u.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);d&&(i[o]=i[o]||{},i[o][d[1]]=d[2])}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},Zn=function(e){return new Promise((function(n,t){i.readFile(e,"utf8",(function(e,r){e?t(e):n(r)}))}))},Jn=function(){var e=process.env,n=e.HOME,t=e.USERPROFILE,r=e.HOMEPATH,o=e.HOMEDRIVE,i=void 0===o?"C:"+a.sep:o;return n||(t||(r?""+i+r:s.homedir()))},Qn=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1},et=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.role_arn&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1},nt=function(n){return void 0===n&&(n={}),function(){return e.__awaiter(void 0,void 0,void 0,(function(){var t;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,tt(n)];case 1:return t=e.sent(),[2,ot(rt(n),t,n)]}}))}))}},tt=function(n){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(o){switch(o.label){case 0:return t=n.loadedConfig,[4,void 0===t?Vn(n):t];case 1:return r=o.sent(),[2,e.__assign(e.__assign({},r.configFile),r.credentialsFile)]}}))}))},rt=function(e){return e.profile||process.env.AWS_PROFILE||"default"},ot=function(n,t,r,o){return void 0===o&&(o={}),e.__awaiter(void 0,void 0,void 0,(function(){var i,s,a,u,c,d,l,f,v,g,_,p,h,m;return e.__generator(this,(function(w){switch(w.label){case 0:if(i=t[n],Object.keys(o).length>0&&Qn(i))return[2,st(i)];if(!(et(y=i)&&"string"==typeof y.source_profile&&void 0===y.credential_source||function(e){return et(e)&&"string"==typeof e.credential_source&&void 0===e.source_profile}(i)))return[3,4];if(s=i.external_id,a=i.mfa_serial,u=i.role_arn,c=i.role_session_name,d=void 0===c?"aws-sdk-js-"+Date.now():c,l=i.source_profile,f=i.credential_source,!r.roleAssumer)throw new Ee("Profile "+n+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(l&&l in o)throw new Ee("Detected a cycle attempting to resolve credentials for profile "+rt(r)+". Profiles visited: "+Object.keys(o).join(", "),!1);if(v=l?ot(l,t,r,e.__assign(e.__assign({},o),((m={})[l]=!0,m))):it(f,n)(),g={RoleArn:u,RoleSessionName:d,ExternalId:s},!a)return[3,2];if(!r.mfaCodeProvider)throw new Ee("Profile "+n+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return g.SerialNumber=a,_=g,[4,r.mfaCodeProvider(a)];case 1:_.TokenCode=w.sent(),w.label=2;case 2:return h=(p=r).roleAssumer,[4,v];case 3:return[2,h.apply(p,[w.sent(),g])];case 4:if(Qn(i))return[2,st(i)];if(function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.web_identity_token_file&&"string"==typeof e.role_arn&&["undefined","string"].indexOf(typeof e.role_session_name)>-1}(i))return[2,at(i,r)];throw new Ee("Profile "+n+" could not be found or parsed in shared credentials file.")}var y}))}))},it=function(e,n){var t={EcsContainer:On,Ec2InstanceMetadata:Kn,Environment:En};if(e in t)return t[e]();throw new Ee("Unsupported credential source in profile "+n+". Got "+e+", expected EcsContainer or Ec2InstanceMetadata or Environment.")},st=function(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})},at=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){return[2,Fn({webIdentityTokenFile:n.web_identity_token_file,roleArn:n.role_arn,roleSessionName:n.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})()]}))}))},ut=function(n){return void 0===n&&(n={}),function(){return e.__awaiter(void 0,void 0,void 0,(function(){var t;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,tt(n)];case 1:return t=e.sent(),[2,ct(rt(n),t)]}}))}))}},ct=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o;return e.__generator(this,(function(e){switch(e.label){case 0:return r=t[n],t[n]?void 0===(o=r.credential_process)?[3,2]:[4,dt(o).then((function(e){var t;try{t=JSON.parse(e)}catch(e){throw Error("Profile "+n+" credential_process returned invalid JSON.")}var r,o=t.Version,i=t.AccessKeyId,s=t.SecretAccessKey,a=t.SessionToken,u=t.Expiration;if(1!==o)throw Error("Profile "+n+" credential_process did not return Version 1.");if(void 0===i||void 0===s)throw Error("Profile "+n+" credential_process returned invalid credentials.");if(u){var c=new Date;if(new Date(u)<c)throw Error("Profile "+n+" credential_process returned expired credentials.");r=Math.floor(new Date(u).valueOf()/1e3)}return{accessKeyId:i,secretAccessKey:s,sessionToken:a,expirationUnix:r}})).catch((function(e){throw new Ee(e.message)}))]:[3,4];case 1:return[2,e.sent()];case 2:throw new Ee("Profile "+n+" did not contain credential_process.");case 3:return[3,5];case 4:throw new Ee("Profile "+n+" could not be found in shared credentials file.");case 5:return[2]}}))}))},dt=function(e){return new Promise((function(n,t){u.exec(e,(function(e,r){e?t(e):n(r.trim())}))}))},lt="3.19.0",ft=function(e,n,t){if(void 0===n&&(n=0),void 0===t&&(t=e.byteLength-n),!Be(e))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return r.Buffer.from(e,n,t)},vt=function(e,n){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return n?r.Buffer.from(e,n):r.Buffer.from(e)},gt=function(){function e(e,n){this.hash=n?c.createHmac(e,_t(n)):c.createHash(e)}return e.prototype.update=function(e,n){this.hash.update(_t(e,n))},e.prototype.digest=function(){return Promise.resolve(this.hash.digest())},e}();function _t(e,n){return r.Buffer.isBuffer(e)?e:"string"==typeof e?vt(e,n):ArrayBuffer.isView(e)?ft(e.buffer,e.byteOffset,e.byteLength):ft(e)}var pt=function(n){return"function"==typeof n?function(){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){return[2,n()]}))}))}:(t=n,function(){return Promise.resolve(t)});var t},ht=function(n,t){var r,o=n.environmentVariableSelector,i=n.configFileSelector,s=n.default;return void 0===t&&(t={}),ke(xe((r=o,function(){return e.__awaiter(void 0,void 0,void 0,(function(){var n;return e.__generator(this,(function(e){try{if(void 0===(n=r(process.env)))throw new Error;return[2,n]}catch(e){throw new Ee(e.message||"Cannot load config from environment variables with getter: "+r)}return[2]}))}))}),function(n,t){void 0===t&&(t={});var r=t.preferredFile,o=void 0===r?"config":r,i=e.__rest(t,["preferredFile"]);return function(){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r,s,a,u,c,d,l,f,v,g;return e.__generator(this,(function(_){switch(_.label){case 0:return t=i.loadedConfig,r=void 0===t?Vn(i):t,s=i.profile,a=void 0===s?process.env.AWS_PROFILE||"default":s,[4,r];case 1:u=_.sent(),c=u.configFile,d=u.credentialsFile,l=d[a]||{},f=c[a]||{},v="config"===o?e.__assign(e.__assign({},l),f):e.__assign(e.__assign({},f),l);try{if(void 0===(g=n(v)))throw new Error;return[2,g]}catch(e){throw new Ee(e.message||"Cannot load config for profile "+a+" in SDK configuration files with getter: "+n)}return[2]}}))}))}}(i,t),pt(s)))};var mt=["ECONNRESET","EPIPE","ETIMEDOUT"],wt=function(n){var t,r,o={};try{for(var i=e.__values(Object.keys(n)),s=i.next();!s.done;s=i.next()){var a=s.value,u=n[a];o[a]=Array.isArray(u)?u.join(","):u}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return o};function yt(e,n){n instanceof f.Readable?n.pipe(e):n?e.end(Buffer.from(n)):e.end()}var bt=function(){function n(e){var n=void 0===e?{}:e,t=n.connectionTimeout,r=n.socketTimeout,i=n.httpAgent,s=n.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=t,this.socketTimeout=r;this.httpAgent=i||new o.Agent({keepAlive:true,maxSockets:50}),this.httpsAgent=s||new l.Agent({keepAlive:true,maxSockets:50})}return n.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},n.prototype.handle=function(n,t){var r=this,i=(void 0===t?{}:t).abortSignal;return new Promise((function(t,s){if(null==i?void 0:i.aborted){var a=new Error("Request aborted");return a.name="AbortError",void s(a)}var u="https:"===n.protocol,c=function(n){var t,r,o=[];try{for(var i=e.__values(Object.keys(n).sort()),s=i.next();!s.done;s=i.next()){var a=s.value,u=n[a];if(a=$e(a),Array.isArray(u))for(var c=0,d=u.length;c<d;c++)o.push(a+"="+$e(u[c]));else{var l=a;(u||"string"==typeof u)&&(l+="="+$e(u)),o.push(l)}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return o.join("&")}(n.query||{}),d={headers:n.headers,host:n.hostname,method:n.method,path:c?n.path+"?"+c:n.path,port:n.port,agent:u?r.httpsAgent:r.httpAgent},f=(u?l.request:o.request)(d,(function(n){var r=new e.HttpResponse({statusCode:n.statusCode||-1,headers:wt(n.headers),body:n});t({response:r})}));f.on("error",(function(e){mt.includes(e.code)?s(Object.assign(e,{name:"TimeoutError"})):s(e)})),function(e,n,t){void 0===t&&(t=0),t&&e.on("socket",(function(r){if(r.connecting){var o=setTimeout((function(){e.destroy(),n(Object.assign(new Error("Socket timed out without establishing a connection within "+t+" ms"),{name:"TimeoutError"}))}),t);r.on("connect",(function(){clearTimeout(o)}))}}))}(f,s,r.connectionTimeout),function(e,n,t){void 0===t&&(t=0),e.setTimeout(t,(function(){e.destroy(),n(Object.assign(new Error("Connection timed out after "+t+" ms"),{name:"TimeoutError"}))}))}(f,s,r.socketTimeout),i&&(i.onabort=function(){f.abort();var e=new Error("Request aborted");e.name="AbortError",s(e)}),function(e,n){"100-continue"===(n.headers.Expect||n.headers.expect)?e.on("continue",(function(){yt(e,n.body)})):yt(e,n.body)}(f,n)}))},n}(),St=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.bufferedBytes=[],e}return e.__extends(t,n),t.prototype._write=function(e,n,t){this.bufferedBytes.push(e),t()},t}(f.Writable),At=function(e){return new Promise((function(n,t){var r=new St;e.pipe(r),e.on("error",(function(e){r.end(),t(e)})),r.on("error",t),r.on("finish",(function(){var e=new Uint8Array(Buffer.concat(this.bufferedBytes));n(e)}))}))};function Et(e){var n=vt(e,"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}function xt(e){return ft(e.buffer,e.byteOffset,e.byteLength).toString("base64")}function kt(e){return e?"string"==typeof e?Buffer.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?i.lstatSync(e.path).size:void 0:0}var It=function(n){var t=n.serviceId,r=n.clientVersion,o=[["aws-sdk-js",r],["os/"+s.platform(),s.release()],["lang/js"],["md/nodejs",""+W.versions.node]];t&&o.push(["api/"+t,r]),W.env.AWS_EXECUTION_ENV&&o.push(["exec-env/"+W.env.AWS_EXECUTION_ENV]);var i=ht({environmentVariableSelector:function(e){return e.AWS_SDK_UA_APP_ID},configFileSelector:function(e){return e["sdk-ua-app-id"]},default:void 0})(),a=void 0;return function(){return e.__awaiter(void 0,void 0,void 0,(function(){var n;return e.__generator(this,(function(t){switch(t.label){case 0:return a?[3,2]:[4,i];case 1:n=t.sent(),a=n?e.__spreadArray(e.__spreadArray([],e.__read(o)),[["app/"+n]]):e.__spreadArray([],e.__read(o)),t.label=2;case 2:return[2,a]}}))}))}},Tt=function(e){var n=vt(e,"utf8");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Pt=function(e){return ft(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},Ct=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Rt=new Set(["cn-north-1","cn-northwest-1"]),Ot=new Set(["us-iso-east-1"]),Nt=new Set(["us-isob-east-1"]),zt=new Set(["us-gov-east-1","us-gov-west-1"]);var Lt=function(n){var t,r=new URL(n),o=r.hostname,i=r.pathname,s=r.port,a=r.protocol,u=r.search;return u&&(t=function(n){var t,r,o={};if(n=n.replace(/^\?/,""))try{for(var i=e.__values(n.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value,u=e.__read(a.split("="),2),c=u[0],d=u[1],l=void 0===d?null:d;c=decodeURIComponent(c),l&&(l=decodeURIComponent(l)),c in o?Array.isArray(o[c])?o[c].push(l):o[c]=[o[c],l]:o[c]=l}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return o}(u)),{hostname:o,port:s?parseInt(s):void 0,protocol:a,path:i,query:t}},Dt={apiVersion:"2019-06-10",disableHostPrefix:!1,logger:{},regionInfoProvider:function(n,t){var r=void 0;switch(n){case"ap-southeast-1":r={hostname:"portal.sso.ap-southeast-1.amazonaws.com",partition:"aws",signingRegion:"ap-southeast-1"};break;case"ap-southeast-2":r={hostname:"portal.sso.ap-southeast-2.amazonaws.com",partition:"aws",signingRegion:"ap-southeast-2"};break;case"ca-central-1":r={hostname:"portal.sso.ca-central-1.amazonaws.com",partition:"aws",signingRegion:"ca-central-1"};break;case"eu-central-1":r={hostname:"portal.sso.eu-central-1.amazonaws.com",partition:"aws",signingRegion:"eu-central-1"};break;case"eu-west-1":r={hostname:"portal.sso.eu-west-1.amazonaws.com",partition:"aws",signingRegion:"eu-west-1"};break;case"eu-west-2":r={hostname:"portal.sso.eu-west-2.amazonaws.com",partition:"aws",signingRegion:"eu-west-2"};break;case"us-east-1":r={hostname:"portal.sso.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"us-east-2":r={hostname:"portal.sso.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"us-west-2":r={hostname:"portal.sso.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;default:Ct.has(n)&&(r={hostname:"portal.sso.{region}.amazonaws.com".replace("{region}",n),partition:"aws"}),Rt.has(n)&&(r={hostname:"portal.sso.{region}.amazonaws.com.cn".replace("{region}",n),partition:"aws-cn"}),Ot.has(n)&&(r={hostname:"portal.sso.{region}.c2s.ic.gov".replace("{region}",n),partition:"aws-iso"}),Nt.has(n)&&(r={hostname:"portal.sso.{region}.sc2s.sgov.gov".replace("{region}",n),partition:"aws-iso-b"}),zt.has(n)&&(r={hostname:"portal.sso.{region}.amazonaws.com".replace("{region}",n),partition:"aws-us-gov"}),void 0===r&&(r={hostname:"portal.sso.{region}.amazonaws.com".replace("{region}",n),partition:"aws"})}return Promise.resolve(e.__assign({signingService:"awsssoportal"},r))},serviceId:"SSO",urlParser:Lt},qt=e.__assign(e.__assign({},Dt),{runtime:"node",base64Decoder:Et,base64Encoder:xt,bodyLengthChecker:kt,defaultUserAgentProvider:It({serviceId:Dt.serviceId,clientVersion:lt}),maxAttempts:ht(d.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:ht(yn,bn),requestHandler:new bt,retryModeProvider:ht(d.NODE_RETRY_MODE_CONFIG_OPTIONS),sha256:gt.bind(null,"sha256"),streamCollector:At,utf8Decoder:Tt,utf8Encoder:Pt});var jt={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Kt=function(n){return{applyToStack:function(t){t.add(function(n){var t=this;return function(r){return function(o){return e.__awaiter(t,void 0,void 0,(function(){var t,i,s,a,u;return e.__generator(this,(function(c){return t=o.request,e.HttpRequest.isInstance(t)&&(i=t.body,s=t.headers,i&&-1===Object.keys(s).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(a=n(i))&&(t.headers=e.__assign(e.__assign({},t.headers),((u={})["content-length"]=String(a),u)))),[2,r(e.__assign(e.__assign({},o),{request:t}))]}))}))}}}(n.bodyLengthChecker),jt)}}};function Ut(e){return e}var Ht={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Wt=function(n){return{applyToStack:function(t){t.add(function(n){return function(t){return function(r){return e.__awaiter(void 0,void 0,void 0,(function(){var o,i;return e.__generator(this,(function(s){return e.HttpRequest.isInstance(r.request)?(o=r.request,(void 0===(i=(n.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!o.headers[":authority"]?(delete o.headers.host,o.headers[":authority"]=""):o.headers.host||(o.headers.host=o.hostname),[2,t(r)]):[2,t(r)]}))}))}}}(n),Ht)}}},Ft={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Mt=function(n){return{applyToStack:function(n){n.add((function(n,t){return function(r){return e.__awaiter(void 0,void 0,void 0,(function(){var o,i,s,a,u,c,d,l,f;return e.__generator(this,(function(v){switch(v.label){case 0:return o=t.clientName,i=t.commandName,s=t.inputFilterSensitiveLog,a=t.logger,u=t.outputFilterSensitiveLog,[4,n(r)];case 1:return c=v.sent(),a?("function"==typeof a.info&&(d=c.output,l=d.$metadata,f=e.__rest(d,["$metadata"]),a.info({clientName:o,commandName:i,input:s(r.input),output:u(f),metadata:l})),[2,c]):[2,c]}}))}))}}),Ft)}}};function $t(n){return e.__assign(e.__assign({},n),{customUserAgent:"string"==typeof n.customUserAgent?[[n.customUserAgent]]:n.customUserAgent})}var Vt,Bt,Gt,Xt,Yt,Zt,Jt,Qt,er,nr,tr,rr,or,ir,sr=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,ar=function(n){var t=e.__read(n,2),r=t[0],o=t[1],i=r.indexOf("/"),s=r.substring(0,i),a=r.substring(i+1);return"api"===s&&(a=a.toLowerCase()),[s,a,o].filter((function(e){return e&&e.length>0})).map((function(e){return null==e?void 0:e.replace(sr,"_")})).join("/")},ur={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},cr=function(n){return{applyToStack:function(t){var r;t.add((r=n,function(n,t){return function(o){return e.__awaiter(void 0,void 0,void 0,(function(){var i,s,a,u,c,d,l,f,v;return e.__generator(this,(function(g){switch(g.label){case 0:return i=o.request,e.HttpRequest.isInstance(i)?(s=i.headers,a=(null===(f=null==t?void 0:t.userAgent)||void 0===f?void 0:f.map(ar))||[],[4,r.defaultUserAgentProvider()]):[2,n(o)];case 1:return u=g.sent().map(ar),c=(null===(v=null==r?void 0:r.customUserAgent)||void 0===v?void 0:v.map(ar))||[],d=e.__spreadArray(e.__spreadArray(e.__spreadArray([],e.__read(u)),e.__read(a)),e.__read(c)).join(" "),l=e.__spreadArray(e.__spreadArray([],e.__read(u.filter((function(e){return e.startsWith("aws-sdk-")})))),e.__read(c)).join(" "),"browser"!==r.runtime?(l&&(s["x-amz-user-agent"]=s["x-amz-user-agent"]?s["user-agent"]+" "+l:l),s["user-agent"]=d):s["x-amz-user-agent"]=d,[2,n(e.__assign(e.__assign({},o),{request:i}))]}}))}))}}),ur)}}},dr=function(n){function t(t){var r=this,o=e.__assign(e.__assign({},qt),t),i=Sn(o),s=hn(i),a=$t(d.resolveRetryConfig(s));return(r=n.call(this,a)||this).config=a,r.middlewareStack.use(d.getRetryPlugin(r.config)),r.middlewareStack.use(Kt(r.config)),r.middlewareStack.use(Wt(r.config)),r.middlewareStack.use(Mt(r.config)),r.middlewareStack.use(cr(r.config)),r}return e.__extends(t,n),t.prototype.destroy=function(){n.prototype.destroy.call(this)},t}(n.Client);!function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(Vt||(Vt={})),function(t){t.filterSensitiveLog=function(t){return e.__assign(e.__assign({},t),t.accessToken&&{accessToken:n.SENSITIVE_STRING})}}(Bt||(Bt={})),function(t){t.filterSensitiveLog=function(t){return e.__assign(e.__assign(e.__assign({},t),t.secretAccessKey&&{secretAccessKey:n.SENSITIVE_STRING}),t.sessionToken&&{sessionToken:n.SENSITIVE_STRING})}}(Gt||(Gt={})),function(n){n.filterSensitiveLog=function(n){return e.__assign(e.__assign({},n),n.roleCredentials&&{roleCredentials:Gt.filterSensitiveLog(n.roleCredentials)})}}(Xt||(Xt={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(Yt||(Yt={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(Zt||(Zt={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(Jt||(Jt={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(Qt||(Qt={})),function(t){t.filterSensitiveLog=function(t){return e.__assign(e.__assign({},t),t.accessToken&&{accessToken:n.SENSITIVE_STRING})}}(er||(er={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(nr||(nr={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(tr||(tr={})),function(t){t.filterSensitiveLog=function(t){return e.__assign(e.__assign({},t),t.accessToken&&{accessToken:n.SENSITIVE_STRING})}}(rr||(rr={})),function(n){n.filterSensitiveLog=function(n){return e.__assign({},n)}}(or||(or={})),function(t){t.filterSensitiveLog=function(t){return e.__assign(e.__assign({},t),t.accessToken&&{accessToken:n.SENSITIVE_STRING})}}(ir||(ir={}));var lr,fr=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o,i,s,a,u,c,d,l,f,v;return e.__generator(this,(function(g){switch(g.label){case 0:return o=[e.__assign({},n)],v={},[4,br(n.body,t)];case 1:switch(r=e.__assign.apply(void 0,o.concat([(v.body=g.sent(),v)])),s="UnknownError",s=Sr(n,r.body),s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":return[3,4];case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":return[3,6];case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":return[3,8]}return[3,10];case 2:return a=[{}],[4,vr(r)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,a.concat([g.sent()])),{name:s,$metadata:mr(n)}]),[3,11];case 4:return u=[{}],[4,gr(r)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([g.sent()])),{name:s,$metadata:mr(n)}]),[3,11];case 6:return c=[{}],[4,_r(r)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([g.sent()])),{name:s,$metadata:mr(n)}]),[3,11];case 8:return d=[{}],[4,pr(r)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([g.sent()])),{name:s,$metadata:mr(n)}]),[3,11];case 10:l=r.body,s=l.code||l.Code||s,i=e.__assign(e.__assign({},l),{name:""+s,message:l.message||l.Message||s,$fault:"client",$metadata:mr(n)}),g.label=11;case 11:return f=i.message||i.Message||s,i.message=f,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}}))}))},vr=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(e){return t={name:"InvalidRequestException",$fault:"client",$metadata:mr(n),message:void 0},void 0!==(r=n.body).message&&null!==r.message&&(t.message=r.message),[2,t]}))}))},gr=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(e){return t={name:"ResourceNotFoundException",$fault:"client",$metadata:mr(n),message:void 0},void 0!==(r=n.body).message&&null!==r.message&&(t.message=r.message),[2,t]}))}))},_r=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:mr(n),message:void 0},void 0!==(r=n.body).message&&null!==r.message&&(t.message=r.message),[2,t]}))}))},pr=function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(e){return t={name:"UnauthorizedException",$fault:"client",$metadata:mr(n),message:void 0},void 0!==(r=n.body).message&&null!==r.message&&(t.message=r.message),[2,t]}))}))},hr=function(e,n){return{accessKeyId:void 0!==e.accessKeyId&&null!==e.accessKeyId?e.accessKeyId:void 0,expiration:void 0!==e.expiration&&null!==e.expiration?e.expiration:void 0,secretAccessKey:void 0!==e.secretAccessKey&&null!==e.secretAccessKey?e.secretAccessKey:void 0,sessionToken:void 0!==e.sessionToken&&null!==e.sessionToken?e.sessionToken:void 0}},mr=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},wr=function(e,n){return function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,n).then((function(e){return n.utf8Encoder(e)}))},yr=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},br=function(e,n){return wr(e,n).then((function(e){return e.length?JSON.parse(e):{}}))},Sr=function(e,n){var t,r,o=function(e){var n=e;return n.indexOf(":")>=0&&(n=n.split(":")[0]),n.indexOf("#")>=0&&(n=n.split("#")[1]),n},i=(t=e.headers,r="x-amzn-errortype",Object.keys(t).find((function(e){return e.toLowerCase()===r.toLowerCase()})));return void 0!==i?o(e.headers[i]):void 0!==n.code?o(n.code):void 0!==n.__type?o(n.__type):""},Ar=function(t){function r(e){var n=t.call(this)||this;return n.input=e,n}return e.__extends(r,t),r.prototype.resolveMiddleware=function(e,t,r){this.middlewareStack.use(n.getSerdePlugin(t,this.serialize,this.deserialize));var o=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:Bt.filterSensitiveLog,outputFilterSensitiveLog:Xt.filterSensitiveLog},s=t.requestHandler;return o.resolve((function(e){return s.handle(e.request,r||{})}),i)},r.prototype.serialize=function(n,t){return function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o,i,s,a,u,c,d;return e.__generator(this,(function(l){switch(l.label){case 0:return r=e.__assign({},yr(n.accessToken)&&{"x-amz-sso_bearer_token":n.accessToken}),o="/federation/credentials",i=e.__assign(e.__assign({},void 0!==n.roleName&&{role_name:n.roleName}),void 0!==n.accountId&&{account_id:n.accountId}),[4,t.endpoint()];case 1:return s=l.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,d=s.port,[2,new e.HttpRequest({protocol:c,hostname:a,port:d,method:"GET",headers:r,path:o,query:i,body:void 0})]}}))}))}(n,t)},r.prototype.deserialize=function(n,t){return function(n,t){return e.__awaiter(void 0,void 0,void 0,(function(){var r,o;return e.__generator(this,(function(e){switch(e.label){case 0:return 200!==n.statusCode&&n.statusCode>=300?[2,fr(n,t)]:(r={$metadata:mr(n),roleCredentials:void 0},[4,br(n.body,t)]);case 1:return void 0!==(o=e.sent()).roleCredentials&&null!==o.roleCredentials&&(r.roleCredentials=hr(o.roleCredentials)),[2,Promise.resolve(r)]}}))}))}(n,t)},r}(n.Command),Er=function(n){return void 0===n&&(n={}),function(){return e.__awaiter(void 0,void 0,void 0,(function(){var t;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,tt(n)];case 1:return t=e.sent(),[2,xr(rt(n),t,n)]}}))}))}},xr=function(n,t,r){return e.__awaiter(void 0,void 0,void 0,(function(){var o,s,u,d,l,f,v,g,_,p,h,m,w,y,b,S,A,E,x;return e.__generator(this,(function(e){switch(e.label){case 0:if(!(o=t[n]))throw new Ee("Profile "+n+" could not be found in shared credentials file.");if(s=o.sso_start_url,u=o.sso_account_id,d=o.sso_region,l=o.sso_role_name,!(s||u||d||l))throw new Ee("Profile "+n+" is not configured with SSO credentials.");if(!(s&&u&&d&&l))throw new Ee("Profile "+n+' does not have valid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html',false);f=c.createHash("sha1"),v=f.update(s).digest("hex"),g=a.join(Jn(),".aws","sso","cache",v+".json");try{if(_=JSON.parse(i.readFileSync(g,{encoding:"utf-8"})),new Date(_.expiresAt).getTime()-Date.now()<=9e5)throw new Error("SSO token is expired.")}catch(e){throw new Ee("The SSO session associated with this profile has expired or is otherwise invalid. To refresh this SSO session run aws sso login with the corresponding profile.",false)}p=_.accessToken,h=r.ssoClient||new dr({region:d}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,h.send(new Ar({accountId:u,roleName:l,accessToken:p}))];case 2:return m=e.sent(),[3,4];case 3:throw w=e.sent(),Ee.from(w,false);case 4:if(y=m.roleCredentials,S=(b=void 0===y?{}:y).accessKeyId,A=b.secretAccessKey,E=b.sessionToken,x=b.expiration,!(S&&A&&E&&x))throw new Ee("SSO returns an invalid temporary credential.",false);return[2,{accessKeyId:S,secretAccessKey:A,sessionToken:E,expiration:new Date(x)}]}}))}))},kr=function(n){void 0===n&&(n={});var t=e.__assign({profile:process.env.AWS_PROFILE},n);t.loadedConfig||(t.loadedConfig=Vn(n));var r=[Er(t),nt(t),ut(t),Fn(t),Ir(t),function(){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){throw new Ee("Could not load credentials from any providers",!1)}))}))}];t.profile||r.unshift(En());var o=xe.apply(void 0,e.__spreadArray([],e.__read(r)));return ke(o,(function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5}),(function(e){return void 0!==e.expiration}))},Ir=function(e){return process.env[Rn]||process.env[Cn]?On(e):process.env.AWS_EC2_METADATA_DISABLED?function(){return Promise.reject(new Ee("EC2 Instance Metadata Service access disabled"))}:Kn(e)},Tr=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Pr=new Set(["cn-north-1","cn-northwest-1"]),Cr=new Set(["us-iso-east-1"]),Rr=new Set(["us-isob-east-1"]),Or=new Set(["us-gov-east-1","us-gov-west-1"]),Nr={apiVersion:"2011-06-15",disableHostPrefix:!1,logger:{},regionInfoProvider:function(n,t){var r=void 0;switch(n){case"af-south-1":r={hostname:"sts.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":r={hostname:"sts.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":r={hostname:"sts.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":r={hostname:"sts.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-northeast-3":r={hostname:"sts.ap-northeast-3.amazonaws.com",partition:"aws"};break;case"ap-south-1":r={hostname:"sts.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":r={hostname:"sts.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":r={hostname:"sts.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":r={hostname:"sts.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":r={hostname:"sts.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":r={hostname:"sts.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":r={hostname:"sts.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":r={hostname:"sts.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":r={hostname:"sts.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":r={hostname:"sts.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":r={hostname:"sts.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":r={hostname:"sts.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":r={hostname:"sts.eu-west-3.amazonaws.com",partition:"aws"};break;case"me-south-1":r={hostname:"sts.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":r={hostname:"sts.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":r={hostname:"sts.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1-fips":r={hostname:"sts-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"us-east-2":r={hostname:"sts.us-east-2.amazonaws.com",partition:"aws"};break;case"us-east-2-fips":r={hostname:"sts-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"us-gov-east-1":r={hostname:"sts.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-east-1-fips":r={hostname:"sts.us-gov-east-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-east-1"};break;case"us-gov-west-1":r={hostname:"sts.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1-fips":r={hostname:"sts.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-iso-east-1":r={hostname:"sts.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":r={hostname:"sts.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":r={hostname:"sts.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-1-fips":r={hostname:"sts-fips.us-west-1.amazonaws.com",partition:"aws",signingRegion:"us-west-1"};break;case"us-west-2":r={hostname:"sts.us-west-2.amazonaws.com",partition:"aws"};break;case"us-west-2-fips":r={hostname:"sts-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;default:Tr.has(n)&&(r={hostname:"sts.{region}.amazonaws.com".replace("{region}",n),partition:"aws"}),Pr.has(n)&&(r={hostname:"sts.{region}.amazonaws.com.cn".replace("{region}",n),partition:"aws-cn"}),Cr.has(n)&&(r={hostname:"sts.{region}.c2s.ic.gov".replace("{region}",n),partition:"aws-iso"}),Rr.has(n)&&(r={hostname:"sts.{region}.sc2s.sgov.gov".replace("{region}",n),partition:"aws-iso-b"}),Or.has(n)&&(r={hostname:"sts.{region}.amazonaws.com".replace("{region}",n),partition:"aws-us-gov"}),void 0===r&&(r={hostname:"sts.{region}.amazonaws.com".replace("{region}",n),partition:"aws"})}return Promise.resolve(e.__assign({signingService:"sts"},r))},serviceId:"STS",urlParser:Lt},zr=e.__assign(e.__assign({},Nr),{runtime:"node",base64Decoder:Et,base64Encoder:xt,bodyLengthChecker:kt,credentialDefaultProvider:(lr=kr,function(n){return lr(e.__assign({roleAssumer:_n(n,n.stsClientCtor),roleAssumerWithWebIdentity:pn(n,n.stsClientCtor)},n))}),defaultUserAgentProvider:It({serviceId:Nr.serviceId,clientVersion:F}),maxAttempts:ht(d.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:ht(yn,bn),requestHandler:new bt,retryModeProvider:ht(d.NODE_RETRY_MODE_CONFIG_OPTIONS),sha256:gt.bind(null,"sha256"),streamCollector:At,utf8Decoder:Tt,utf8Encoder:Pt}),Lr=function(n){function t(r){var o,i,s=this,a=e.__assign(e.__assign({},zr),r),u=Sn(a),c=hn(u),l=d.resolveRetryConfig(c),f=$t((o=l,i=t,on(e.__assign(e.__assign({},o),{stsClientCtor:i}))));return(s=n.call(this,f)||this).config=f,s.middlewareStack.use(d.getRetryPlugin(s.config)),s.middlewareStack.use(Kt(s.config)),s.middlewareStack.use(Wt(s.config)),s.middlewareStack.use(Mt(s.config)),s.middlewareStack.use(cr(s.config)),s}return e.__extends(t,n),t.prototype.destroy=function(){n.prototype.destroy.call(this)},t}(n.Client),Dr=function(e){return void 0===e&&(e={}),pn(e,Lr)};exports.Hash=gt,exports.NODE_REGION_CONFIG_FILE_OPTIONS=bn,exports.NODE_REGION_CONFIG_OPTIONS=yn,exports.NodeHttpHandler=bt,exports.calculateBodyLength=kt,exports.decorateDefaultCredentialProvider=function(n){return function(t){return n(e.__assign({roleAssumer:(r=t,void 0===r&&(r={}),_n(r,Lr)),roleAssumerWithWebIdentity:Dr(t)},t));var r}},exports.defaultProvider=kr,exports.defaultUserAgent=It,exports.fromBase64=Et,exports.fromHex=function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var n=new Uint8Array(e.length/2),t=0;t<e.length;t+=2){var r=e.substr(t,2).toLowerCase();if(!(r in Te))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");n[t/2]=Te[r]}return n},exports.fromUtf8=Tt,exports.getAwsAuthPlugin=ln,exports.getContentLengthPlugin=Kt,exports.getHostHeaderPlugin=Wt,exports.getLoggerPlugin=Mt,exports.getUserAgentPlugin=cr,exports.loadConfig=ht,exports.parseUrl=Lt,exports.resolveAwsAuthConfig=on,exports.resolveEndpointsConfig=hn,exports.resolveHostHeaderConfig=Ut,exports.resolveRegionConfig=Sn,exports.resolveUserAgentConfig=$t,exports.streamCollector=At,exports.toBase64=xt,exports.toHex=Re,exports.toUtf8=Pt;
